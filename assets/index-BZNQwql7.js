(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var at=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function hy(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var sf={exports:{}},Ba={},af={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ri=Symbol.for("react.element"),fy=Symbol.for("react.portal"),py=Symbol.for("react.fragment"),my=Symbol.for("react.strict_mode"),gy=Symbol.for("react.profiler"),yy=Symbol.for("react.provider"),vy=Symbol.for("react.context"),wy=Symbol.for("react.forward_ref"),_y=Symbol.for("react.suspense"),xy=Symbol.for("react.memo"),ky=Symbol.for("react.lazy"),nd=Symbol.iterator;function Sy(t){return t===null||typeof t!="object"?null:(t=nd&&t[nd]||t["@@iterator"],typeof t=="function"?t:null)}var of={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lf=Object.assign,uf={};function qr(t,e,n){this.props=t,this.context=e,this.refs=uf,this.updater=n||of}qr.prototype.isReactComponent={};qr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cf(){}cf.prototype=qr.prototype;function ju(t,e,n){this.props=t,this.context=e,this.refs=uf,this.updater=n||of}var Cu=ju.prototype=new cf;Cu.constructor=ju;lf(Cu,qr.prototype);Cu.isPureReactComponent=!0;var rd=Array.isArray,df=Object.prototype.hasOwnProperty,Pu={current:null},hf={key:!0,ref:!0,__self:!0,__source:!0};function ff(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)df.call(e,r)&&!hf.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:ri,type:t,key:i,ref:a,props:s,_owner:Pu.current}}function by(t,e){return{$$typeof:ri,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nu(t){return typeof t=="object"&&t!==null&&t.$$typeof===ri}function Ey(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sd=/\/+/g;function bo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ey(""+t.key):e.toString(36)}function Gi(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ri:case fy:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+bo(a,0):r,rd(s)?(n="",t!=null&&(n=t.replace(sd,"$&/")+"/"),Gi(s,e,n,"",function(u){return u})):s!=null&&(Nu(s)&&(s=by(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(sd,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",rd(t))for(var o=0;o<t.length;o++){i=t[o];var l=r+bo(i,o);a+=Gi(i,e,n,l,s)}else if(l=Sy(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=r+bo(i,o++),a+=Gi(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function mi(t,e,n){if(t==null)return t;var r=[],s=0;return Gi(t,r,"","",function(i){return e.call(n,i,s++)}),r}function jy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Te={current:null},Ki={transition:null},Cy={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:Ki,ReactCurrentOwner:Pu};function pf(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:mi,forEach:function(t,e,n){mi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return mi(t,function(){e++}),e},toArray:function(t){return mi(t,function(e){return e})||[]},only:function(t){if(!Nu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};F.Component=qr;F.Fragment=py;F.Profiler=gy;F.PureComponent=ju;F.StrictMode=my;F.Suspense=_y;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cy;F.act=pf;F.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lf({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Pu.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)df.call(e,l)&&!hf.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:ri,type:t.type,key:s,ref:i,props:r,_owner:a}};F.createContext=function(t){return t={$$typeof:vy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yy,_context:t},t.Consumer=t};F.createElement=ff;F.createFactory=function(t){var e=ff.bind(null,t);return e.type=t,e};F.createRef=function(){return{current:null}};F.forwardRef=function(t){return{$$typeof:wy,render:t}};F.isValidElement=Nu;F.lazy=function(t){return{$$typeof:ky,_payload:{_status:-1,_result:t},_init:jy}};F.memo=function(t,e){return{$$typeof:xy,type:t,compare:e===void 0?null:e}};F.startTransition=function(t){var e=Ki.transition;Ki.transition={};try{t()}finally{Ki.transition=e}};F.unstable_act=pf;F.useCallback=function(t,e){return Te.current.useCallback(t,e)};F.useContext=function(t){return Te.current.useContext(t)};F.useDebugValue=function(){};F.useDeferredValue=function(t){return Te.current.useDeferredValue(t)};F.useEffect=function(t,e){return Te.current.useEffect(t,e)};F.useId=function(){return Te.current.useId()};F.useImperativeHandle=function(t,e,n){return Te.current.useImperativeHandle(t,e,n)};F.useInsertionEffect=function(t,e){return Te.current.useInsertionEffect(t,e)};F.useLayoutEffect=function(t,e){return Te.current.useLayoutEffect(t,e)};F.useMemo=function(t,e){return Te.current.useMemo(t,e)};F.useReducer=function(t,e,n){return Te.current.useReducer(t,e,n)};F.useRef=function(t){return Te.current.useRef(t)};F.useState=function(t){return Te.current.useState(t)};F.useSyncExternalStore=function(t,e,n){return Te.current.useSyncExternalStore(t,e,n)};F.useTransition=function(){return Te.current.useTransition()};F.version="18.3.1";af.exports=F;var j=af.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py=j,Ny=Symbol.for("react.element"),Ty=Symbol.for("react.fragment"),Ry=Object.prototype.hasOwnProperty,Ay=Py.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Oy={key:!0,ref:!0,__self:!0,__source:!0};function mf(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Ry.call(e,r)&&!Oy.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Ny,type:t,key:i,ref:a,props:s,_owner:Ay.current}}Ba.Fragment=Ty;Ba.jsx=mf;Ba.jsxs=mf;sf.exports=Ba;var c=sf.exports,gf={exports:{}},Xe={},yf={exports:{}},vf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,$){var L=P.length;P.push($);e:for(;0<L;){var Y=L-1>>>1,ie=P[Y];if(0<s(ie,$))P[Y]=$,P[L]=ie,L=Y;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var $=P[0],L=P.pop();if(L!==$){P[0]=L;e:for(var Y=0,ie=P.length,er=ie>>>1;Y<er;){var xt=2*(Y+1)-1,ns=P[xt],$t=xt+1,W=P[$t];if(0>s(ns,L))$t<ie&&0>s(W,ns)?(P[Y]=W,P[$t]=L,Y=$t):(P[Y]=ns,P[xt]=L,Y=xt);else if($t<ie&&0>s(W,L))P[Y]=W,P[$t]=L,Y=$t;else break e}}return $}function s(P,$){var L=P.sortIndex-$.sortIndex;return L!==0?L:P.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,h=null,p=3,y=!1,w=!1,v=!1,k=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(P){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=P)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function _(P){if(v=!1,g(P),!w)if(n(l)!==null)w=!0,es(x);else{var $=n(u);$!==null&&ts(_,$.startTime-P)}}function x(P,$){w=!1,v&&(v=!1,m(C),C=-1),y=!0;var L=p;try{for(g($),h=n(l);h!==null&&(!(h.expirationTime>$)||P&&!I());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,p=h.priorityLevel;var ie=Y(h.expirationTime<=$);$=t.unstable_now(),typeof ie=="function"?h.callback=ie:h===n(l)&&r(l),g($)}else r(l);h=n(l)}if(h!==null)var er=!0;else{var xt=n(u);xt!==null&&ts(_,xt.startTime-$),er=!1}return er}finally{h=null,p=L,y=!1}}var S=!1,b=null,C=-1,A=5,T=-1;function I(){return!(t.unstable_now()-T<A)}function Ae(){if(b!==null){var P=t.unstable_now();T=P;var $=!0;try{$=b(!0,P)}finally{$?Ze():(S=!1,b=null)}}else S=!1}var Ze;if(typeof f=="function")Ze=function(){f(Ae)};else if(typeof MessageChannel<"u"){var Yn=new MessageChannel,Zn=Yn.port2;Yn.port1.onmessage=Ae,Ze=function(){Zn.postMessage(null)}}else Ze=function(){k(Ae,0)};function es(P){b=P,S||(S=!0,Ze())}function ts(P,$){C=k(function(){P(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,es(x))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var L=p;p=$;try{return P()}finally{p=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,$){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var L=p;p=P;try{return $()}finally{p=L}},t.unstable_scheduleCallback=function(P,$,L){var Y=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?Y+L:Y):L=Y,P){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=L+ie,P={id:d++,callback:$,priorityLevel:P,startTime:L,expirationTime:ie,sortIndex:-1},L>Y?(P.sortIndex=L,e(u,P),n(l)===null&&P===n(u)&&(v?(m(C),C=-1):v=!0,ts(_,L-Y))):(P.sortIndex=ie,e(l,P),w||y||(w=!0,es(x))),P},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(P){var $=p;return function(){var L=p;p=$;try{return P.apply(this,arguments)}finally{p=L}}}})(vf);yf.exports=vf;var $y=yf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iy=j,Qe=$y;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wf=new Set,Ms={};function qn(t,e){Lr(t,e),Lr(t+"Capture",e)}function Lr(t,e){for(Ms[t]=e,t=0;t<e.length;t++)wf.add(e[t])}var Vt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fl=Object.prototype.hasOwnProperty,Ly=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,id={},ad={};function My(t){return fl.call(ad,t)?!0:fl.call(id,t)?!1:Ly.test(t)?ad[t]=!0:(id[t]=!0,!1)}function Dy(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Fy(t,e,n,r){if(e===null||typeof e>"u"||Dy(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Re(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xe[t]=new Re(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xe[e]=new Re(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xe[t]=new Re(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xe[t]=new Re(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xe[t]=new Re(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xe[t]=new Re(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xe[t]=new Re(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xe[t]=new Re(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xe[t]=new Re(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tu=/[\-:]([a-z])/g;function Ru(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tu,Ru);xe[e]=new Re(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tu,Ru);xe[e]=new Re(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tu,Ru);xe[e]=new Re(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xe[t]=new Re(t,1,!1,t.toLowerCase(),null,!1,!1)});xe.xlinkHref=new Re("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xe[t]=new Re(t,1,!1,t.toLowerCase(),null,!0,!0)});function Au(t,e,n,r){var s=xe.hasOwnProperty(e)?xe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Fy(e,n,s,r)&&(n=null),r||s===null?My(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gt=Iy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gi=Symbol.for("react.element"),hr=Symbol.for("react.portal"),fr=Symbol.for("react.fragment"),Ou=Symbol.for("react.strict_mode"),pl=Symbol.for("react.profiler"),_f=Symbol.for("react.provider"),xf=Symbol.for("react.context"),$u=Symbol.for("react.forward_ref"),ml=Symbol.for("react.suspense"),gl=Symbol.for("react.suspense_list"),Iu=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),kf=Symbol.for("react.offscreen"),od=Symbol.iterator;function rs(t){return t===null||typeof t!="object"?null:(t=od&&t[od]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,Eo;function hs(t){if(Eo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Eo=e&&e[1]||""}return`
`+Eo+t}var jo=!1;function Co(t,e){if(!t||jo)return"";jo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{jo=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hs(t):""}function Uy(t){switch(t.tag){case 5:return hs(t.type);case 16:return hs("Lazy");case 13:return hs("Suspense");case 19:return hs("SuspenseList");case 0:case 2:case 15:return t=Co(t.type,!1),t;case 11:return t=Co(t.type.render,!1),t;case 1:return t=Co(t.type,!0),t;default:return""}}function yl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fr:return"Fragment";case hr:return"Portal";case pl:return"Profiler";case Ou:return"StrictMode";case ml:return"Suspense";case gl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xf:return(t.displayName||"Context")+".Consumer";case _f:return(t._context.displayName||"Context")+".Provider";case $u:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Iu:return e=t.displayName||null,e!==null?e:yl(t.type)||"Memo";case nn:e=t._payload,t=t._init;try{return yl(t(e))}catch{}}return null}function zy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yl(e);case 8:return e===Ou?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function By(t){var e=Sf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yi(t){t._valueTracker||(t._valueTracker=By(t))}function bf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Sf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ha(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vl(t,e){var n=e.checked;return ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ld(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ef(t,e){e=e.checked,e!=null&&Au(t,"checked",e,!1)}function wl(t,e){Ef(t,e);var n=wn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_l(t,e.type,n):e.hasOwnProperty("defaultValue")&&_l(t,e.type,wn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ud(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _l(t,e,n){(e!=="number"||ha(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fs=Array.isArray;function Er(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function xl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(fs(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wn(n)}}function jf(t,e){var n=wn(e.value),r=wn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Cf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Cf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vi,Pf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vi=vi||document.createElement("div"),vi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ds(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hy=["Webkit","ms","Moz","O"];Object.keys(bs).forEach(function(t){Hy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bs[e]=bs[t]})});function Nf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bs.hasOwnProperty(t)&&bs[t]?(""+e).trim():e+"px"}function Tf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Nf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Vy=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sl(t,e){if(e){if(Vy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function bl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var El=null;function Lu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jl=null,jr=null,Cr=null;function hd(t){if(t=ai(t)){if(typeof jl!="function")throw Error(E(280));var e=t.stateNode;e&&(e=Ja(e),jl(t.stateNode,t.type,e))}}function Rf(t){jr?Cr?Cr.push(t):Cr=[t]:jr=t}function Af(){if(jr){var t=jr,e=Cr;if(Cr=jr=null,hd(t),e)for(t=0;t<e.length;t++)hd(e[t])}}function Of(t,e){return t(e)}function $f(){}var Po=!1;function If(t,e,n){if(Po)return t(e,n);Po=!0;try{return Of(t,e,n)}finally{Po=!1,(jr!==null||Cr!==null)&&($f(),Af())}}function Fs(t,e){var n=t.stateNode;if(n===null)return null;var r=Ja(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var Cl=!1;if(Vt)try{var ss={};Object.defineProperty(ss,"passive",{get:function(){Cl=!0}}),window.addEventListener("test",ss,ss),window.removeEventListener("test",ss,ss)}catch{Cl=!1}function Wy(t,e,n,r,s,i,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Es=!1,fa=null,pa=!1,Pl=null,qy={onError:function(t){Es=!0,fa=t}};function Jy(t,e,n,r,s,i,a,o,l){Es=!1,fa=null,Wy.apply(qy,arguments)}function Gy(t,e,n,r,s,i,a,o,l){if(Jy.apply(this,arguments),Es){if(Es){var u=fa;Es=!1,fa=null}else throw Error(E(198));pa||(pa=!0,Pl=u)}}function Jn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Lf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fd(t){if(Jn(t)!==t)throw Error(E(188))}function Ky(t){var e=t.alternate;if(!e){if(e=Jn(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return fd(s),t;if(i===r)return fd(s),e;i=i.sibling}throw Error(E(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function Mf(t){return t=Ky(t),t!==null?Df(t):null}function Df(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Df(t);if(e!==null)return e;t=t.sibling}return null}var Ff=Qe.unstable_scheduleCallback,pd=Qe.unstable_cancelCallback,Qy=Qe.unstable_shouldYield,Xy=Qe.unstable_requestPaint,se=Qe.unstable_now,Yy=Qe.unstable_getCurrentPriorityLevel,Mu=Qe.unstable_ImmediatePriority,Uf=Qe.unstable_UserBlockingPriority,ma=Qe.unstable_NormalPriority,Zy=Qe.unstable_LowPriority,zf=Qe.unstable_IdlePriority,Ha=null,Rt=null;function ev(t){if(Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(Ha,t,void 0,(t.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:rv,tv=Math.log,nv=Math.LN2;function rv(t){return t>>>=0,t===0?32:31-(tv(t)/nv|0)|0}var wi=64,_i=4194304;function ps(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ga(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=ps(o):(i&=a,i!==0&&(r=ps(i)))}else a=n&~s,a!==0?r=ps(a):i!==0&&(r=ps(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vt(e),s=1<<n,r|=t[n],e&=~s;return r}function sv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iv(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-vt(i),o=1<<a,l=s[a];l===-1?(!(o&n)||o&r)&&(s[a]=sv(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function Nl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Bf(){var t=wi;return wi<<=1,!(wi&4194240)&&(wi=64),t}function No(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function si(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vt(e),t[e]=n}function av(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Du(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var H=0;function Hf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Vf,Fu,Wf,qf,Jf,Tl=!1,xi=[],dn=null,hn=null,fn=null,Us=new Map,zs=new Map,an=[],ov="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function md(t,e){switch(t){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":Us.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zs.delete(e.pointerId)}}function is(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ai(e),e!==null&&Fu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function lv(t,e,n,r,s){switch(e){case"focusin":return dn=is(dn,t,e,n,r,s),!0;case"dragenter":return hn=is(hn,t,e,n,r,s),!0;case"mouseover":return fn=is(fn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Us.set(i,is(Us.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,zs.set(i,is(zs.get(i)||null,t,e,n,r,s)),!0}return!1}function Gf(t){var e=In(t.target);if(e!==null){var n=Jn(e);if(n!==null){if(e=n.tag,e===13){if(e=Lf(n),e!==null){t.blockedOn=e,Jf(t.priority,function(){Wf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);El=r,n.target.dispatchEvent(r),El=null}else return e=ai(n),e!==null&&Fu(e),t.blockedOn=n,!1;e.shift()}return!0}function gd(t,e,n){Qi(t)&&n.delete(e)}function uv(){Tl=!1,dn!==null&&Qi(dn)&&(dn=null),hn!==null&&Qi(hn)&&(hn=null),fn!==null&&Qi(fn)&&(fn=null),Us.forEach(gd),zs.forEach(gd)}function as(t,e){t.blockedOn===e&&(t.blockedOn=null,Tl||(Tl=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,uv)))}function Bs(t){function e(s){return as(s,t)}if(0<xi.length){as(xi[0],t);for(var n=1;n<xi.length;n++){var r=xi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(dn!==null&&as(dn,t),hn!==null&&as(hn,t),fn!==null&&as(fn,t),Us.forEach(e),zs.forEach(e),n=0;n<an.length;n++)r=an[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<an.length&&(n=an[0],n.blockedOn===null);)Gf(n),n.blockedOn===null&&an.shift()}var Pr=Gt.ReactCurrentBatchConfig,ya=!0;function cv(t,e,n,r){var s=H,i=Pr.transition;Pr.transition=null;try{H=1,Uu(t,e,n,r)}finally{H=s,Pr.transition=i}}function dv(t,e,n,r){var s=H,i=Pr.transition;Pr.transition=null;try{H=4,Uu(t,e,n,r)}finally{H=s,Pr.transition=i}}function Uu(t,e,n,r){if(ya){var s=Rl(t,e,n,r);if(s===null)Fo(t,e,r,va,n),md(t,r);else if(lv(s,t,e,n,r))r.stopPropagation();else if(md(t,r),e&4&&-1<ov.indexOf(t)){for(;s!==null;){var i=ai(s);if(i!==null&&Vf(i),i=Rl(t,e,n,r),i===null&&Fo(t,e,r,va,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Fo(t,e,r,null,n)}}var va=null;function Rl(t,e,n,r){if(va=null,t=Lu(r),t=In(t),t!==null)if(e=Jn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Lf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return va=t,null}function Kf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yy()){case Mu:return 1;case Uf:return 4;case ma:case Zy:return 16;case zf:return 536870912;default:return 16}default:return 16}}var un=null,zu=null,Xi=null;function Qf(){if(Xi)return Xi;var t,e=zu,n=e.length,r,s="value"in un?un.value:un.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Xi=s.slice(t,1<r?1-r:void 0)}function Yi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ki(){return!0}function yd(){return!1}function Ye(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ki:yd,this.isPropagationStopped=yd,this}return ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ki)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ki)},persist:function(){},isPersistent:ki}),e}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bu=Ye(Jr),ii=ne({},Jr,{view:0,detail:0}),hv=Ye(ii),To,Ro,os,Va=ne({},ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==os&&(os&&t.type==="mousemove"?(To=t.screenX-os.screenX,Ro=t.screenY-os.screenY):Ro=To=0,os=t),To)},movementY:function(t){return"movementY"in t?t.movementY:Ro}}),vd=Ye(Va),fv=ne({},Va,{dataTransfer:0}),pv=Ye(fv),mv=ne({},ii,{relatedTarget:0}),Ao=Ye(mv),gv=ne({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),yv=Ye(gv),vv=ne({},Jr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wv=Ye(vv),_v=ne({},Jr,{data:0}),wd=Ye(_v),xv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sv[t])?!!e[t]:!1}function Hu(){return bv}var Ev=ne({},ii,{key:function(t){if(t.key){var e=xv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hu,charCode:function(t){return t.type==="keypress"?Yi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jv=Ye(Ev),Cv=ne({},Va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_d=Ye(Cv),Pv=ne({},ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hu}),Nv=Ye(Pv),Tv=ne({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rv=Ye(Tv),Av=ne({},Va,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ov=Ye(Av),$v=[9,13,27,32],Vu=Vt&&"CompositionEvent"in window,js=null;Vt&&"documentMode"in document&&(js=document.documentMode);var Iv=Vt&&"TextEvent"in window&&!js,Xf=Vt&&(!Vu||js&&8<js&&11>=js),xd=" ",kd=!1;function Yf(t,e){switch(t){case"keyup":return $v.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pr=!1;function Lv(t,e){switch(t){case"compositionend":return Zf(e);case"keypress":return e.which!==32?null:(kd=!0,xd);case"textInput":return t=e.data,t===xd&&kd?null:t;default:return null}}function Mv(t,e){if(pr)return t==="compositionend"||!Vu&&Yf(t,e)?(t=Qf(),Xi=zu=un=null,pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xf&&e.locale!=="ko"?null:e.data;default:return null}}var Dv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Dv[t.type]:e==="textarea"}function ep(t,e,n,r){Rf(r),e=wa(e,"onChange"),0<e.length&&(n=new Bu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Cs=null,Hs=null;function Fv(t){dp(t,0)}function Wa(t){var e=yr(t);if(bf(e))return t}function Uv(t,e){if(t==="change")return e}var tp=!1;if(Vt){var Oo;if(Vt){var $o="oninput"in document;if(!$o){var bd=document.createElement("div");bd.setAttribute("oninput","return;"),$o=typeof bd.oninput=="function"}Oo=$o}else Oo=!1;tp=Oo&&(!document.documentMode||9<document.documentMode)}function Ed(){Cs&&(Cs.detachEvent("onpropertychange",np),Hs=Cs=null)}function np(t){if(t.propertyName==="value"&&Wa(Hs)){var e=[];ep(e,Hs,t,Lu(t)),If(Fv,e)}}function zv(t,e,n){t==="focusin"?(Ed(),Cs=e,Hs=n,Cs.attachEvent("onpropertychange",np)):t==="focusout"&&Ed()}function Bv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wa(Hs)}function Hv(t,e){if(t==="click")return Wa(e)}function Vv(t,e){if(t==="input"||t==="change")return Wa(e)}function Wv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _t=typeof Object.is=="function"?Object.is:Wv;function Vs(t,e){if(_t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!fl.call(e,s)||!_t(t[s],e[s]))return!1}return!0}function jd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cd(t,e){var n=jd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jd(n)}}function rp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sp(){for(var t=window,e=ha();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ha(t.document)}return e}function Wu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qv(t){var e=sp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rp(n.ownerDocument.documentElement,n)){if(r!==null&&Wu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Cd(n,i);var a=Cd(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jv=Vt&&"documentMode"in document&&11>=document.documentMode,mr=null,Al=null,Ps=null,Ol=!1;function Pd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ol||mr==null||mr!==ha(r)||(r=mr,"selectionStart"in r&&Wu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ps&&Vs(Ps,r)||(Ps=r,r=wa(Al,"onSelect"),0<r.length&&(e=new Bu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mr)))}function Si(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gr={animationend:Si("Animation","AnimationEnd"),animationiteration:Si("Animation","AnimationIteration"),animationstart:Si("Animation","AnimationStart"),transitionend:Si("Transition","TransitionEnd")},Io={},ip={};Vt&&(ip=document.createElement("div").style,"AnimationEvent"in window||(delete gr.animationend.animation,delete gr.animationiteration.animation,delete gr.animationstart.animation),"TransitionEvent"in window||delete gr.transitionend.transition);function qa(t){if(Io[t])return Io[t];if(!gr[t])return t;var e=gr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ip)return Io[t]=e[n];return t}var ap=qa("animationend"),op=qa("animationiteration"),lp=qa("animationstart"),up=qa("transitionend"),cp=new Map,Nd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(t,e){cp.set(t,e),qn(e,[t])}for(var Lo=0;Lo<Nd.length;Lo++){var Mo=Nd[Lo],Gv=Mo.toLowerCase(),Kv=Mo[0].toUpperCase()+Mo.slice(1);kn(Gv,"on"+Kv)}kn(ap,"onAnimationEnd");kn(op,"onAnimationIteration");kn(lp,"onAnimationStart");kn("dblclick","onDoubleClick");kn("focusin","onFocus");kn("focusout","onBlur");kn(up,"onTransitionEnd");Lr("onMouseEnter",["mouseout","mouseover"]);Lr("onMouseLeave",["mouseout","mouseover"]);Lr("onPointerEnter",["pointerout","pointerover"]);Lr("onPointerLeave",["pointerout","pointerover"]);qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qn("onBeforeInput",["compositionend","keypress","textInput","paste"]);qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ms));function Td(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Gy(r,e,void 0,t),t.currentTarget=null}function dp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Td(s,o,u),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Td(s,o,u),i=l}}}if(pa)throw t=Pl,pa=!1,Pl=null,t}function G(t,e){var n=e[Dl];n===void 0&&(n=e[Dl]=new Set);var r=t+"__bubble";n.has(r)||(hp(e,t,2,!1),n.add(r))}function Do(t,e,n){var r=0;e&&(r|=4),hp(n,t,r,e)}var bi="_reactListening"+Math.random().toString(36).slice(2);function Ws(t){if(!t[bi]){t[bi]=!0,wf.forEach(function(n){n!=="selectionchange"&&(Qv.has(n)||Do(n,!1,t),Do(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bi]||(e[bi]=!0,Do("selectionchange",!1,e))}}function hp(t,e,n,r){switch(Kf(e)){case 1:var s=cv;break;case 4:s=dv;break;default:s=Uu}n=s.bind(null,e,n,t),s=void 0,!Cl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Fo(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=In(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}If(function(){var u=i,d=Lu(n),h=[];e:{var p=cp.get(t);if(p!==void 0){var y=Bu,w=t;switch(t){case"keypress":if(Yi(n)===0)break e;case"keydown":case"keyup":y=jv;break;case"focusin":w="focus",y=Ao;break;case"focusout":w="blur",y=Ao;break;case"beforeblur":case"afterblur":y=Ao;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=vd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=pv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Nv;break;case ap:case op:case lp:y=yv;break;case up:y=Rv;break;case"scroll":y=hv;break;case"wheel":y=Ov;break;case"copy":case"cut":case"paste":y=wv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=_d}var v=(e&4)!==0,k=!v&&t==="scroll",m=v?p!==null?p+"Capture":null:p;v=[];for(var f=u,g;f!==null;){g=f;var _=g.stateNode;if(g.tag===5&&_!==null&&(g=_,m!==null&&(_=Fs(f,m),_!=null&&v.push(qs(f,_,g)))),k)break;f=f.return}0<v.length&&(p=new y(p,w,null,n,d),h.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==El&&(w=n.relatedTarget||n.fromElement)&&(In(w)||w[Wt]))break e;if((y||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=u,w=w?In(w):null,w!==null&&(k=Jn(w),w!==k||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=u),y!==w)){if(v=vd,_="onMouseLeave",m="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(v=_d,_="onPointerLeave",m="onPointerEnter",f="pointer"),k=y==null?p:yr(y),g=w==null?p:yr(w),p=new v(_,f+"leave",y,n,d),p.target=k,p.relatedTarget=g,_=null,In(d)===u&&(v=new v(m,f+"enter",w,n,d),v.target=g,v.relatedTarget=k,_=v),k=_,y&&w)t:{for(v=y,m=w,f=0,g=v;g;g=tr(g))f++;for(g=0,_=m;_;_=tr(_))g++;for(;0<f-g;)v=tr(v),f--;for(;0<g-f;)m=tr(m),g--;for(;f--;){if(v===m||m!==null&&v===m.alternate)break t;v=tr(v),m=tr(m)}v=null}else v=null;y!==null&&Rd(h,p,y,v,!1),w!==null&&k!==null&&Rd(h,k,w,v,!0)}}e:{if(p=u?yr(u):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var x=Uv;else if(Sd(p))if(tp)x=Vv;else{x=Bv;var S=zv}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(x=Hv);if(x&&(x=x(t,u))){ep(h,x,n,d);break e}S&&S(t,p,u),t==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&_l(p,"number",p.value)}switch(S=u?yr(u):window,t){case"focusin":(Sd(S)||S.contentEditable==="true")&&(mr=S,Al=u,Ps=null);break;case"focusout":Ps=Al=mr=null;break;case"mousedown":Ol=!0;break;case"contextmenu":case"mouseup":case"dragend":Ol=!1,Pd(h,n,d);break;case"selectionchange":if(Jv)break;case"keydown":case"keyup":Pd(h,n,d)}var b;if(Vu)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else pr?Yf(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Xf&&n.locale!=="ko"&&(pr||C!=="onCompositionStart"?C==="onCompositionEnd"&&pr&&(b=Qf()):(un=d,zu="value"in un?un.value:un.textContent,pr=!0)),S=wa(u,C),0<S.length&&(C=new wd(C,t,null,n,d),h.push({event:C,listeners:S}),b?C.data=b:(b=Zf(n),b!==null&&(C.data=b)))),(b=Iv?Lv(t,n):Mv(t,n))&&(u=wa(u,"onBeforeInput"),0<u.length&&(d=new wd("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=b))}dp(h,e)})}function qs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fs(t,n),i!=null&&r.unshift(qs(t,i,s)),i=Fs(t,e),i!=null&&r.push(qs(t,i,s))),t=t.return}return r}function tr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rd(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,s?(l=Fs(n,i),l!=null&&a.unshift(qs(n,l,o))):s||(l=Fs(n,i),l!=null&&a.push(qs(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Xv=/\r\n?/g,Yv=/\u0000|\uFFFD/g;function Ad(t){return(typeof t=="string"?t:""+t).replace(Xv,`
`).replace(Yv,"")}function Ei(t,e,n){if(e=Ad(e),Ad(t)!==e&&n)throw Error(E(425))}function _a(){}var $l=null,Il=null;function Ll(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ml=typeof setTimeout=="function"?setTimeout:void 0,Zv=typeof clearTimeout=="function"?clearTimeout:void 0,Od=typeof Promise=="function"?Promise:void 0,e0=typeof queueMicrotask=="function"?queueMicrotask:typeof Od<"u"?function(t){return Od.resolve(null).then(t).catch(t0)}:Ml;function t0(t){setTimeout(function(){throw t})}function Uo(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Bs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Bs(e)}function pn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $d(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),Nt="__reactFiber$"+Gr,Js="__reactProps$"+Gr,Wt="__reactContainer$"+Gr,Dl="__reactEvents$"+Gr,n0="__reactListeners$"+Gr,r0="__reactHandles$"+Gr;function In(t){var e=t[Nt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wt]||n[Nt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$d(t);t!==null;){if(n=t[Nt])return n;t=$d(t)}return e}t=n,n=t.parentNode}return null}function ai(t){return t=t[Nt]||t[Wt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function Ja(t){return t[Js]||null}var Fl=[],vr=-1;function Sn(t){return{current:t}}function K(t){0>vr||(t.current=Fl[vr],Fl[vr]=null,vr--)}function J(t,e){vr++,Fl[vr]=t.current,t.current=e}var _n={},Ce=Sn(_n),Fe=Sn(!1),zn=_n;function Mr(t,e){var n=t.type.contextTypes;if(!n)return _n;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ue(t){return t=t.childContextTypes,t!=null}function xa(){K(Fe),K(Ce)}function Id(t,e,n){if(Ce.current!==_n)throw Error(E(168));J(Ce,e),J(Fe,n)}function fp(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(E(108,zy(t)||"Unknown",s));return ne({},n,r)}function ka(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_n,zn=Ce.current,J(Ce,t),J(Fe,Fe.current),!0}function Ld(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=fp(t,e,zn),r.__reactInternalMemoizedMergedChildContext=t,K(Fe),K(Ce),J(Ce,t)):K(Fe),J(Fe,n)}var Ut=null,Ga=!1,zo=!1;function pp(t){Ut===null?Ut=[t]:Ut.push(t)}function s0(t){Ga=!0,pp(t)}function bn(){if(!zo&&Ut!==null){zo=!0;var t=0,e=H;try{var n=Ut;for(H=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ut=null,Ga=!1}catch(s){throw Ut!==null&&(Ut=Ut.slice(t+1)),Ff(Mu,bn),s}finally{H=e,zo=!1}}return null}var wr=[],_r=0,Sa=null,ba=0,tt=[],nt=0,Bn=null,zt=1,Bt="";function Tn(t,e){wr[_r++]=ba,wr[_r++]=Sa,Sa=t,ba=e}function mp(t,e,n){tt[nt++]=zt,tt[nt++]=Bt,tt[nt++]=Bn,Bn=t;var r=zt;t=Bt;var s=32-vt(r)-1;r&=~(1<<s),n+=1;var i=32-vt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,zt=1<<32-vt(e)+s|n<<s|r,Bt=i+t}else zt=1<<i|n<<s|r,Bt=t}function qu(t){t.return!==null&&(Tn(t,1),mp(t,1,0))}function Ju(t){for(;t===Sa;)Sa=wr[--_r],wr[_r]=null,ba=wr[--_r],wr[_r]=null;for(;t===Bn;)Bn=tt[--nt],tt[nt]=null,Bt=tt[--nt],tt[nt]=null,zt=tt[--nt],tt[nt]=null}var Ke=null,Ge=null,X=!1,gt=null;function gp(t,e){var n=rt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Md(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ke=t,Ge=pn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ke=t,Ge=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bn!==null?{id:zt,overflow:Bt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ke=t,Ge=null,!0):!1;default:return!1}}function Ul(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zl(t){if(X){var e=Ge;if(e){var n=e;if(!Md(t,e)){if(Ul(t))throw Error(E(418));e=pn(n.nextSibling);var r=Ke;e&&Md(t,e)?gp(r,n):(t.flags=t.flags&-4097|2,X=!1,Ke=t)}}else{if(Ul(t))throw Error(E(418));t.flags=t.flags&-4097|2,X=!1,Ke=t}}}function Dd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ke=t}function ji(t){if(t!==Ke)return!1;if(!X)return Dd(t),X=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ll(t.type,t.memoizedProps)),e&&(e=Ge)){if(Ul(t))throw yp(),Error(E(418));for(;e;)gp(t,e),e=pn(e.nextSibling)}if(Dd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ge=pn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ge=null}}else Ge=Ke?pn(t.stateNode.nextSibling):null;return!0}function yp(){for(var t=Ge;t;)t=pn(t.nextSibling)}function Dr(){Ge=Ke=null,X=!1}function Gu(t){gt===null?gt=[t]:gt.push(t)}var i0=Gt.ReactCurrentBatchConfig;function ls(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function Ci(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Fd(t){var e=t._init;return e(t._payload)}function vp(t){function e(m,f){if(t){var g=m.deletions;g===null?(m.deletions=[f],m.flags|=16):g.push(f)}}function n(m,f){if(!t)return null;for(;f!==null;)e(m,f),f=f.sibling;return null}function r(m,f){for(m=new Map;f!==null;)f.key!==null?m.set(f.key,f):m.set(f.index,f),f=f.sibling;return m}function s(m,f){return m=vn(m,f),m.index=0,m.sibling=null,m}function i(m,f,g){return m.index=g,t?(g=m.alternate,g!==null?(g=g.index,g<f?(m.flags|=2,f):g):(m.flags|=2,f)):(m.flags|=1048576,f)}function a(m){return t&&m.alternate===null&&(m.flags|=2),m}function o(m,f,g,_){return f===null||f.tag!==6?(f=Go(g,m.mode,_),f.return=m,f):(f=s(f,g),f.return=m,f)}function l(m,f,g,_){var x=g.type;return x===fr?d(m,f,g.props.children,_,g.key):f!==null&&(f.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===nn&&Fd(x)===f.type)?(_=s(f,g.props),_.ref=ls(m,f,g),_.return=m,_):(_=ia(g.type,g.key,g.props,null,m.mode,_),_.ref=ls(m,f,g),_.return=m,_)}function u(m,f,g,_){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=Ko(g,m.mode,_),f.return=m,f):(f=s(f,g.children||[]),f.return=m,f)}function d(m,f,g,_,x){return f===null||f.tag!==7?(f=Un(g,m.mode,_,x),f.return=m,f):(f=s(f,g),f.return=m,f)}function h(m,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Go(""+f,m.mode,g),f.return=m,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case gi:return g=ia(f.type,f.key,f.props,null,m.mode,g),g.ref=ls(m,null,f),g.return=m,g;case hr:return f=Ko(f,m.mode,g),f.return=m,f;case nn:var _=f._init;return h(m,_(f._payload),g)}if(fs(f)||rs(f))return f=Un(f,m.mode,g,null),f.return=m,f;Ci(m,f)}return null}function p(m,f,g,_){var x=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return x!==null?null:o(m,f,""+g,_);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case gi:return g.key===x?l(m,f,g,_):null;case hr:return g.key===x?u(m,f,g,_):null;case nn:return x=g._init,p(m,f,x(g._payload),_)}if(fs(g)||rs(g))return x!==null?null:d(m,f,g,_,null);Ci(m,g)}return null}function y(m,f,g,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(g)||null,o(f,m,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case gi:return m=m.get(_.key===null?g:_.key)||null,l(f,m,_,x);case hr:return m=m.get(_.key===null?g:_.key)||null,u(f,m,_,x);case nn:var S=_._init;return y(m,f,g,S(_._payload),x)}if(fs(_)||rs(_))return m=m.get(g)||null,d(f,m,_,x,null);Ci(f,_)}return null}function w(m,f,g,_){for(var x=null,S=null,b=f,C=f=0,A=null;b!==null&&C<g.length;C++){b.index>C?(A=b,b=null):A=b.sibling;var T=p(m,b,g[C],_);if(T===null){b===null&&(b=A);break}t&&b&&T.alternate===null&&e(m,b),f=i(T,f,C),S===null?x=T:S.sibling=T,S=T,b=A}if(C===g.length)return n(m,b),X&&Tn(m,C),x;if(b===null){for(;C<g.length;C++)b=h(m,g[C],_),b!==null&&(f=i(b,f,C),S===null?x=b:S.sibling=b,S=b);return X&&Tn(m,C),x}for(b=r(m,b);C<g.length;C++)A=y(b,m,C,g[C],_),A!==null&&(t&&A.alternate!==null&&b.delete(A.key===null?C:A.key),f=i(A,f,C),S===null?x=A:S.sibling=A,S=A);return t&&b.forEach(function(I){return e(m,I)}),X&&Tn(m,C),x}function v(m,f,g,_){var x=rs(g);if(typeof x!="function")throw Error(E(150));if(g=x.call(g),g==null)throw Error(E(151));for(var S=x=null,b=f,C=f=0,A=null,T=g.next();b!==null&&!T.done;C++,T=g.next()){b.index>C?(A=b,b=null):A=b.sibling;var I=p(m,b,T.value,_);if(I===null){b===null&&(b=A);break}t&&b&&I.alternate===null&&e(m,b),f=i(I,f,C),S===null?x=I:S.sibling=I,S=I,b=A}if(T.done)return n(m,b),X&&Tn(m,C),x;if(b===null){for(;!T.done;C++,T=g.next())T=h(m,T.value,_),T!==null&&(f=i(T,f,C),S===null?x=T:S.sibling=T,S=T);return X&&Tn(m,C),x}for(b=r(m,b);!T.done;C++,T=g.next())T=y(b,m,C,T.value,_),T!==null&&(t&&T.alternate!==null&&b.delete(T.key===null?C:T.key),f=i(T,f,C),S===null?x=T:S.sibling=T,S=T);return t&&b.forEach(function(Ae){return e(m,Ae)}),X&&Tn(m,C),x}function k(m,f,g,_){if(typeof g=="object"&&g!==null&&g.type===fr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case gi:e:{for(var x=g.key,S=f;S!==null;){if(S.key===x){if(x=g.type,x===fr){if(S.tag===7){n(m,S.sibling),f=s(S,g.props.children),f.return=m,m=f;break e}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===nn&&Fd(x)===S.type){n(m,S.sibling),f=s(S,g.props),f.ref=ls(m,S,g),f.return=m,m=f;break e}n(m,S);break}else e(m,S);S=S.sibling}g.type===fr?(f=Un(g.props.children,m.mode,_,g.key),f.return=m,m=f):(_=ia(g.type,g.key,g.props,null,m.mode,_),_.ref=ls(m,f,g),_.return=m,m=_)}return a(m);case hr:e:{for(S=g.key;f!==null;){if(f.key===S)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(m,f.sibling),f=s(f,g.children||[]),f.return=m,m=f;break e}else{n(m,f);break}else e(m,f);f=f.sibling}f=Ko(g,m.mode,_),f.return=m,m=f}return a(m);case nn:return S=g._init,k(m,f,S(g._payload),_)}if(fs(g))return w(m,f,g,_);if(rs(g))return v(m,f,g,_);Ci(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(m,f.sibling),f=s(f,g),f.return=m,m=f):(n(m,f),f=Go(g,m.mode,_),f.return=m,m=f),a(m)):n(m,f)}return k}var Fr=vp(!0),wp=vp(!1),Ea=Sn(null),ja=null,xr=null,Ku=null;function Qu(){Ku=xr=ja=null}function Xu(t){var e=Ea.current;K(Ea),t._currentValue=e}function Bl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Nr(t,e){ja=t,Ku=xr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(De=!0),t.firstContext=null)}function ot(t){var e=t._currentValue;if(Ku!==t)if(t={context:t,memoizedValue:e,next:null},xr===null){if(ja===null)throw Error(E(308));xr=t,ja.dependencies={lanes:0,firstContext:t}}else xr=xr.next=t;return e}var Ln=null;function Yu(t){Ln===null?Ln=[t]:Ln.push(t)}function _p(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Yu(e)):(n.next=s.next,s.next=n),e.interleaved=n,qt(t,r)}function qt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var rn=!1;function Zu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ht(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,B&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,qt(t,n)}return s=r.interleaved,s===null?(e.next=e,Yu(r)):(e.next=s.next,s.next=e),r.interleaved=e,qt(t,n)}function Zi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Du(t,n)}}function Ud(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ca(t,e,n,r){var s=t.updateQueue;rn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?i=u:a.next=u,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;a=0,d=u=l=null,o=i;do{var p=o.lane,y=o.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=t,v=o;switch(p=e,y=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){h=w.call(y,h,p);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,p=typeof w=="function"?w.call(y,h,p):w,p==null)break e;h=ne({},h,p);break e;case 2:rn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[o]:p.push(o))}else y={eventTime:y,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=y,l=h):d=d.next=y,a|=p;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;p=o,o=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Vn|=a,t.lanes=a,t.memoizedState=h}}function zd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(E(191,s));s.call(r)}}}var oi={},At=Sn(oi),Gs=Sn(oi),Ks=Sn(oi);function Mn(t){if(t===oi)throw Error(E(174));return t}function ec(t,e){switch(J(Ks,e),J(Gs,t),J(At,oi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kl(e,t)}K(At),J(At,e)}function Ur(){K(At),K(Gs),K(Ks)}function kp(t){Mn(Ks.current);var e=Mn(At.current),n=kl(e,t.type);e!==n&&(J(Gs,t),J(At,n))}function tc(t){Gs.current===t&&(K(At),K(Gs))}var ee=Sn(0);function Pa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bo=[];function nc(){for(var t=0;t<Bo.length;t++)Bo[t]._workInProgressVersionPrimary=null;Bo.length=0}var ea=Gt.ReactCurrentDispatcher,Ho=Gt.ReactCurrentBatchConfig,Hn=0,te=null,ue=null,fe=null,Na=!1,Ns=!1,Qs=0,a0=0;function Se(){throw Error(E(321))}function rc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_t(t[n],e[n]))return!1;return!0}function sc(t,e,n,r,s,i){if(Hn=i,te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ea.current=t===null||t.memoizedState===null?c0:d0,t=n(r,s),Ns){i=0;do{if(Ns=!1,Qs=0,25<=i)throw Error(E(301));i+=1,fe=ue=null,e.updateQueue=null,ea.current=h0,t=n(r,s)}while(Ns)}if(ea.current=Ta,e=ue!==null&&ue.next!==null,Hn=0,fe=ue=te=null,Na=!1,e)throw Error(E(300));return t}function ic(){var t=Qs!==0;return Qs=0,t}function Et(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?te.memoizedState=fe=t:fe=fe.next=t,fe}function lt(){if(ue===null){var t=te.alternate;t=t!==null?t.memoizedState:null}else t=ue.next;var e=fe===null?te.memoizedState:fe.next;if(e!==null)fe=e,ue=t;else{if(t===null)throw Error(E(310));ue=t,t={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},fe===null?te.memoizedState=fe=t:fe=fe.next=t}return fe}function Xs(t,e){return typeof e=="function"?e(t):e}function Vo(t){var e=lt(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=ue,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,u=i;do{var d=u.lane;if((Hn&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=r):l=l.next=h,te.lanes|=d,Vn|=d}u=u.next}while(u!==null&&u!==i);l===null?a=r:l.next=o,_t(r,e.memoizedState)||(De=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,te.lanes|=i,Vn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wo(t){var e=lt(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);_t(i,e.memoizedState)||(De=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Sp(){}function bp(t,e){var n=te,r=lt(),s=e(),i=!_t(r.memoizedState,s);if(i&&(r.memoizedState=s,De=!0),r=r.queue,ac(Cp.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||fe!==null&&fe.memoizedState.tag&1){if(n.flags|=2048,Ys(9,jp.bind(null,n,r,s,e),void 0,null),pe===null)throw Error(E(349));Hn&30||Ep(n,e,s)}return s}function Ep(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function jp(t,e,n,r){e.value=n,e.getSnapshot=r,Pp(e)&&Np(t)}function Cp(t,e,n){return n(function(){Pp(e)&&Np(t)})}function Pp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_t(t,n)}catch{return!0}}function Np(t){var e=qt(t,1);e!==null&&wt(e,t,1,-1)}function Bd(t){var e=Et();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:t},e.queue=t,t=t.dispatch=u0.bind(null,te,t),[e.memoizedState,t]}function Ys(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Tp(){return lt().memoizedState}function ta(t,e,n,r){var s=Et();te.flags|=t,s.memoizedState=Ys(1|e,n,void 0,r===void 0?null:r)}function Ka(t,e,n,r){var s=lt();r=r===void 0?null:r;var i=void 0;if(ue!==null){var a=ue.memoizedState;if(i=a.destroy,r!==null&&rc(r,a.deps)){s.memoizedState=Ys(e,n,i,r);return}}te.flags|=t,s.memoizedState=Ys(1|e,n,i,r)}function Hd(t,e){return ta(8390656,8,t,e)}function ac(t,e){return Ka(2048,8,t,e)}function Rp(t,e){return Ka(4,2,t,e)}function Ap(t,e){return Ka(4,4,t,e)}function Op(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $p(t,e,n){return n=n!=null?n.concat([t]):null,Ka(4,4,Op.bind(null,e,t),n)}function oc(){}function Ip(t,e){var n=lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Lp(t,e){var n=lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Mp(t,e,n){return Hn&21?(_t(n,e)||(n=Bf(),te.lanes|=n,Vn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,De=!0),t.memoizedState=n)}function o0(t,e){var n=H;H=n!==0&&4>n?n:4,t(!0);var r=Ho.transition;Ho.transition={};try{t(!1),e()}finally{H=n,Ho.transition=r}}function Dp(){return lt().memoizedState}function l0(t,e,n){var r=yn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fp(t))Up(e,n);else if(n=_p(t,e,n,r),n!==null){var s=Ne();wt(n,t,r,s),zp(n,e,r)}}function u0(t,e,n){var r=yn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fp(t))Up(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,_t(o,a)){var l=e.interleaved;l===null?(s.next=s,Yu(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=_p(t,e,s,r),n!==null&&(s=Ne(),wt(n,t,r,s),zp(n,e,r))}}function Fp(t){var e=t.alternate;return t===te||e!==null&&e===te}function Up(t,e){Ns=Na=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Du(t,n)}}var Ta={readContext:ot,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useInsertionEffect:Se,useLayoutEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useMutableSource:Se,useSyncExternalStore:Se,useId:Se,unstable_isNewReconciler:!1},c0={readContext:ot,useCallback:function(t,e){return Et().memoizedState=[t,e===void 0?null:e],t},useContext:ot,useEffect:Hd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ta(4194308,4,Op.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ta(4194308,4,t,e)},useInsertionEffect:function(t,e){return ta(4,2,t,e)},useMemo:function(t,e){var n=Et();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Et();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=l0.bind(null,te,t),[r.memoizedState,t]},useRef:function(t){var e=Et();return t={current:t},e.memoizedState=t},useState:Bd,useDebugValue:oc,useDeferredValue:function(t){return Et().memoizedState=t},useTransition:function(){var t=Bd(!1),e=t[0];return t=o0.bind(null,t[1]),Et().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=te,s=Et();if(X){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),pe===null)throw Error(E(349));Hn&30||Ep(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Hd(Cp.bind(null,r,i,t),[t]),r.flags|=2048,Ys(9,jp.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Et(),e=pe.identifierPrefix;if(X){var n=Bt,r=zt;n=(r&~(1<<32-vt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=a0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},d0={readContext:ot,useCallback:Ip,useContext:ot,useEffect:ac,useImperativeHandle:$p,useInsertionEffect:Rp,useLayoutEffect:Ap,useMemo:Lp,useReducer:Vo,useRef:Tp,useState:function(){return Vo(Xs)},useDebugValue:oc,useDeferredValue:function(t){var e=lt();return Mp(e,ue.memoizedState,t)},useTransition:function(){var t=Vo(Xs)[0],e=lt().memoizedState;return[t,e]},useMutableSource:Sp,useSyncExternalStore:bp,useId:Dp,unstable_isNewReconciler:!1},h0={readContext:ot,useCallback:Ip,useContext:ot,useEffect:ac,useImperativeHandle:$p,useInsertionEffect:Rp,useLayoutEffect:Ap,useMemo:Lp,useReducer:Wo,useRef:Tp,useState:function(){return Wo(Xs)},useDebugValue:oc,useDeferredValue:function(t){var e=lt();return ue===null?e.memoizedState=t:Mp(e,ue.memoizedState,t)},useTransition:function(){var t=Wo(Xs)[0],e=lt().memoizedState;return[t,e]},useMutableSource:Sp,useSyncExternalStore:bp,useId:Dp,unstable_isNewReconciler:!1};function dt(t,e){if(t&&t.defaultProps){e=ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qa={isMounted:function(t){return(t=t._reactInternals)?Jn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ne(),s=yn(t),i=Ht(r,s);i.payload=e,n!=null&&(i.callback=n),e=mn(t,i,s),e!==null&&(wt(e,t,s,r),Zi(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ne(),s=yn(t),i=Ht(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=mn(t,i,s),e!==null&&(wt(e,t,s,r),Zi(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ne(),r=yn(t),s=Ht(n,r);s.tag=2,e!=null&&(s.callback=e),e=mn(t,s,r),e!==null&&(wt(e,t,r,n),Zi(e,t,r))}};function Vd(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Vs(n,r)||!Vs(s,i):!0}function Bp(t,e,n){var r=!1,s=_n,i=e.contextType;return typeof i=="object"&&i!==null?i=ot(i):(s=Ue(e)?zn:Ce.current,r=e.contextTypes,i=(r=r!=null)?Mr(t,s):_n),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Wd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Qa.enqueueReplaceState(e,e.state,null)}function Vl(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Zu(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ot(i):(i=Ue(e)?zn:Ce.current,s.context=Mr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Hl(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Qa.enqueueReplaceState(s,s.state,null),Ca(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function zr(t,e){try{var n="",r=e;do n+=Uy(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function qo(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var f0=typeof WeakMap=="function"?WeakMap:Map;function Hp(t,e,n){n=Ht(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Aa||(Aa=!0,tu=r),Wl(t,e)},n}function Vp(t,e,n){n=Ht(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Wl(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Wl(t,e),typeof r!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function qd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new f0;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=C0.bind(null,t,e,n),e.then(t,t))}function Jd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gd(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ht(-1,1),e.tag=2,mn(n,e,1))),n.lanes|=1),t)}var p0=Gt.ReactCurrentOwner,De=!1;function Pe(t,e,n,r){e.child=t===null?wp(e,null,n,r):Fr(e,t.child,n,r)}function Kd(t,e,n,r,s){n=n.render;var i=e.ref;return Nr(e,s),r=sc(t,e,n,r,i,s),n=ic(),t!==null&&!De?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Jt(t,e,s)):(X&&n&&qu(e),e.flags|=1,Pe(t,e,r,s),e.child)}function Qd(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!mc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Wp(t,e,i,r,s)):(t=ia(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Vs,n(a,r)&&t.ref===e.ref)return Jt(t,e,s)}return e.flags|=1,t=vn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Wp(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Vs(i,r)&&t.ref===e.ref)if(De=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(De=!0);else return e.lanes=t.lanes,Jt(t,e,s)}return ql(t,e,n,r,s)}function qp(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(Sr,Je),Je|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,J(Sr,Je),Je|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,J(Sr,Je),Je|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,J(Sr,Je),Je|=r;return Pe(t,e,s,n),e.child}function Jp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ql(t,e,n,r,s){var i=Ue(n)?zn:Ce.current;return i=Mr(e,i),Nr(e,s),n=sc(t,e,n,r,i,s),r=ic(),t!==null&&!De?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Jt(t,e,s)):(X&&r&&qu(e),e.flags|=1,Pe(t,e,n,s),e.child)}function Xd(t,e,n,r,s){if(Ue(n)){var i=!0;ka(e)}else i=!1;if(Nr(e,s),e.stateNode===null)na(t,e),Bp(e,n,r),Vl(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=ot(u):(u=Ue(n)?zn:Ce.current,u=Mr(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&Wd(e,a,r,u),rn=!1;var p=e.memoizedState;a.state=p,Ca(e,r,a,s),l=e.memoizedState,o!==r||p!==l||Fe.current||rn?(typeof d=="function"&&(Hl(e,n,d,r),l=e.memoizedState),(o=rn||Vd(e,n,o,r,p,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,xp(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:dt(e.type,o),a.props=u,h=e.pendingProps,p=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=ot(l):(l=Ue(n)?zn:Ce.current,l=Mr(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||p!==l)&&Wd(e,a,r,l),rn=!1,p=e.memoizedState,a.state=p,Ca(e,r,a,s);var w=e.memoizedState;o!==h||p!==w||Fe.current||rn?(typeof y=="function"&&(Hl(e,n,y,r),w=e.memoizedState),(u=rn||Vd(e,n,u,r,p,w,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),a.props=r,a.state=w,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Jl(t,e,n,r,i,s)}function Jl(t,e,n,r,s,i){Jp(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Ld(e,n,!1),Jt(t,e,i);r=e.stateNode,p0.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Fr(e,t.child,null,i),e.child=Fr(e,null,o,i)):Pe(t,e,o,i),e.memoizedState=r.state,s&&Ld(e,n,!0),e.child}function Gp(t){var e=t.stateNode;e.pendingContext?Id(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Id(t,e.context,!1),ec(t,e.containerInfo)}function Yd(t,e,n,r,s){return Dr(),Gu(s),e.flags|=256,Pe(t,e,n,r),e.child}var Gl={dehydrated:null,treeContext:null,retryLane:0};function Kl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kp(t,e,n){var r=e.pendingProps,s=ee.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),J(ee,s&1),t===null)return zl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Za(a,r,0,null),t=Un(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Kl(n),e.memoizedState=Gl,t):lc(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return m0(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=vn(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=vn(o,i):(i=Un(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Kl(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Gl,r}return i=t.child,t=i.sibling,r=vn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lc(t,e){return e=Za({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pi(t,e,n,r){return r!==null&&Gu(r),Fr(e,t.child,null,n),t=lc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function m0(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=qo(Error(E(422))),Pi(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Za({mode:"visible",children:r.children},s,0,null),i=Un(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Fr(e,t.child,null,a),e.child.memoizedState=Kl(a),e.memoizedState=Gl,i);if(!(e.mode&1))return Pi(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(E(419)),r=qo(i,r,void 0),Pi(t,e,a,r)}if(o=(a&t.childLanes)!==0,De||o){if(r=pe,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qt(t,s),wt(r,t,s,-1))}return pc(),r=qo(Error(E(421))),Pi(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=P0.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ge=pn(s.nextSibling),Ke=e,X=!0,gt=null,t!==null&&(tt[nt++]=zt,tt[nt++]=Bt,tt[nt++]=Bn,zt=t.id,Bt=t.overflow,Bn=e),e=lc(e,r.children),e.flags|=4096,e)}function Zd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bl(t.return,e,n)}function Jo(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Qp(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Pe(t,e,r.children,n),r=ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zd(t,n,e);else if(t.tag===19)Zd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(J(ee,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Pa(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Jo(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Pa(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Jo(e,!0,n,null,i);break;case"together":Jo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function na(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=vn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function g0(t,e,n){switch(e.tag){case 3:Gp(e),Dr();break;case 5:kp(e);break;case 1:Ue(e.type)&&ka(e);break;case 4:ec(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;J(Ea,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(J(ee,ee.current&1),e.flags|=128,null):n&e.child.childLanes?Kp(t,e,n):(J(ee,ee.current&1),t=Jt(t,e,n),t!==null?t.sibling:null);J(ee,ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Qp(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),J(ee,ee.current),r)break;return null;case 22:case 23:return e.lanes=0,qp(t,e,n)}return Jt(t,e,n)}var Xp,Ql,Yp,Zp;Xp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ql=function(){};Yp=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Mn(At.current);var i=null;switch(n){case"input":s=vl(t,s),r=vl(t,r),i=[];break;case"select":s=ne({},s,{value:void 0}),r=ne({},r,{value:void 0}),i=[];break;case"textarea":s=xl(t,s),r=xl(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_a)}Sl(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ms.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(o=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ms.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&G("scroll",t),i||o===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Zp=function(t,e,n,r){n!==r&&(e.flags|=4)};function us(t,e){if(!X)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function be(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function y0(t,e,n){var r=e.pendingProps;switch(Ju(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return be(e),null;case 1:return Ue(e.type)&&xa(),be(e),null;case 3:return r=e.stateNode,Ur(),K(Fe),K(Ce),nc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ji(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gt!==null&&(su(gt),gt=null))),Ql(t,e),be(e),null;case 5:tc(e);var s=Mn(Ks.current);if(n=e.type,t!==null&&e.stateNode!=null)Yp(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return be(e),null}if(t=Mn(At.current),ji(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Nt]=e,r[Js]=i,t=(e.mode&1)!==0,n){case"dialog":G("cancel",r),G("close",r);break;case"iframe":case"object":case"embed":G("load",r);break;case"video":case"audio":for(s=0;s<ms.length;s++)G(ms[s],r);break;case"source":G("error",r);break;case"img":case"image":case"link":G("error",r),G("load",r);break;case"details":G("toggle",r);break;case"input":ld(r,i),G("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},G("invalid",r);break;case"textarea":cd(r,i),G("invalid",r)}Sl(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Ei(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Ei(r.textContent,o,t),s=["children",""+o]):Ms.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&G("scroll",r)}switch(n){case"input":yi(r),ud(r,i,!0);break;case"textarea":yi(r),dd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=_a)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Nt]=e,t[Js]=r,Xp(t,e,!1,!1),e.stateNode=t;e:{switch(a=bl(n,r),n){case"dialog":G("cancel",t),G("close",t),s=r;break;case"iframe":case"object":case"embed":G("load",t),s=r;break;case"video":case"audio":for(s=0;s<ms.length;s++)G(ms[s],t);s=r;break;case"source":G("error",t),s=r;break;case"img":case"image":case"link":G("error",t),G("load",t),s=r;break;case"details":G("toggle",t),s=r;break;case"input":ld(t,r),s=vl(t,r),G("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ne({},r,{value:void 0}),G("invalid",t);break;case"textarea":cd(t,r),s=xl(t,r),G("invalid",t);break;default:s=r}Sl(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?Tf(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Pf(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ds(t,l):typeof l=="number"&&Ds(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ms.hasOwnProperty(i)?l!=null&&i==="onScroll"&&G("scroll",t):l!=null&&Au(t,i,l,a))}switch(n){case"input":yi(t),ud(t,r,!1);break;case"textarea":yi(t),dd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Er(t,!!r.multiple,i,!1):r.defaultValue!=null&&Er(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=_a)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return be(e),null;case 6:if(t&&e.stateNode!=null)Zp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=Mn(Ks.current),Mn(At.current),ji(e)){if(r=e.stateNode,n=e.memoizedProps,r[Nt]=e,(i=r.nodeValue!==n)&&(t=Ke,t!==null))switch(t.tag){case 3:Ei(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ei(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nt]=e,e.stateNode=r}return be(e),null;case 13:if(K(ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(X&&Ge!==null&&e.mode&1&&!(e.flags&128))yp(),Dr(),e.flags|=98560,i=!1;else if(i=ji(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(E(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));i[Nt]=e}else Dr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;be(e),i=!1}else gt!==null&&(su(gt),gt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ee.current&1?ce===0&&(ce=3):pc())),e.updateQueue!==null&&(e.flags|=4),be(e),null);case 4:return Ur(),Ql(t,e),t===null&&Ws(e.stateNode.containerInfo),be(e),null;case 10:return Xu(e.type._context),be(e),null;case 17:return Ue(e.type)&&xa(),be(e),null;case 19:if(K(ee),i=e.memoizedState,i===null)return be(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)us(i,!1);else{if(ce!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Pa(t),a!==null){for(e.flags|=128,us(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return J(ee,ee.current&1|2),e.child}t=t.sibling}i.tail!==null&&se()>Br&&(e.flags|=128,r=!0,us(i,!1),e.lanes=4194304)}else{if(!r)if(t=Pa(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),us(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!X)return be(e),null}else 2*se()-i.renderingStartTime>Br&&n!==1073741824&&(e.flags|=128,r=!0,us(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=se(),e.sibling=null,n=ee.current,J(ee,r?n&1|2:n&1),e):(be(e),null);case 22:case 23:return fc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Je&1073741824&&(be(e),e.subtreeFlags&6&&(e.flags|=8192)):be(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function v0(t,e){switch(Ju(e),e.tag){case 1:return Ue(e.type)&&xa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ur(),K(Fe),K(Ce),nc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tc(e),null;case 13:if(K(ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));Dr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return K(ee),null;case 4:return Ur(),null;case 10:return Xu(e.type._context),null;case 22:case 23:return fc(),null;case 24:return null;default:return null}}var Ni=!1,je=!1,w0=typeof WeakSet=="function"?WeakSet:Set,N=null;function kr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){re(t,e,r)}else n.current=null}function Xl(t,e,n){try{n()}catch(r){re(t,e,r)}}var eh=!1;function _0(t,e){if($l=ya,t=sp(),Wu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,d=0,h=t,p=null;t:for(;;){for(var y;h!==n||s!==0&&h.nodeType!==3||(o=a+s),h!==i||r!==0&&h.nodeType!==3||(l=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(y=h.firstChild)!==null;)p=h,h=y;for(;;){if(h===t)break t;if(p===n&&++u===s&&(o=a),p===i&&++d===r&&(l=a),(y=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=y}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Il={focusedElem:t,selectionRange:n},ya=!1,N=e;N!==null;)if(e=N,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,N=t;else for(;N!==null;){e=N;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,k=w.memoizedState,m=e.stateNode,f=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:dt(e.type,v),k);m.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(_){re(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,N=t;break}N=e.return}return w=eh,eh=!1,w}function Ts(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Xl(e,n,i)}s=s.next}while(s!==r)}}function Xa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Yl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function em(t){var e=t.alternate;e!==null&&(t.alternate=null,em(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nt],delete e[Js],delete e[Dl],delete e[n0],delete e[r0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tm(t){return t.tag===5||t.tag===3||t.tag===4}function th(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_a));else if(r!==4&&(t=t.child,t!==null))for(Zl(t,e,n),t=t.sibling;t!==null;)Zl(t,e,n),t=t.sibling}function eu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(eu(t,e,n),t=t.sibling;t!==null;)eu(t,e,n),t=t.sibling}var ve=null,ft=!1;function Qt(t,e,n){for(n=n.child;n!==null;)nm(t,e,n),n=n.sibling}function nm(t,e,n){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(Ha,n)}catch{}switch(n.tag){case 5:je||kr(n,e);case 6:var r=ve,s=ft;ve=null,Qt(t,e,n),ve=r,ft=s,ve!==null&&(ft?(t=ve,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ve.removeChild(n.stateNode));break;case 18:ve!==null&&(ft?(t=ve,n=n.stateNode,t.nodeType===8?Uo(t.parentNode,n):t.nodeType===1&&Uo(t,n),Bs(t)):Uo(ve,n.stateNode));break;case 4:r=ve,s=ft,ve=n.stateNode.containerInfo,ft=!0,Qt(t,e,n),ve=r,ft=s;break;case 0:case 11:case 14:case 15:if(!je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Xl(n,e,a),s=s.next}while(s!==r)}Qt(t,e,n);break;case 1:if(!je&&(kr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){re(n,e,o)}Qt(t,e,n);break;case 21:Qt(t,e,n);break;case 22:n.mode&1?(je=(r=je)||n.memoizedState!==null,Qt(t,e,n),je=r):Qt(t,e,n);break;default:Qt(t,e,n)}}function nh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new w0),e.forEach(function(r){var s=N0.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ut(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ve=o.stateNode,ft=!1;break e;case 3:ve=o.stateNode.containerInfo,ft=!0;break e;case 4:ve=o.stateNode.containerInfo,ft=!0;break e}o=o.return}if(ve===null)throw Error(E(160));nm(i,a,s),ve=null,ft=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){re(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rm(e,t),e=e.sibling}function rm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ut(e,t),kt(t),r&4){try{Ts(3,t,t.return),Xa(3,t)}catch(v){re(t,t.return,v)}try{Ts(5,t,t.return)}catch(v){re(t,t.return,v)}}break;case 1:ut(e,t),kt(t),r&512&&n!==null&&kr(n,n.return);break;case 5:if(ut(e,t),kt(t),r&512&&n!==null&&kr(n,n.return),t.flags&32){var s=t.stateNode;try{Ds(s,"")}catch(v){re(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Ef(s,i),bl(o,a);var u=bl(o,i);for(a=0;a<l.length;a+=2){var d=l[a],h=l[a+1];d==="style"?Tf(s,h):d==="dangerouslySetInnerHTML"?Pf(s,h):d==="children"?Ds(s,h):Au(s,d,h,u)}switch(o){case"input":wl(s,i);break;case"textarea":jf(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Er(s,!!i.multiple,y,!1):p!==!!i.multiple&&(i.defaultValue!=null?Er(s,!!i.multiple,i.defaultValue,!0):Er(s,!!i.multiple,i.multiple?[]:"",!1))}s[Js]=i}catch(v){re(t,t.return,v)}}break;case 6:if(ut(e,t),kt(t),r&4){if(t.stateNode===null)throw Error(E(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){re(t,t.return,v)}}break;case 3:if(ut(e,t),kt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bs(e.containerInfo)}catch(v){re(t,t.return,v)}break;case 4:ut(e,t),kt(t);break;case 13:ut(e,t),kt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dc=se())),r&4&&nh(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(je=(u=je)||d,ut(e,t),je=u):ut(e,t),kt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(N=t,d=t.child;d!==null;){for(h=N=d;N!==null;){switch(p=N,y=p.child,p.tag){case 0:case 11:case 14:case 15:Ts(4,p,p.return);break;case 1:kr(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(v){re(r,n,v)}}break;case 5:kr(p,p.return);break;case 22:if(p.memoizedState!==null){sh(h);continue}}y!==null?(y.return=p,N=y):sh(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Nf("display",a))}catch(v){re(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){re(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ut(e,t),kt(t),r&4&&nh(t);break;case 21:break;default:ut(e,t),kt(t)}}function kt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tm(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ds(s,""),r.flags&=-33);var i=th(t);eu(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=th(t);Zl(t,o,a);break;default:throw Error(E(161))}}catch(l){re(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function x0(t,e,n){N=t,sm(t)}function sm(t,e,n){for(var r=(t.mode&1)!==0;N!==null;){var s=N,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ni;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||je;o=Ni;var u=je;if(Ni=a,(je=l)&&!u)for(N=s;N!==null;)a=N,l=a.child,a.tag===22&&a.memoizedState!==null?ih(s):l!==null?(l.return=a,N=l):ih(s);for(;i!==null;)N=i,sm(i),i=i.sibling;N=s,Ni=o,je=u}rh(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,N=i):rh(t)}}function rh(t){for(;N!==null;){var e=N;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:je||Xa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!je)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:dt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&zd(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}zd(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Bs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}je||e.flags&512&&Yl(e)}catch(p){re(e,e.return,p)}}if(e===t){N=null;break}if(n=e.sibling,n!==null){n.return=e.return,N=n;break}N=e.return}}function sh(t){for(;N!==null;){var e=N;if(e===t){N=null;break}var n=e.sibling;if(n!==null){n.return=e.return,N=n;break}N=e.return}}function ih(t){for(;N!==null;){var e=N;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xa(4,e)}catch(l){re(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){re(e,s,l)}}var i=e.return;try{Yl(e)}catch(l){re(e,i,l)}break;case 5:var a=e.return;try{Yl(e)}catch(l){re(e,a,l)}}}catch(l){re(e,e.return,l)}if(e===t){N=null;break}var o=e.sibling;if(o!==null){o.return=e.return,N=o;break}N=e.return}}var k0=Math.ceil,Ra=Gt.ReactCurrentDispatcher,uc=Gt.ReactCurrentOwner,it=Gt.ReactCurrentBatchConfig,B=0,pe=null,ae=null,_e=0,Je=0,Sr=Sn(0),ce=0,Zs=null,Vn=0,Ya=0,cc=0,Rs=null,Le=null,dc=0,Br=1/0,Dt=null,Aa=!1,tu=null,gn=null,Ti=!1,cn=null,Oa=0,As=0,nu=null,ra=-1,sa=0;function Ne(){return B&6?se():ra!==-1?ra:ra=se()}function yn(t){return t.mode&1?B&2&&_e!==0?_e&-_e:i0.transition!==null?(sa===0&&(sa=Bf()),sa):(t=H,t!==0||(t=window.event,t=t===void 0?16:Kf(t.type)),t):1}function wt(t,e,n,r){if(50<As)throw As=0,nu=null,Error(E(185));si(t,n,r),(!(B&2)||t!==pe)&&(t===pe&&(!(B&2)&&(Ya|=n),ce===4&&on(t,_e)),ze(t,r),n===1&&B===0&&!(e.mode&1)&&(Br=se()+500,Ga&&bn()))}function ze(t,e){var n=t.callbackNode;iv(t,e);var r=ga(t,t===pe?_e:0);if(r===0)n!==null&&pd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&pd(n),e===1)t.tag===0?s0(ah.bind(null,t)):pp(ah.bind(null,t)),e0(function(){!(B&6)&&bn()}),n=null;else{switch(Hf(r)){case 1:n=Mu;break;case 4:n=Uf;break;case 16:n=ma;break;case 536870912:n=zf;break;default:n=ma}n=hm(n,im.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function im(t,e){if(ra=-1,sa=0,B&6)throw Error(E(327));var n=t.callbackNode;if(Tr()&&t.callbackNode!==n)return null;var r=ga(t,t===pe?_e:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$a(t,r);else{e=r;var s=B;B|=2;var i=om();(pe!==t||_e!==e)&&(Dt=null,Br=se()+500,Fn(t,e));do try{E0();break}catch(o){am(t,o)}while(!0);Qu(),Ra.current=i,B=s,ae!==null?e=0:(pe=null,_e=0,e=ce)}if(e!==0){if(e===2&&(s=Nl(t),s!==0&&(r=s,e=ru(t,s))),e===1)throw n=Zs,Fn(t,0),on(t,r),ze(t,se()),n;if(e===6)on(t,r);else{if(s=t.current.alternate,!(r&30)&&!S0(s)&&(e=$a(t,r),e===2&&(i=Nl(t),i!==0&&(r=i,e=ru(t,i))),e===1))throw n=Zs,Fn(t,0),on(t,r),ze(t,se()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:Rn(t,Le,Dt);break;case 3:if(on(t,r),(r&130023424)===r&&(e=dc+500-se(),10<e)){if(ga(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ne(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ml(Rn.bind(null,t,Le,Dt),e);break}Rn(t,Le,Dt);break;case 4:if(on(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-vt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*k0(r/1960))-r,10<r){t.timeoutHandle=Ml(Rn.bind(null,t,Le,Dt),r);break}Rn(t,Le,Dt);break;case 5:Rn(t,Le,Dt);break;default:throw Error(E(329))}}}return ze(t,se()),t.callbackNode===n?im.bind(null,t):null}function ru(t,e){var n=Rs;return t.current.memoizedState.isDehydrated&&(Fn(t,e).flags|=256),t=$a(t,e),t!==2&&(e=Le,Le=n,e!==null&&su(e)),t}function su(t){Le===null?Le=t:Le.push.apply(Le,t)}function S0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!_t(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function on(t,e){for(e&=~cc,e&=~Ya,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vt(e),r=1<<n;t[n]=-1,e&=~r}}function ah(t){if(B&6)throw Error(E(327));Tr();var e=ga(t,0);if(!(e&1))return ze(t,se()),null;var n=$a(t,e);if(t.tag!==0&&n===2){var r=Nl(t);r!==0&&(e=r,n=ru(t,r))}if(n===1)throw n=Zs,Fn(t,0),on(t,e),ze(t,se()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rn(t,Le,Dt),ze(t,se()),null}function hc(t,e){var n=B;B|=1;try{return t(e)}finally{B=n,B===0&&(Br=se()+500,Ga&&bn())}}function Wn(t){cn!==null&&cn.tag===0&&!(B&6)&&Tr();var e=B;B|=1;var n=it.transition,r=H;try{if(it.transition=null,H=1,t)return t()}finally{H=r,it.transition=n,B=e,!(B&6)&&bn()}}function fc(){Je=Sr.current,K(Sr)}function Fn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Zv(n)),ae!==null)for(n=ae.return;n!==null;){var r=n;switch(Ju(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xa();break;case 3:Ur(),K(Fe),K(Ce),nc();break;case 5:tc(r);break;case 4:Ur();break;case 13:K(ee);break;case 19:K(ee);break;case 10:Xu(r.type._context);break;case 22:case 23:fc()}n=n.return}if(pe=t,ae=t=vn(t.current,null),_e=Je=e,ce=0,Zs=null,cc=Ya=Vn=0,Le=Rs=null,Ln!==null){for(e=0;e<Ln.length;e++)if(n=Ln[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Ln=null}return t}function am(t,e){do{var n=ae;try{if(Qu(),ea.current=Ta,Na){for(var r=te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Na=!1}if(Hn=0,fe=ue=te=null,Ns=!1,Qs=0,uc.current=null,n===null||n.return===null){ce=1,Zs=e,ae=null;break}e:{var i=t,a=n.return,o=n,l=e;if(e=_e,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Jd(a);if(y!==null){y.flags&=-257,Gd(y,a,o,i,e),y.mode&1&&qd(i,u,e),e=y,l=u;var w=e.updateQueue;if(w===null){var v=new Set;v.add(l),e.updateQueue=v}else w.add(l);break e}else{if(!(e&1)){qd(i,u,e),pc();break e}l=Error(E(426))}}else if(X&&o.mode&1){var k=Jd(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Gd(k,a,o,i,e),Gu(zr(l,o));break e}}i=l=zr(l,o),ce!==4&&(ce=2),Rs===null?Rs=[i]:Rs.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=Hp(i,l,e);Ud(i,m);break e;case 1:o=l;var f=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(gn===null||!gn.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=Vp(i,o,e);Ud(i,_);break e}}i=i.return}while(i!==null)}um(n)}catch(x){e=x,ae===n&&n!==null&&(ae=n=n.return);continue}break}while(!0)}function om(){var t=Ra.current;return Ra.current=Ta,t===null?Ta:t}function pc(){(ce===0||ce===3||ce===2)&&(ce=4),pe===null||!(Vn&268435455)&&!(Ya&268435455)||on(pe,_e)}function $a(t,e){var n=B;B|=2;var r=om();(pe!==t||_e!==e)&&(Dt=null,Fn(t,e));do try{b0();break}catch(s){am(t,s)}while(!0);if(Qu(),B=n,Ra.current=r,ae!==null)throw Error(E(261));return pe=null,_e=0,ce}function b0(){for(;ae!==null;)lm(ae)}function E0(){for(;ae!==null&&!Qy();)lm(ae)}function lm(t){var e=dm(t.alternate,t,Je);t.memoizedProps=t.pendingProps,e===null?um(t):ae=e,uc.current=null}function um(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=v0(n,e),n!==null){n.flags&=32767,ae=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ce=6,ae=null;return}}else if(n=y0(n,e,Je),n!==null){ae=n;return}if(e=e.sibling,e!==null){ae=e;return}ae=e=t}while(e!==null);ce===0&&(ce=5)}function Rn(t,e,n){var r=H,s=it.transition;try{it.transition=null,H=1,j0(t,e,n,r)}finally{it.transition=s,H=r}return null}function j0(t,e,n,r){do Tr();while(cn!==null);if(B&6)throw Error(E(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(av(t,i),t===pe&&(ae=pe=null,_e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ti||(Ti=!0,hm(ma,function(){return Tr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=it.transition,it.transition=null;var a=H;H=1;var o=B;B|=4,uc.current=null,_0(t,n),rm(n,t),qv(Il),ya=!!$l,Il=$l=null,t.current=n,x0(n),Xy(),B=o,H=a,it.transition=i}else t.current=n;if(Ti&&(Ti=!1,cn=t,Oa=s),i=t.pendingLanes,i===0&&(gn=null),ev(n.stateNode),ze(t,se()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Aa)throw Aa=!1,t=tu,tu=null,t;return Oa&1&&t.tag!==0&&Tr(),i=t.pendingLanes,i&1?t===nu?As++:(As=0,nu=t):As=0,bn(),null}function Tr(){if(cn!==null){var t=Hf(Oa),e=it.transition,n=H;try{if(it.transition=null,H=16>t?16:t,cn===null)var r=!1;else{if(t=cn,cn=null,Oa=0,B&6)throw Error(E(331));var s=B;for(B|=4,N=t.current;N!==null;){var i=N,a=i.child;if(N.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(N=u;N!==null;){var d=N;switch(d.tag){case 0:case 11:case 15:Ts(8,d,i)}var h=d.child;if(h!==null)h.return=d,N=h;else for(;N!==null;){d=N;var p=d.sibling,y=d.return;if(em(d),d===u){N=null;break}if(p!==null){p.return=y,N=p;break}N=y}}}var w=i.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var k=v.sibling;v.sibling=null,v=k}while(v!==null)}}N=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,N=a;else e:for(;N!==null;){if(i=N,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ts(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,N=m;break e}N=i.return}}var f=t.current;for(N=f;N!==null;){a=N;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,N=g;else e:for(a=f;N!==null;){if(o=N,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Xa(9,o)}}catch(x){re(o,o.return,x)}if(o===a){N=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,N=_;break e}N=o.return}}if(B=s,bn(),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(Ha,t)}catch{}r=!0}return r}finally{H=n,it.transition=e}}return!1}function oh(t,e,n){e=zr(n,e),e=Hp(t,e,1),t=mn(t,e,1),e=Ne(),t!==null&&(si(t,1,e),ze(t,e))}function re(t,e,n){if(t.tag===3)oh(t,t,n);else for(;e!==null;){if(e.tag===3){oh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gn===null||!gn.has(r))){t=zr(n,t),t=Vp(e,t,1),e=mn(e,t,1),t=Ne(),e!==null&&(si(e,1,t),ze(e,t));break}}e=e.return}}function C0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ne(),t.pingedLanes|=t.suspendedLanes&n,pe===t&&(_e&n)===n&&(ce===4||ce===3&&(_e&130023424)===_e&&500>se()-dc?Fn(t,0):cc|=n),ze(t,e)}function cm(t,e){e===0&&(t.mode&1?(e=_i,_i<<=1,!(_i&130023424)&&(_i=4194304)):e=1);var n=Ne();t=qt(t,e),t!==null&&(si(t,e,n),ze(t,n))}function P0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cm(t,n)}function N0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),cm(t,n)}var dm;dm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Fe.current)De=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return De=!1,g0(t,e,n);De=!!(t.flags&131072)}else De=!1,X&&e.flags&1048576&&mp(e,ba,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;na(t,e),t=e.pendingProps;var s=Mr(e,Ce.current);Nr(e,n),s=sc(null,e,r,t,s,n);var i=ic();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ue(r)?(i=!0,ka(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zu(e),s.updater=Qa,e.stateNode=s,s._reactInternals=e,Vl(e,r,t,n),e=Jl(null,e,r,!0,i,n)):(e.tag=0,X&&i&&qu(e),Pe(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(na(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=R0(r),t=dt(r,t),s){case 0:e=ql(null,e,r,t,n);break e;case 1:e=Xd(null,e,r,t,n);break e;case 11:e=Kd(null,e,r,t,n);break e;case 14:e=Qd(null,e,r,dt(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dt(r,s),ql(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dt(r,s),Xd(t,e,r,s,n);case 3:e:{if(Gp(e),t===null)throw Error(E(387));r=e.pendingProps,i=e.memoizedState,s=i.element,xp(t,e),Ca(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=zr(Error(E(423)),e),e=Yd(t,e,r,n,s);break e}else if(r!==s){s=zr(Error(E(424)),e),e=Yd(t,e,r,n,s);break e}else for(Ge=pn(e.stateNode.containerInfo.firstChild),Ke=e,X=!0,gt=null,n=wp(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Dr(),r===s){e=Jt(t,e,n);break e}Pe(t,e,r,n)}e=e.child}return e;case 5:return kp(e),t===null&&zl(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Ll(r,s)?a=null:i!==null&&Ll(r,i)&&(e.flags|=32),Jp(t,e),Pe(t,e,a,n),e.child;case 6:return t===null&&zl(e),null;case 13:return Kp(t,e,n);case 4:return ec(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fr(e,null,r,n):Pe(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dt(r,s),Kd(t,e,r,s,n);case 7:return Pe(t,e,e.pendingProps,n),e.child;case 8:return Pe(t,e,e.pendingProps.children,n),e.child;case 12:return Pe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,J(Ea,r._currentValue),r._currentValue=a,i!==null)if(_t(i.value,a)){if(i.children===s.children&&!Fe.current){e=Jt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Ht(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Bl(i.return,n,e),o.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(E(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Bl(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Pe(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Nr(e,n),s=ot(s),r=r(s),e.flags|=1,Pe(t,e,r,n),e.child;case 14:return r=e.type,s=dt(r,e.pendingProps),s=dt(r.type,s),Qd(t,e,r,s,n);case 15:return Wp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dt(r,s),na(t,e),e.tag=1,Ue(r)?(t=!0,ka(e)):t=!1,Nr(e,n),Bp(e,r,s),Vl(e,r,s,n),Jl(null,e,r,!0,t,n);case 19:return Qp(t,e,n);case 22:return qp(t,e,n)}throw Error(E(156,e.tag))};function hm(t,e){return Ff(t,e)}function T0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rt(t,e,n,r){return new T0(t,e,n,r)}function mc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function R0(t){if(typeof t=="function")return mc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$u)return 11;if(t===Iu)return 14}return 2}function vn(t,e){var n=t.alternate;return n===null?(n=rt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ia(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")mc(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case fr:return Un(n.children,s,i,e);case Ou:a=8,s|=8;break;case pl:return t=rt(12,n,e,s|2),t.elementType=pl,t.lanes=i,t;case ml:return t=rt(13,n,e,s),t.elementType=ml,t.lanes=i,t;case gl:return t=rt(19,n,e,s),t.elementType=gl,t.lanes=i,t;case kf:return Za(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _f:a=10;break e;case xf:a=9;break e;case $u:a=11;break e;case Iu:a=14;break e;case nn:a=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=rt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Un(t,e,n,r){return t=rt(7,t,r,e),t.lanes=n,t}function Za(t,e,n,r){return t=rt(22,t,r,e),t.elementType=kf,t.lanes=n,t.stateNode={isHidden:!1},t}function Go(t,e,n){return t=rt(6,t,null,e),t.lanes=n,t}function Ko(t,e,n){return e=rt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function A0(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=No(0),this.expirationTimes=No(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=No(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gc(t,e,n,r,s,i,a,o,l){return t=new A0(t,e,n,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=rt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zu(i),t}function O0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fm(t){if(!t)return _n;t=t._reactInternals;e:{if(Jn(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ue(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(Ue(n))return fp(t,n,e)}return e}function pm(t,e,n,r,s,i,a,o,l){return t=gc(n,r,!0,t,s,i,a,o,l),t.context=fm(null),n=t.current,r=Ne(),s=yn(n),i=Ht(r,s),i.callback=e??null,mn(n,i,s),t.current.lanes=s,si(t,s,r),ze(t,r),t}function eo(t,e,n,r){var s=e.current,i=Ne(),a=yn(s);return n=fm(n),e.context===null?e.context=n:e.pendingContext=n,e=Ht(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=mn(s,e,a),t!==null&&(wt(t,s,a,i),Zi(t,s,a)),a}function Ia(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yc(t,e){lh(t,e),(t=t.alternate)&&lh(t,e)}function $0(){return null}var mm=typeof reportError=="function"?reportError:function(t){console.error(t)};function vc(t){this._internalRoot=t}to.prototype.render=vc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));eo(t,e,null,null)};to.prototype.unmount=vc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wn(function(){eo(null,t,null,null)}),e[Wt]=null}};function to(t){this._internalRoot=t}to.prototype.unstable_scheduleHydration=function(t){if(t){var e=qf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<an.length&&e!==0&&e<an[n].priority;n++);an.splice(n,0,t),n===0&&Gf(t)}};function wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function no(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uh(){}function I0(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Ia(a);i.call(u)}}var a=pm(e,r,t,0,null,!1,!1,"",uh);return t._reactRootContainer=a,t[Wt]=a.current,Ws(t.nodeType===8?t.parentNode:t),Wn(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var u=Ia(l);o.call(u)}}var l=gc(t,0,!1,null,null,!1,!1,"",uh);return t._reactRootContainer=l,t[Wt]=l.current,Ws(t.nodeType===8?t.parentNode:t),Wn(function(){eo(e,l,n,r)}),l}function ro(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=Ia(a);o.call(l)}}eo(e,a,t,s)}else a=I0(n,e,t,s,r);return Ia(a)}Vf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ps(e.pendingLanes);n!==0&&(Du(e,n|1),ze(e,se()),!(B&6)&&(Br=se()+500,bn()))}break;case 13:Wn(function(){var r=qt(t,1);if(r!==null){var s=Ne();wt(r,t,1,s)}}),yc(t,1)}};Fu=function(t){if(t.tag===13){var e=qt(t,134217728);if(e!==null){var n=Ne();wt(e,t,134217728,n)}yc(t,134217728)}};Wf=function(t){if(t.tag===13){var e=yn(t),n=qt(t,e);if(n!==null){var r=Ne();wt(n,t,e,r)}yc(t,e)}};qf=function(){return H};Jf=function(t,e){var n=H;try{return H=t,e()}finally{H=n}};jl=function(t,e,n){switch(e){case"input":if(wl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ja(r);if(!s)throw Error(E(90));bf(r),wl(r,s)}}}break;case"textarea":jf(t,n);break;case"select":e=n.value,e!=null&&Er(t,!!n.multiple,e,!1)}};Of=hc;$f=Wn;var L0={usingClientEntryPoint:!1,Events:[ai,yr,Ja,Rf,Af,hc]},cs={findFiberByHostInstance:In,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M0={bundleType:cs.bundleType,version:cs.version,rendererPackageName:cs.rendererPackageName,rendererConfig:cs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Mf(t),t===null?null:t.stateNode},findFiberByHostInstance:cs.findFiberByHostInstance||$0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ri=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ri.isDisabled&&Ri.supportsFiber)try{Ha=Ri.inject(M0),Rt=Ri}catch{}}Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L0;Xe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wc(e))throw Error(E(200));return O0(t,e,null,n)};Xe.createRoot=function(t,e){if(!wc(t))throw Error(E(299));var n=!1,r="",s=mm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gc(t,1,!1,null,null,n,!1,r,s),t[Wt]=e.current,Ws(t.nodeType===8?t.parentNode:t),new vc(e)};Xe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=Mf(e),t=t===null?null:t.stateNode,t};Xe.flushSync=function(t){return Wn(t)};Xe.hydrate=function(t,e,n){if(!no(e))throw Error(E(200));return ro(null,t,e,!0,n)};Xe.hydrateRoot=function(t,e,n){if(!wc(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=mm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=pm(e,null,t,1,n??null,s,!1,i,a),t[Wt]=e.current,Ws(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new to(e)};Xe.render=function(t,e,n){if(!no(e))throw Error(E(200));return ro(null,t,e,!1,n)};Xe.unmountComponentAtNode=function(t){if(!no(t))throw Error(E(40));return t._reactRootContainer?(Wn(function(){ro(null,null,t,!1,function(){t._reactRootContainer=null,t[Wt]=null})}),!0):!1};Xe.unstable_batchedUpdates=hc;Xe.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!no(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return ro(t,e,n,!1,r)};Xe.version="18.3.1-next-f1338f8080-20240426";function gm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gm)}catch(t){console.error(t)}}gm(),gf.exports=Xe;var D0=gf.exports,ym,ch=D0;ym=ch.createRoot,ch.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var F0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Q=(t,e)=>{const n=j.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...u},d)=>j.createElement("svg",{ref:d,...F0,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${U0(t)}`,o].join(" "),...u},[...e.map(([h,p])=>j.createElement(h,p)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=Q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=Q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=Q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=Q("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=Q("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=Q("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=Q("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=Q("ListMusic",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=Q("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=Q("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=Q("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=Q("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=Q("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=Q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=Q("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=Q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=Q("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=Q("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=Q("ShoppingBasket",[["path",{d:"m15 11-1 9",key:"5wnq3a"}],["path",{d:"m19 11-4-7",key:"cnml18"}],["path",{d:"M2 11h20",key:"3eubbj"}],["path",{d:"m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4",key:"yiazzp"}],["path",{d:"M4.5 15.5h15",key:"13mye1"}],["path",{d:"m5 11 4-7",key:"116ra9"}],["path",{d:"m9 11 1 9",key:"1ojof7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=Q("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=Q("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=Q("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=Q("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=Q("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=Q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ew="modulepreload",tw=function(t){return"/"+t},fh={},Hr=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=tw(l),l in fh)return;fh[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":ew,u||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((p,y)=>{h.addEventListener("load",p),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},nw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Hr(async()=>{const{default:r}=await Promise.resolve().then(()=>Kr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class kc extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class rw extends kc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class sw extends kc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class iw extends kc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var iu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(iu||(iu={}));var aw=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class ow{constructor(e,{headers:n={},customFetch:r,region:s=iu.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=nw(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return aw(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=n;let o={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let u;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(o["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(o["Content-Type"]="application/json",u=JSON.stringify(a)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:u}).catch(w=>{throw new rw(w)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new sw(d);if(!d.ok)throw new iw(d);let p=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return p==="application/json"?y=yield d.json():p==="application/octet-stream"?y=yield d.blob():p==="text/event-stream"?y=d:p==="multipart/form-data"?y=yield d.formData():y=yield d.text(),{data:y,error:null}}catch(s){return{data:null,error:s}}})}}var Me={},Sc={},so={},li={},io={},ao={},lw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Vr=lw();const uw=Vr.fetch,Sm=Vr.fetch.bind(Vr),bm=Vr.Headers,cw=Vr.Request,dw=Vr.Response,Kr=Object.freeze(Object.defineProperty({__proto__:null,Headers:bm,Request:cw,Response:dw,default:Sm,fetch:uw},Symbol.toStringTag,{value:"Module"})),hw=hy(Kr);var oo={};Object.defineProperty(oo,"__esModule",{value:!0});let fw=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};oo.default=fw;var Em=at&&at.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ao,"__esModule",{value:!0});const pw=Em(hw),mw=Em(oo);let gw=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=pw.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l;let u=null,d=null,h=null,p=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=m:d=JSON.parse(m))}const v=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),k=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");v&&k&&k.length>1&&(h=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,p=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const v=await i.text();try{u=JSON.parse(v),Array.isArray(u)&&i.status===404&&(d=[],u=null,p=200,y="OK")}catch{i.status===404&&v===""?(p=204,y="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,p=200,y="OK"),u&&this.shouldThrowOnError)throw new mw.default(u)}return{error:u,data:d,count:h,status:p,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};ao.default=gw;var yw=at&&at.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(io,"__esModule",{value:!0});const vw=yw(ao);let ww=class extends vw.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};io.default=ww;var _w=at&&at.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(li,"__esModule",{value:!0});const xw=_w(io);let kw=class extends xw.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};li.default=kw;var Sw=at&&at.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(so,"__esModule",{value:!0});const ds=Sw(li);let bw=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new ds.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new ds.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const a="POST",o=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ds.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new ds.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new ds.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};so.default=bw;var lo={},uo={};Object.defineProperty(uo,"__esModule",{value:!0});uo.version=void 0;uo.version="0.0.0-automated";Object.defineProperty(lo,"__esModule",{value:!0});lo.DEFAULT_HEADERS=void 0;const Ew=uo;lo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Ew.version}`};var jm=at&&at.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sc,"__esModule",{value:!0});const jw=jm(so),Cw=jm(li),Pw=lo;let Nw=class Cm{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Pw.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new jw.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Cm(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{o.searchParams.append(d,h)})):(a="POST",l=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Cw.default({method:a,url:o,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Sc.default=Nw;var Qr=at&&at.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Me,"__esModule",{value:!0});Me.PostgrestError=Me.PostgrestBuilder=Me.PostgrestTransformBuilder=Me.PostgrestFilterBuilder=Me.PostgrestQueryBuilder=Me.PostgrestClient=void 0;const Pm=Qr(Sc);Me.PostgrestClient=Pm.default;const Nm=Qr(so);Me.PostgrestQueryBuilder=Nm.default;const Tm=Qr(li);Me.PostgrestFilterBuilder=Tm.default;const Rm=Qr(io);Me.PostgrestTransformBuilder=Rm.default;const Am=Qr(ao);Me.PostgrestBuilder=Am.default;const Om=Qr(oo);Me.PostgrestError=Om.default;var Tw=Me.default={PostgrestClient:Pm.default,PostgrestQueryBuilder:Nm.default,PostgrestFilterBuilder:Tm.default,PostgrestTransformBuilder:Rm.default,PostgrestBuilder:Am.default,PostgrestError:Om.default};const{PostgrestClient:Rw,PostgrestQueryBuilder:Sk,PostgrestFilterBuilder:bk,PostgrestTransformBuilder:Ek,PostgrestBuilder:jk,PostgrestError:Ck}=Tw,Aw="2.11.2",Ow={"X-Client-Info":`realtime-js/${Aw}`},$w="1.0.0",$m=1e4,Iw=1e3;var Rr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Rr||(Rr={}));var We;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(We||(We={}));var pt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(pt||(pt={}));var au;(function(t){t.websocket="websocket"})(au||(au={}));var On;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(On||(On={}));class Lw{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+s));a=a+s;const l=r.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class Im{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var q;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(q||(q={}));const ph=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=Mw(a,t,e,s),i),{})},Mw=(t,e,n,r)=>{const s=e.find(o=>o.name===t),i=s==null?void 0:s.type,a=n[t];return i&&!r.includes(i)?Lm(i,a):ou(a)},Lm=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return zw(e,n)}switch(t){case q.bool:return Dw(e);case q.float4:case q.float8:case q.int2:case q.int4:case q.int8:case q.numeric:case q.oid:return Fw(e);case q.json:case q.jsonb:return Uw(e);case q.timestamp:return Bw(e);case q.abstime:case q.date:case q.daterange:case q.int4range:case q.int8range:case q.money:case q.reltime:case q.text:case q.time:case q.timestamptz:case q.timetz:case q.tsrange:case q.tstzrange:return ou(e);default:return ou(e)}},ou=t=>t,Dw=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Fw=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Uw=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},zw=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Lm(e,o))}return t},Bw=t=>typeof t=="string"?t.replace(" ","T"):t,Mm=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Qo{constructor(e,n,r={},s=$m){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var mh;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(mh||(mh={}));class Os{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Os.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=Os.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Os.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),a=this.transformState(n),o={},l={};return this.map(i,(u,d)=>{a[u]||(l[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const p=d.map(k=>k.presence_ref),y=h.map(k=>k.presence_ref),w=d.filter(k=>y.indexOf(k.presence_ref)<0),v=h.filter(k=>p.indexOf(k.presence_ref)<0);w.length>0&&(o[u]=w),v.length>0&&(l[u]=v)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),d.length>0){const h=e[o].map(y=>y.presence_ref),p=d.filter(y=>h.indexOf(y.presence_ref)<0);e[o].unshift(...p)}r(o,d,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const d=l.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[o]=u,s(o,u,l),u.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(gh||(gh={}));var yh;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(yh||(yh={}));var Ft;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ft||(Ft={}));class bc{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=We.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Qo(this,pt.join,this.params,this.timeout),this.rejoinTimer=new Im(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=We.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=We.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Os(this),this.broadcastEndpointURL=Mm(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(d=>e==null?void 0:e(Ft.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Ft.CLOSED));const l={},u={broadcast:i,presence:a,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&s!==void 0?s:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(Ft.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,y=(h=p==null?void 0:p.length)!==null&&h!==void 0?h:0,w=[];for(let v=0;v<y;v++){const k=p[v],{filter:{event:m,schema:f,table:g,filter:_}}=k,x=d&&d[v];if(x&&x.event===m&&x.schema===f&&x.table===g&&x.filter===_)w.push(Object.assign(Object.assign({},k),{id:x.id}));else{this.unsubscribe(),e==null||e(Ft.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Ft.SUBSCRIBED);return}}).receive("error",d=>{e==null||e(Ft.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ft.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=We.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new Qo(this,pt.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Qo(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:d}=pt;if(r&&[o,l,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let p=this._onMessage(a,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var w,v,k;return((w=y.filter)===null||w===void 0?void 0:w.event)==="*"||((k=(v=y.filter)===null||v===void 0?void 0:v.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===a}).map(y=>y.callback(p,r)):(i=this.bindings[a])===null||i===void 0||i.filter(y=>{var w,v,k,m,f,g;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in y){const _=y.id,x=(w=y.filter)===null||w===void 0?void 0:w.event;return _&&((v=n.ids)===null||v===void 0?void 0:v.includes(_))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const _=(f=(m=y==null?void 0:y.filter)===null||m===void 0?void 0:m.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return _==="*"||_===((g=n==null?void 0:n.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===a}).map(y=>{if(typeof p=="object"&&"ids"in p){const w=p.data,{schema:v,table:k,commit_timestamp:m,type:f,errors:g}=w;p=Object.assign(Object.assign({},{schema:v,table:k,commit_timestamp:m,eventType:f,new:{},old:{},errors:g}),this._getPayloadRecords(w))}y.callback(p,r)})}_isClosed(){return this.state===We.closed}_isJoined(){return this.state===We.joined}_isJoining(){return this.state===We.joining}_isLeaving(){return this.state===We.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&bc.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(pt.close,{},e)}_onError(e){this._on(pt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=We.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=ph(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=ph(e.columns,e.old_record)),n}}const Hw=()=>{},Vw=typeof WebSocket<"u",Ww=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qw{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Ow,this.params={},this.timeout=$m,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Hw,this.conn=null,this.sendBuffer=[],this.serializer=new Lw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Hr(async()=>{const{default:l}=await Promise.resolve().then(()=>Kr);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${au.websocket}`,this.httpEndpoint=Mm(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,a)=>a(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Im(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Vw){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Jw(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Hr(async()=>{const{default:e}=await import("./browser-BRIxBwx2.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:$w}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Rr.connecting:return On.Connecting;case Rr.open:return On.Open;case Rr.closing:return On.Closing;default:return On.Closed}}isConnected(){return this.connectionState()===On.Open}channel(e,n={config:{}}){const r=new bc(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(pt.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Iw,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:a}=n;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(r)).forEach(o=>o._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(pt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Ww],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Jw{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Rr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Ec extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function he(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Gw extends Ec{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class lu extends Ec{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Kw=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const Dm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Hr(async()=>{const{default:r}=await Promise.resolve().then(()=>Kr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Qw=()=>Kw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Hr(()=>Promise.resolve().then(()=>Kr),void 0)).Response:Response}),uu=t=>{if(Array.isArray(t))return t.map(n=>uu(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=uu(r)}),e};var Kn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const Xo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Xw=(t,e,n)=>Kn(void 0,void 0,void 0,function*(){const r=yield Qw();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new Gw(Xo(s),t.status||500))}).catch(s=>{e(new lu(Xo(s),s))}):e(new lu(Xo(t),t))}),Yw=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function ui(t,e,n,r,s,i){return Kn(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(n,Yw(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Xw(l,o,r))})})}function Ma(t,e,n,r){return Kn(this,void 0,void 0,function*(){return ui(t,"GET",e,n,r)})}function sn(t,e,n,r,s){return Kn(this,void 0,void 0,function*(){return ui(t,"POST",e,r,s,n)})}function Zw(t,e,n,r,s){return Kn(this,void 0,void 0,function*(){return ui(t,"PUT",e,r,s,n)})}function e_(t,e,n,r){return Kn(this,void 0,void 0,function*(){return ui(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Fm(t,e,n,r,s){return Kn(this,void 0,void 0,function*(){return ui(t,"DELETE",e,r,s,n)})}var Oe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const t_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class n_{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Dm(s)}uploadOrUpdate(e,n,r,s){return Oe(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},vh),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),p=yield h.json();return h.ok?{data:{path:u,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(i){if(he(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Oe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:vh.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:d}),p=yield h.json();return h.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(he(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Oe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield sn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new Ec("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}update(e,n,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Oe(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Oe(this,void 0,void 0,function*(){try{return{data:{path:(yield sn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Oe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield sn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Oe(this,void 0,void 0,function*(){try{const s=yield sn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}download(e,n){return Oe(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Ma(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(he(o))return{data:null,error:o};throw o}})}info(e){return Oe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ma(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:uu(r),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}exists(e){return Oe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield e_(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(he(r)&&r instanceof lu){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield Fm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}list(e,n,r){return Oe(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},t_),n),{prefix:e||""});return{data:yield sn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const r_="2.7.1",s_={"X-Client-Info":`storage-js/${r_}`};var nr=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class i_{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},s_),n),this.fetch=Dm(r)}listBuckets(){return nr(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(he(e))return{data:null,error:e};throw e}})}getBucket(e){return nr(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return nr(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return nr(this,void 0,void 0,function*(){try{return{data:yield Zw(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}emptyBucket(e){return nr(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}deleteBucket(e){return nr(this,void 0,void 0,function*(){try{return{data:yield Fm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}}class a_ extends i_{constructor(e,n={},r){super(e,n,r)}from(e){return new n_(this.url,this.headers,e,this.fetch)}}const o_="2.49.1";let gs="";typeof Deno<"u"?gs="deno":typeof document<"u"?gs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gs="react-native":gs="node";const l_={"X-Client-Info":`supabase-js-${gs}/${o_}`},u_={headers:l_},c_={schema:"public"},d_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},h_={};var f_=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const p_=t=>{let e;return t?e=t:typeof fetch>"u"?e=Sm:e=fetch,(...n)=>e(...n)},m_=()=>typeof Headers>"u"?bm:Headers,g_=(t,e,n)=>{const r=p_(n),s=m_();return(i,a)=>f_(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var y_=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};function v_(t){return t.replace(/\/$/,"")}function w_(t,e){const{db:n,auth:r,realtime:s,global:i}=t,{db:a,auth:o,realtime:l,global:u}=e,d={db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},u),i),accessToken:()=>y_(this,void 0,void 0,function*(){return""})};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}const Um="2.68.0",ur=30*1e3,cu=3,Yo=cu*ur,__="http://localhost:9999",x_="supabase.auth.token",k_={"X-Client-Info":`gotrue-js/${Um}`},du="X-Supabase-Api-Version",zm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function S_(t){return Math.round(Date.now()/1e3)+t}function b_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const bt=()=>typeof window<"u"&&typeof document<"u",Cn={tested:!1,writable:!1},$s=()=>{if(!bt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Cn.tested)return Cn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Cn.tested=!0,Cn.writable=!0}catch{Cn.tested=!0,Cn.writable=!1}return Cn.writable};function E_(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Bm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Hr(async()=>{const{default:r}=await Promise.resolve().then(()=>Kr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},j_=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Hm=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ai=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Oi=async(t,e)=>{await t.removeItem(e)};function C_(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,s,i,a,o,l,u,d=0;for(t=t.replace("-","+").replace("_","/");d<t.length;)a=e.indexOf(t.charAt(d++)),o=e.indexOf(t.charAt(d++)),l=e.indexOf(t.charAt(d++)),u=e.indexOf(t.charAt(d++)),r=a<<2|o>>4,s=(o&15)<<4|l>>2,i=(l&3)<<6|u,n=n+String.fromCharCode(r),l!=64&&s!=0&&(n=n+String.fromCharCode(s)),u!=64&&i!=0&&(n=n+String.fromCharCode(i));return n}class co{constructor(){this.promise=new co.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}co.promiseConstructor=Promise;function wh(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(C_(r))}async function P_(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function N_(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function T_(t){return("0"+t.toString(16)).substr(-2)}function R_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,T_).join("")}async function A_(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function O_(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $_(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await A_(t);return O_(n)}async function rr(t,e,n=!1){const r=R_();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Hm(t,`${e}-code-verifier`,s);const i=await $_(r);return[i,r===i?"plain":"s256"]}const I_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function L_(t){const e=t.headers.get(du);if(!e||!e.match(I_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class jc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function M(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class M_ extends jc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function D_(t){return M(t)&&t.name==="AuthApiError"}class Vm extends jc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Qn extends jc{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class en extends Qn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function F_(t){return M(t)&&t.name==="AuthSessionMissingError"}class Zo extends Qn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $i extends Qn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ii extends Qn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function U_(t){return M(t)&&t.name==="AuthImplicitGrantRedirectError"}class _h extends Qn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hu extends Qn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function el(t){return M(t)&&t.name==="AuthRetryableFetchError"}class xh extends Qn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var z_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const An=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),B_=[502,503,504];async function kh(t){var e;if(!j_(t))throw new hu(An(t),0);if(B_.includes(t.status))throw new hu(An(t),t.status);let n;try{n=await t.json()}catch(i){throw new Vm(An(i),i)}let r;const s=L_(t);if(s&&s.getTime()>=zm["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new xh(An(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new en}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new xh(An(n),t.status,n.weak_password.reasons);throw new M_(An(n),t.status||500,r)}const H_=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function U(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[du]||(i[du]=zm["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await V_(t,e,n+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function V_(t,e,n,r,s,i){const a=H_(e,r,s,i);let o;try{o=await t(n,Object.assign({},a))}catch(l){throw console.error(l),new hu(An(l),0)}if(o.ok||await kh(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await kh(l)}}function tn(t){var e;let n=null;G_(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=S_(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Sh(t){const e=tn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ln(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function W_(t){return{data:t,error:null}}function q_(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,a=z_(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function J_(t){return t}function G_(t){return t.access_token&&t.refresh_token&&t.expires_in}var K_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Q_{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Bm(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await U(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await U(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ln})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=K_(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await U(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:q_,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(M(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await U(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ln})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},d=await U(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:J_});if(d.error)throw d.error;const h=await d.json(),p=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(w=>{const v=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(w.split(";")[1].split("=")[1]);u[`${k}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(M(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await U(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ln})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await U(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ln})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await U(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ln})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await U(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(M(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await U(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}}const X_={getItem:t=>$s()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{$s()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{$s()&&globalThis.localStorage.removeItem(t)}};function bh(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Y_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const sr={debug:!!(globalThis&&$s()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Wm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Z_ extends Wm{}async function ex(t,e,n){sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),sr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Z_(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(sr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Y_();const tx={url:__,storageKey:x_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:k_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Eh(t,e,n){return await n()}class ei{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ei.nextInstanceID,ei.nextInstanceID+=1,this.instanceID>0&&bt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},tx),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Q_({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Bm(s.fetch),this.lock=s.lock||Eh,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:bt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=ex:this.lock=Eh,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:$s()?this.storage=X_:(this.memoryStorage={},this.storage=bh(this.memoryStorage)):(this.memoryStorage={},this.storage=bh(this.memoryStorage)),bt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Um}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=E_(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),bt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),U_(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return M(n)?{error:n}:{error:new Vm("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:tn}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(M(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:p}=e;let y=null,w=null;this.flowType==="pkce"&&([y,w]=await rr(this.storage,this.storageKey)),i=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:y,code_challenge_method:w},xform:tn})}else if("phone"in e){const{phone:d,password:h,options:p}=e;i=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:tn})}else throw new $i("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(M(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:a,options:o}=e;n=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Sh})}else if("phone"in e){const{phone:i,password:a,options:o}=e;n=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Sh})}else throw new $i("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Zo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Ai(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await U(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:tn});if(await Oi(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Zo}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(M(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=e,o=await U(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:tn}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Zo}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await rr(this.storage,this.storageKey));const{error:h}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:d}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new $i("You must provide either an email or phone number.")}catch(o){if(M(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await U(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:tn});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(M(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await rr(this.storage,this.storageKey)),await U(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:W_})}catch(i){if(M(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new en;const{error:s}=await U(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(M(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await U(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:o}=await U(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new $i("You must provide either an email or phone number and a type")}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ai(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Yo:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ln}):await this._useSession(async n=>{var r,s,i;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new en}:await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ln})})}catch(n){if(M(n))return F_(n)&&(await this._removeSession(),await Oi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new en;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await rr(this.storage,this.storageKey));const{data:u,error:d}=await U(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:ln});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return wh(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new en;const n=Date.now()/1e3;let r=n,s=!0,i=null;const a=wh(e.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(M(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:o}=n;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new en;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!bt())throw new Ii("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ii(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new _h("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ii("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _h("No code detected.");const{data:f,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=e;if(!i||!o||!a||!u)throw new Ii("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(o);let p=d+h;l&&(p=parseInt(l));const y=p-d;y*1e3<=ur&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const w=p-h;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,p,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,p,d);const{data:v,error:k}=await this._getUser(i);if(k)throw k;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:p,refresh_token:a,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(r){if(M(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ai(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(D_(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Oi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=b_(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await rr(this.storage,this.storageKey,!0));try{return await U(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(M(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,o,l,u,d;const{data:h,error:p}=i;if(p)throw p;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await U(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return bt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(M(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await U(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(M(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await N_(async s=>(s>0&&await P_(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await U(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:tn})),(s,i)=>{const a=200*Math.pow(2,s);return i&&el(i)&&Date.now()+a-r<ur})}catch(r){if(this._debug(n,"error",r),M(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),bt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Ai(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Yo;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Yo}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),el(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new en;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new co;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new en;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),M(i)){const a={session:null,error:i};return el(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Hm(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Oi(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&bt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ur);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/ur);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ur}ms, refresh threshold is ${cu} ticks`),s<=cu&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Wm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await rr(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await U(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(M(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await U(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(M(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:o}=await U(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(n){if(M(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await U(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(M(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(s.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}}ei.nextInstanceID=0;const nx=ei;class rx extends nx{constructor(e){super(e)}}var sx=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class ix{constructor(e,n,r){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const o=v_(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:c_,realtime:h_,auth:Object.assign(Object.assign({},d_),{storageKey:l}),global:u_},d=w_(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=g_(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Rw(`${o}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new ow(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new a_(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return sx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:o,debug:l},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rx({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:a,lock:o,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new qw(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ax=(t,e,n)=>new ix(t,e,n);let Li;const ox=new Uint8Array(16);function lx(){if(!Li&&(Li=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Li))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Li(ox)}const ye=[];for(let t=0;t<256;++t)ye.push((t+256).toString(16).slice(1));function ux(t,e=0){return ye[t[e+0]]+ye[t[e+1]]+ye[t[e+2]]+ye[t[e+3]]+"-"+ye[t[e+4]]+ye[t[e+5]]+"-"+ye[t[e+6]]+ye[t[e+7]]+"-"+ye[t[e+8]]+ye[t[e+9]]+"-"+ye[t[e+10]]+ye[t[e+11]]+ye[t[e+12]]+ye[t[e+13]]+ye[t[e+14]]+ye[t[e+15]]}const cx=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),jh={randomUUID:cx};function qm(t,e,n){if(jh.randomUUID&&!e&&!t)return jh.randomUUID();t=t||{};const r=t.random||(t.rng||lx)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ux(r)}const dx="https://cqhuzfgnvagicdxpntab.supabase.co",hx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNxaHV6ZmdudmFnaWNkeHBudGFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI2Nzc2OTEsImV4cCI6MjA1ODI1MzY5MX0.xFHE8lO1uw2xv_NpZODuFg36cvrGPMfRcBmoOA1hfsM",Jm=()=>{let t=localStorage.getItem("bronify_user_id");return t||(t=qm(),localStorage.setItem("bronify_user_id",t)),t},Ot=ax(dx,hx,{auth:{persistSession:!0,autoRefreshToken:!0},global:{headers:{"x-user-id":Jm()}}});async function ho(){try{const{data:t,error:e}=await Ot.from("tracks").select("*").order("created_at",{ascending:!1});return e?(console.error("Error fetching tracks:",e),[]):t||[]}catch(t){return console.error("Failed to fetch tracks:",t),[]}}async function fx(){const{data:t,error:e}=await Ot.from("tracks").select("*").eq("is_liked",!0).order("created_at",{ascending:!1});if(e)throw e;return t}async function Gm(){const{data:t,error:e}=await Ot.from("tracks").select("*").not("last_played","is",null).order("last_played",{ascending:!1}).limit(10);if(e)throw e;return t}async function Km(t,e){const{data:n,error:r}=await Ot.from("tracks").update({is_liked:e}).eq("id",t).select().single();if(r)throw r;return n}async function px(t){const{error:e}=await Ot.from("tracks").update({last_played:new Date().toISOString()}).eq("id",t);if(e)throw e}async function mx(t,e="",n){const{data:r,error:s}=await Ot.from("playlists").insert({name:t,description:e,custom_cover_url:n,user_id:Jm()}).select().single();if(s)throw s;return r}async function gx(t){const{data:e,error:n}=await Ot.from("playlist_tracks").select(`
      track_id,
      position,
      tracks (*)
    `).eq("playlist_id",t).order("position");if(n)throw n;return e.map(r=>r.tracks)}async function Qm(){const{data:t,error:e}=await Ot.from("playlists").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}async function yx(t,e){const{data:n}=await Ot.from("playlist_tracks").select("position").eq("playlist_id",t).order("position",{ascending:!1}).limit(1),r=n&&n.length>0?n[0].position+1:0,{error:s}=await Ot.from("playlist_tracks").insert({playlist_id:t,track_id:e,position:r});if(s)throw s}const vx=({isOpen:t,onClose:e,onPlaylistCreated:n})=>{const[r,s]=j.useState(""),[i,a]=j.useState(""),[o,l]=j.useState(""),[u,d]=j.useState(!1),[h,p]=j.useState(null),[y,w]=j.useState("");if(!t)return null;const v=m=>{const f=m.target.value;l(f),w(f)},k=async m=>{if(m.preventDefault(),!r.trim()){p("Please enter a playlist name");return}d(!0),p(null);try{await mx(r,i,o),n(),e(),s(""),a(""),l(""),w("")}catch(f){console.error("Failed to create playlist:",f),p("Failed to create playlist. Please try again.")}finally{d(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-spotify-dark rounded-lg p-6 w-full max-w-md relative",children:[c.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:c.jsx(km,{size:24})}),c.jsx("h2",{className:"text-white text-2xl font-bold mb-6",children:"Create Playlist"}),c.jsx("div",{className:"mb-6",children:c.jsx("div",{className:"relative w-32 h-32 mx-auto mb-4 bg-spotify-light rounded-lg overflow-hidden",children:c.jsx("img",{src:y||"https://i.ibb.co/Df6bHf2J/Screenshot-2025-03-22-at-5-52-22-PM.png",alt:"Playlist cover",className:"w-full h-full object-cover",onError:()=>w("")})})}),c.jsxs("form",{onSubmit:k,children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"coverUrl",className:"block text-gray-300 mb-2",children:"Cover Image URL (optional)"}),c.jsx("input",{type:"text",id:"coverUrl",value:o,onChange:v,className:"w-full bg-spotify-light text-white rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-lakers-gold",placeholder:"https://example.com/image.jpg"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"name",className:"block text-gray-300 mb-2",children:"Name"}),c.jsx("input",{type:"text",id:"name",value:r,onChange:m=>s(m.target.value),className:"w-full bg-spotify-light text-white rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-lakers-gold",placeholder:"My LeBron Playlist"})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{htmlFor:"description",className:"block text-gray-300 mb-2",children:"Description (optional)"}),c.jsx("textarea",{id:"description",value:i,onChange:m=>a(m.target.value),className:"w-full bg-spotify-light text-white rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-lakers-gold resize-none",rows:3,placeholder:"Add an optional description for your playlist"})]}),h&&c.jsx("div",{className:"mb-4 text-red-500 text-sm",children:h}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-white hover:text-gray-300 transition",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:u,className:"bg-lakers-gold text-black px-6 py-2 rounded-full font-bold hover:bg-opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Creating...":"Create"})]})]})]})})},wx=({onNavigate:t,activePage:e,onPlaylistSelect:n})=>{const[r,s]=j.useState(!1),[i,a]=j.useState([]),o=async()=>{try{const l=await Qm();a(l)}catch(l){console.error("Failed to load playlists:",l)}};return j.useEffect(()=>{o()},[]),c.jsx("div",{className:"bg-spotify-black h-full w-full flex flex-col",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[c.jsx("img",{src:"https://i.ibb.co/SXGYvXDD/Screenshot-2025-03-21-at-12-15-30-PM-modified.png",alt:"Bronify Logo",className:"w-8 h-8 object-contain"}),c.jsx("h1",{className:"text-white text-2xl font-bold tracking-tight",children:"Bronify"})]}),c.jsx("nav",{className:"mb-6",children:c.jsxs("ul",{className:"space-y-2",children:[c.jsx("li",{children:c.jsxs("button",{onClick:()=>t("home"),className:`w-full text-left ${e==="home"?"text-white":"text-gray-400"} flex items-center gap-4 hover:text-lakers-gold transition p-2`,children:[c.jsx(vm,{size:24}),c.jsx("span",{className:"font-medium",children:"Home"})]})}),c.jsx("li",{children:c.jsxs("button",{onClick:()=>t("search"),className:`w-full text-left ${e==="search"?"text-white":"text-gray-400"} flex items-center gap-4 hover:text-white transition p-2`,children:[c.jsx(xc,{size:24}),c.jsx("span",{className:"font-medium",children:"Search"})]})}),c.jsx("li",{children:c.jsxs("button",{onClick:()=>t("recently-played"),className:`w-full text-left ${e==="recently-played"?"text-white":"text-gray-400"} flex items-center gap-4 hover:text-white transition p-2`,children:[c.jsx(H0,{size:24}),c.jsx("span",{className:"font-medium",children:"Recently Played"})]})}),c.jsx("li",{children:c.jsxs("button",{onClick:()=>t("liked-songs"),className:`w-full text-left ${e==="liked-songs"?"text-white":"text-gray-400"} flex items-center gap-4 hover:text-white transition p-2`,children:[c.jsx(xn,{size:24}),c.jsx("span",{className:"font-medium",children:"Liked Songs"})]})}),c.jsx("li",{children:c.jsxs("button",{onClick:()=>t("chat"),className:`w-full text-left ${e==="chat"?"text-white":"text-gray-400"} flex items-center gap-4 hover:text-white transition p-2`,children:[c.jsx(La,{size:24}),c.jsx("span",{className:"font-medium",children:"Chat with LeBron"})]})})]})}),c.jsx("div",{className:"mt-6",children:c.jsxs("div",{className:"bg-spotify-light p-4 rounded-lg",children:[c.jsx("h2",{className:"text-white font-bold mb-2",children:"Create a New Playlist"}),c.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"It's easy, we'll help you"}),c.jsx("button",{onClick:()=>s(!0),className:"bg-white text-spotify-black rounded-full py-1 px-4 text-sm font-bold hover:scale-105 transition",children:"Create playlist"})]})}),c.jsxs("div",{className:"mt-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-gray-400 text-sm uppercase font-bold",children:"Playlists"}),c.jsx(xm,{size:20,className:"text-gray-400 cursor-pointer hover:text-white",onClick:()=>s(!0)})]}),i.length===0?c.jsx("div",{className:"text-gray-400 text-sm text-center py-4",children:"No playlists yet. Create one to get started!"}):c.jsx("ul",{className:"space-y-2",children:i.map(l=>c.jsx("li",{className:"text-gray-400 hover:text-white cursor-pointer group",children:c.jsxs("button",{onClick:()=>n(l),className:"w-full text-left flex items-center justify-between",children:[c.jsx("span",{className:"truncate",children:l.name}),c.jsx(xn,{size:14,className:"opacity-0 group-hover:opacity-100 text-lakers-gold transition-opacity"})]})},l.id))})]}),c.jsx(vx,{isOpen:r,onClose:()=>s(!1),onPlaylistCreated:o})]})})},_x=({audioUrl:t,isPlaying:e,onTimeUpdate:n,onEnded:r,volume:s,seekTime:i})=>{const[a,o]=j.useState(null),[l,u]=j.useState(null),[d,h]=j.useState(!0),[p,y]=j.useState(!1);return j.useEffect(()=>{const w=()=>{const g=new Audio;return g.preload="metadata",g.crossOrigin="anonymous",g};l&&(l.pause(),l.src="",l.load());const v=w();if(u(v),!t){o("No audio URL provided"),h(!1);return}h(!0),o(null),v.src=t,v.volume=s,v.load();const k=()=>{p||n(v.currentTime,v.duration)},m=()=>{h(!1),o(null),e&&v.play().catch(console.error)},f=g=>{const _=g.currentTarget;console.error("Audio error:",_.error),o("Failed to load audio file. Please try again."),h(!1)};return v.addEventListener("canplay",m),v.addEventListener("timeupdate",k),v.addEventListener("ended",()=>{r&&r()}),v.addEventListener("error",f),()=>{v&&(v.removeEventListener("canplay",m),v.removeEventListener("error",f),v.removeEventListener("timeupdate",k),v.removeEventListener("ended",()=>{}),v.pause(),v.src="",v.load(),h(!1),o(null))}},[t]),j.useEffect(()=>{if(!(!l||d))if(e){const w=l.play();w!==void 0&&w.catch(v=>{console.error("Playback error:",v),o("Playback failed. Please try again.")})}else l.pause()},[e,d,t]),j.useEffect(()=>{l&&!d&&(l.volume=s)},[s]),j.useEffect(()=>{if(l&&i!==void 0&&!d&&l.duration){const w=Math.min(Math.max(0,i),l.duration);l.currentTime=w,n(w,l.duration)}},[i,d]),c.jsxs("div",{className:"relative",children:[a&&c.jsx("div",{className:"absolute top-0 left-0 right-0 text-red-500 text-sm bg-black bg-opacity-80 p-2 rounded-t text-center",role:"alert",children:a}),d&&!a&&c.jsx("div",{className:"absolute top-0 left-0 right-0 text-white text-sm bg-black bg-opacity-80 p-2 rounded-t text-center",children:"Loading audio..."})]})},xx=({currentTrack:t,isPlaying:e,onPlayPause:n,onNext:r,onPrevious:s})=>{const[i,a]=j.useState(0),[o,l]=j.useState(0),[u,d]=j.useState(0),[h,p]=j.useState(.7),[y,w]=j.useState(!1),[v,k]=j.useState(!1),[m,f]=j.useState(!1),[g,_]=j.useState(!1),[x,S]=j.useState(!1),[b,C]=j.useState(void 0),A=j.useRef(null),T=j.useRef(null),I=j.useRef(h),Ae=(W,ge)=>{!x&&ge>0&&(l(W),d(ge),a(W/ge*100))},Ze=W=>{const ge=Math.floor(W/60),jn=Math.floor(W%60);return`${ge}:${jn<10?"0"+jn:jn}`},Yn=W=>{if(!A.current)return;const ge=A.current.getBoundingClientRect(),Kt=(W.clientX-ge.left)/ge.width*100;if(a(Math.max(0,Math.min(100,Kt))),u){const So=Kt/100*u;C(So)}},Zn=()=>{S(!0)},es=()=>{if(S(!1),A.current&&u){const W=A.current.getBoundingClientRect(),So=(((event==null?void 0:event.clientX)||0)-W.left)/W.width*100/100*u;C(So)}},ts=W=>{if(x&&A.current&&u){const ge=A.current.getBoundingClientRect(),Kt=(W.clientX-ge.left)/ge.width*100;a(Math.max(0,Math.min(100,Kt)))}},P=W=>{if(!T.current)return;const ge=T.current.getBoundingClientRect(),Kt=(W.clientX-ge.left)/ge.width;p(Math.max(0,Math.min(1,Kt))),Kt>0&&v&&k(!1)},$=()=>{v?(p(I.current),k(!1)):(I.current=h,p(0),k(!0))},L=()=>{n(!e)},Y=async()=>{if(!(!t||y)){w(!0);try{await Km(t.id,!t.is_liked),t.is_liked=!t.is_liked}catch(W){console.error("Failed to update like status:",W)}finally{w(!1)}}};j.useEffect(()=>{e&&t&&(px(t.id).catch(console.error),C(0))},[t]);const ie=()=>{g?C(0):xt()},er=()=>{t&&s()},xt=()=>{t&&r()},ns=()=>{f(!m)},$t=()=>{_(!g)};return j.useEffect(()=>{const W=()=>{x&&S(!1)};return document.addEventListener("mouseup",W),()=>{document.removeEventListener("mouseup",W)}},[x]),t?c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-spotify-dark p-2 md:p-4 border-t border-gray-800 flex items-center justify-between z-30",children:[c.jsxs("div",{className:"flex items-center gap-2 md:gap-3 w-1/3 md:w-1/4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("img",{src:t.cover_url,alt:t.title,className:"w-10 h-10 md:w-14 md:h-14 rounded object-cover",onError:W=>{const ge=W.target;ge.src="https://i.ibb.co/Df6bHf2J/Screenshot-2025-03-22-at-5-52-22-PM.png"}}),c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all flex items-center justify-center opacity-0 group-hover:opacity-100",children:c.jsx(wm,{size:24,className:"text-white cursor-pointer"})})]}),c.jsxs("div",{className:"hidden md:block",children:[c.jsx("h4",{className:"text-white text-sm font-medium truncate mb-0.5",children:t.title}),c.jsx("p",{className:"text-gray-400 text-xs truncate",children:t.artist})]}),c.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[c.jsx("button",{className:`text-${t.is_liked?"lakers-gold":"gray-400"} hover:text-lakers-gold transition`,onClick:Y,disabled:y,children:y?c.jsx(q0,{size:18,className:"animate-spin"}):c.jsx(xn,{size:18,fill:t.is_liked?"currentColor":"none"})}),c.jsx("button",{className:"text-gray-400 hover:text-white transition",children:c.jsx(xm,{size:18})})]})]}),c.jsxs("div",{className:"flex flex-col items-center w-1/3 md:w-2/4",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[c.jsx("button",{className:"hidden md:block text-gray-400 hover:text-white transition",onClick:ns,children:c.jsx(X0,{size:18})}),c.jsx("button",{className:`text-${m?"lakers-gold":"gray-400"} hover:text-white transition`,onClick:er,children:c.jsx(Y0,{size:20,"md:size":22})}),c.jsx("button",{className:"bg-white rounded-full p-1.5 md:p-2 hover:scale-105 transition",onClick:L,children:e?c.jsx(J0,{size:16,"md:size":18,fill:"black"}):c.jsx(Gn,{size:16,"md:size":18,fill:"black",className:"ml-0.5"})}),c.jsx("button",{className:"text-gray-400 hover:text-white transition",onClick:xt,children:c.jsx(Z0,{size:20,"md:size":22})}),c.jsx("button",{className:"hidden md:block text-gray-400 hover:text-white transition",onClick:$t,children:c.jsx(G0,{size:18})})]}),c.jsxs("div",{className:"w-full flex items-center gap-1 md:gap-2",children:[c.jsx("span",{className:"hidden md:block text-xs text-gray-400",children:Ze(o)}),c.jsx("div",{className:"h-1 flex-1 bg-gray-600 rounded-full cursor-pointer group",ref:A,onClick:Yn,onMouseMove:ts,onMouseDown:Zn,onMouseUp:es,children:c.jsx("div",{className:"h-1 bg-lakers-gold rounded-full relative",style:{width:`${i}%`},children:c.jsx("div",{className:`w-3 h-3 bg-white rounded-full absolute -right-1.5 -top-1 ${x?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity`})})}),c.jsx("span",{className:"hidden md:block text-xs text-gray-400",children:Ze(u)})]})]}),c.jsxs("div",{className:"hidden md:flex items-center gap-2 w-1/4 justify-end",children:[c.jsx("button",{className:"text-gray-400 hover:text-white",onClick:$,children:v||h===0?c.jsx(hh,{size:20}):c.jsx(dh,{size:20})}),c.jsx("div",{className:"w-24 h-1 bg-gray-600 rounded-full cursor-pointer",ref:T,onClick:P,children:c.jsx("div",{className:"h-1 bg-white rounded-full relative group",style:{width:`${h*100}%`},children:c.jsx("div",{className:"w-3 h-3 bg-white rounded-full absolute -right-1.5 -top-1 opacity-0 group-hover:opacity-100 transition-opacity"})})})]}),c.jsx("div",{className:"flex md:hidden items-center gap-2 w-1/3 justify-end",children:c.jsx("button",{className:"text-gray-400 hover:text-white p-2",onClick:$,children:v||h===0?c.jsx(hh,{size:20}):c.jsx(dh,{size:20})})}),c.jsx(_x,{audioUrl:t.audio_url,isPlaying:e,onTimeUpdate:Ae,seekTime:b,onEnded:ie,volume:v?0:h})]}):null},Xn=()=>c.jsxs("header",{className:"hidden md:flex justify-between items-center p-4 sticky top-0 z-20 backdrop-blur-md bg-opacity-80 bg-spotify-black",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"bg-black bg-opacity-70 rounded-full p-1",children:c.jsx(z0,{size:20,"md:size":24,className:"text-white"})}),c.jsx("button",{className:"bg-black bg-opacity-70 rounded-full p-1",children:c.jsx(B0,{size:20,"md:size":24,className:"text-white"})})]}),c.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[c.jsx("a",{href:"https://www.tiktok.com/@bronify_solana?_t=ZT-8uuUhrCBlnC&_r=1",target:"_blank",rel:"noopener noreferrer",className:"hover:scale-110 transition-transform p-1.5",children:c.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20","md:width":"24","md:height":"24",fill:"#FDB927",children:c.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64c.298-.002.595.042.88.13V9.4a6.37 6.37 0 0 0-1-.05A6.34 6.34 0 0 0 3 15.69a6.34 6.34 0 0 0 10.09 5.12 6.47 6.47 0 0 0 .58-.46 6.34 6.34 0 0 0 2.33-4.92V7.83a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1.18.74z"})})}),c.jsx("a",{href:"https://x.com/BronifySolana",target:"_blank",rel:"noopener noreferrer",className:"hover:scale-110 transition-transform",children:c.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"#FDB927",children:c.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}),c.jsx("a",{href:"https://t.me/BronifySolana",target:"_blank",rel:"noopener noreferrer",className:"hover:scale-110 transition-transform",children:c.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"#FDB927",children:c.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})})]})]}),kx=({title:t,artist:e,cover:n,playedAt:r,onClick:s})=>c.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-spotify-light rounded-md cursor-pointer transition group",onClick:s,children:[c.jsx("img",{src:n,alt:t,className:"w-12 h-12 rounded-md shadow-md"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"text-white text-sm font-medium truncate",children:t}),c.jsx("p",{className:"text-gray-400 text-xs truncate",children:e})]}),c.jsxs("div",{className:"flex items-center text-gray-400 text-xs",children:[c.jsx(_c,{size:12,className:"mr-1"}),c.jsx("span",{children:r})]})]}),Sx=({onTrackSelect:t})=>{const[e,n]=j.useState([]),[r,s]=j.useState([]),[i,a]=j.useState([]),[o,l]=j.useState(!0),[u,d]=j.useState(null);return j.useEffect(()=>{(async()=>{try{const p=await ho(),y=await Gm(),w=await Qm();n(p),s(y),a(w)}catch(p){d("Failed to load tracks"),console.error("Error fetching tracks:",p)}finally{l(!1)}})()},[]),c.jsxs("div",{className:"bg-gradient-to-b from-lakers-purple to-spotify-black min-h-screen pb-24",children:[c.jsx(Xn,{}),c.jsxs("main",{className:"px-6 py-6",children:[e.length>0&&c.jsxs("section",{className:"mb-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-white text-2xl font-bold",children:"LeBron's Songs"}),c.jsx("a",{href:"#",className:"text-gray-400 text-sm font-bold hover:underline",children:"Show all"})]}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map((h,p)=>c.jsxs("div",{className:"bg-spotify-light hover:bg-gray-700 transition rounded-md overflow-hidden cursor-pointer group",onClick:()=>t(h),children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:h.cover_url,alt:h.title,className:"w-full aspect-square object-cover bg-spotify-light",onError:y=>{const w=y.target;w.src="https://i.ibb.co/Df6bHf2J/Screenshot-2025-03-22-at-5-52-22-PM.png"}}),c.jsx("button",{className:"absolute bottom-2 right-2 bg-lakers-gold p-3 rounded-full shadow-lg opacity-0 translate-y-2 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-300",onClick:y=>{y.stopPropagation(),t(h)},children:c.jsx(Gn,{size:20,className:"text-black ml-0.5",fill:"black"})})]}),c.jsxs("div",{className:"p-3",children:[c.jsx("h3",{className:"text-white font-bold truncate",children:h.title}),c.jsx("p",{className:"text-gray-400 text-sm truncate",children:h.artist})]})]},h.id))})]}),c.jsxs("section",{className:"mb-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-white text-2xl font-bold",children:"Recently Played"}),c.jsx("a",{href:"#",className:"text-gray-400 text-sm font-bold hover:underline",children:"Show all"})]}),c.jsx("div",{className:"bg-spotify-light bg-opacity-30 rounded-lg p-4",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(h=>c.jsx(kx,{title:h.title,artist:h.artist,cover:h.cover_url,playedAt:new Date(h.last_played).toLocaleString(),onClick:()=>t(h)},h.id))})})]})]})]})},bx=({tracks:t,onTrackSelect:e})=>c.jsxs("div",{className:"w-full",children:[c.jsxs("div",{className:"grid grid-cols-[16px_4fr_3fr_1fr] gap-4 px-6 py-2 border-b border-gray-800 text-gray-400 text-sm",children:[c.jsx("div",{children:"#"}),c.jsx("div",{children:"TITLE"}),c.jsx("div",{children:"ALBUM"}),c.jsx("div",{className:"flex justify-end",children:c.jsx(_c,{size:16})})]}),c.jsx("div",{className:"text-gray-400",children:t.map((n,r)=>c.jsxs("div",{className:"grid grid-cols-[16px_4fr_3fr_1fr] gap-4 px-6 py-2 hover:bg-spotify-light cursor-pointer group",onClick:()=>e(n),children:[c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx("span",{className:"group-hover:hidden",children:r+1}),c.jsx(Gn,{size:14,className:"hidden group-hover:block text-white"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:n.cover_url,alt:n.title,className:"w-10 h-10 object-cover bg-spotify-light",onError:s=>{const i=s.target;i.src="https://i.ibb.co/Df6bHf2J/Screenshot-2025-03-22-at-5-52-22-PM.png"}}),c.jsxs("div",{children:[c.jsx("p",{className:"text-white",children:n.title}),c.jsx("p",{className:"text-sm",children:n.artist})]})]}),c.jsx("div",{className:"flex items-center",children:n.album}),c.jsx("div",{className:"flex items-center justify-end",children:n.duration})]},n.id))})]}),Ex=({playlist:t,onTrackSelect:e})=>{const[n,r]=j.useState(!1),[s,i]=j.useState([]),[a,o]=j.useState([]),[l,u]=j.useState(!1),[d,h]=j.useState(""),[p,y]=j.useState(!0),[w,v]=j.useState(null);if(!t)return c.jsx("div",{className:"flex items-center justify-center min-h-screen text-gray-400",children:c.jsx("p",{children:"Select a playlist to view its contents"})});j.useEffect(()=>{(async()=>{try{const[g,_]=await Promise.all([gx(t.id),ho()]);i(g),o(_.filter(x=>!g.find(S=>S.id===x.id)))}catch(g){console.error("Failed to load tracks:",g),v("Failed to load tracks")}finally{y(!1)}})()},[t.id]);const k=()=>{console.log("Sharing playlist...")},m=async()=>{if(d){u(!0);try{await yx(t.id,d);const f=a.find(g=>g.id===d);f&&(f.cover_url||(f.cover_url="https://i.ibb.co/Df6bHf2J/Screenshot-2025-03-22-at-5-52-22-PM.png"),i([...s,f]),o(a.filter(g=>g.id!==d))),h("")}catch(f){console.error("Failed to add track:",f),v("Failed to add track")}finally{u(!1)}}};return c.jsxs("div",{className:"bg-gradient-to-b from-lakers-purple to-spotify-black min-h-screen",children:[c.jsx(Xn,{}),c.jsxs("main",{children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-spotify-black pointer-events-none"}),c.jsxs("div",{className:"flex flex-col md:flex-row items-center px-6 py-6 gap-6 relative z-10",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("img",{src:t.custom_cover_url||t.cover_url,alt:t.name,className:"shadow-2xl w-48 h-48 md:w-60 md:h-60 object-cover rounded-lg",onError:f=>{const g=f.target;g.src="https://i.ibb.co/Df6bHf2J/Screenshot-2025-03-22-at-5-52-22-PM.png"}}),c.jsx("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-30 transition-opacity rounded-lg"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("span",{className:"text-white text-sm bg-black bg-opacity-50 px-3 py-1 rounded-full",children:"PLAYLIST"})}),c.jsx("h1",{className:"text-white text-4xl md:text-7xl font-extrabold my-2",children:t.name}),c.jsx("p",{className:"text-gray-400 text-sm max-w-2xl",children:t.description}),c.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[c.jsx("img",{src:"https://i.ibb.co/SXGYvXDD/Screenshot-2025-03-21-at-12-15-30-PM-modified.png",alt:"Creator",className:"w-6 h-6 rounded-full"}),c.jsx("span",{className:"text-white font-bold ml-2",children:"Bronify"}),c.jsx("span",{className:"mx-1 text-gray-400",children:""}),c.jsxs("span",{className:"text-gray-400",children:[s.length," songs"]})]})]})]})]}),c.jsxs("div",{className:"px-6 py-4 flex items-center gap-4 bg-gradient-to-b from-[rgba(85,37,131,0.3)] to-spotify-black sticky top-0 z-20 backdrop-blur-md flex-wrap",children:[c.jsx("button",{className:"bg-lakers-gold text-black rounded-full w-14 h-14 flex items-center justify-center shadow-xl hover:scale-105 transition",children:c.jsx(Gn,{size:28,fill:"black"})}),c.jsx("button",{className:`text-${n?"lakers-gold":"gray-400"} hover:text-lakers-gold transition`,onClick:()=>r(!n),children:c.jsx(xn,{size:32,fill:n?"currentColor":"none"})}),c.jsx("button",{className:"text-gray-400 hover:text-white transition",onClick:k,children:c.jsx(Q0,{size:24})}),c.jsx("button",{className:"text-gray-400 hover:text-white transition ml-auto",children:c.jsx(wm,{size:24})}),c.jsxs("div",{className:"w-full mt-4 flex gap-2",children:[c.jsxs("select",{value:d,onChange:f=>h(f.target.value),className:"flex-1 bg-spotify-light text-white rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-lakers-gold",children:[c.jsx("option",{value:"",children:"Select a track to add"}),a.map(f=>c.jsxs("option",{value:f.id,children:[f.title," - ",f.artist]},f.id))]}),c.jsx("button",{onClick:m,disabled:!d||l,className:"bg-lakers-gold text-black px-6 py-2 rounded-full font-bold hover:bg-opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Adding...":"Add Track"})]})]}),c.jsxs("div",{className:"px-4 py-4 relative z-10",children:[w&&c.jsx("div",{className:"text-red-500 bg-red-500 bg-opacity-10 p-4 rounded-lg mb-4",children:w}),p?c.jsx("div",{className:"flex justify-center py-12",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-lakers-gold"})}):c.jsx(bx,{tracks:s.map(f=>({...f,cover_url:f.cover_url||"https://i.ibb.co/Df6bHf2J/Screenshot-2025-03-22-at-5-52-22-PM.png"})),onTrackSelect:e})]})]})]})},jx=({currentTrack:t,onTrackSelect:e})=>t?c.jsxs("div",{className:"bg-gradient-to-b from-lakers-purple to-spotify-black min-h-screen pb-24",children:[c.jsx(Xn,{}),c.jsx("main",{className:"px-6 py-6",children:c.jsxs("div",{className:"flex flex-col items-center gap-8 mb-8",children:[c.jsx("div",{className:"relative w-64 h-64",children:c.jsx("img",{src:t.cover_url,alt:t.title,className:"w-full h-full object-cover rounded-lg shadow-2xl bg-spotify-light",onError:n=>{const r=n.target;r.src="https://i.ibb.co/Df6bHf2J/Screenshot-2025-03-22-at-5-52-22-PM.png"}})}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-white text-sm bg-black bg-opacity-50 px-3 py-1 rounded-full w-fit",children:"TRACK"}),c.jsx("h1",{className:"text-white text-4xl font-bold mt-2 text-center",children:t.title}),c.jsx("p",{className:"text-gray-400 text-lg mt-2 text-center",children:t.artist}),c.jsx("button",{className:`text-${t.is_liked?"lakers-gold":"gray-400"} hover:text-lakers-gold transition mt-4 mx-auto`,children:c.jsx(xn,{size:28,fill:t.is_liked?"currentColor":"none"})})]})]})})]}):c.jsx("div",{className:"flex items-center justify-center min-h-screen text-gray-400",children:c.jsx("p",{children:"No track is currently playing"})});var et={ENABLED:typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug")!==-1,LEVEL:0,PREFIX:"GiphyJS",debug:(...t)=>{et.ENABLED&&et.LEVEL<=0&&console.debug(et.PREFIX,...t)},info:(...t)=>{et.ENABLED&&et.LEVEL<=1&&console.info(et.PREFIX,...t)},warn:(...t)=>{et.ENABLED&&et.LEVEL<=2&&console.warn(et.PREFIX,...t)},error:(...t)=>{et.ENABLED&&et.LEVEL<=3&&console.error(et.PREFIX,...t)}},Pn="",Xm=16,Cx=()=>{let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length;for(let r=0;r<Xm;r++)t+=e.charAt(Math.floor(Math.random()*n));return t},Px=()=>{if(!Pn){try{Pn=sessionStorage.getItem("giphyPingbackId")}catch{}if(!Pn){const t=new Date().getTime().toString(16);try{Pn=`${t}${qm().replace(/-/g,"")}`.substring(0,Xm)}catch{Pn=Cx()}try{sessionStorage.setItem("giphyPingbackId",Pn)}catch{}}}return Pn},Nx=Px,Mi=null;new Promise(t=>{typeof Image>"u"&&t(!1);const e=new Image;e.onload=()=>{Mi=!0,t(Mi)},e.onerror=()=>{Mi=!1,t(Mi)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var ys=(typeof window<"u"?window:global)||{};ys._GIPHY_SDK_HEADERS_=ys._GIPHY_SDK_HEADERS_||(ys.Headers?new ys.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var Ym=()=>ys._GIPHY_SDK_HEADERS_,Ch=(t,e)=>{var n;return(n=Ym())==null?void 0:n.set(t,e)},Tx=Object.defineProperty,Rx=Object.defineProperties,Ax=Object.getOwnPropertyDescriptors,Ox=Object.getOwnPropertyNames,Ph=Object.getOwnPropertySymbols,$x=Object.prototype.hasOwnProperty,Ix=Object.prototype.propertyIsEnumerable,Nh=(t,e,n)=>e in t?Tx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jt=(t,e)=>{for(var n in e||(e={}))$x.call(e,n)&&Nh(t,n,e[n]);if(Ph)for(var n of Ph(e))Ix.call(e,n)&&Nh(t,n,e[n]);return t},tl=(t,e)=>Rx(t,Ax(e)),Lx=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),Mx=(t,e)=>function(){return e||(0,t[Ox(t)[0]])((e={exports:{}}).exports,e),e.exports},Dx=(t,e,n)=>new Promise((r,s)=>{var i=l=>{try{o(n.next(l))}catch(u){s(u)}},a=l=>{try{o(n.throw(l))}catch(u){s(u)}},o=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,a);o((n=n.apply(t,e)).next())}),Fx=Mx({"package.json"(t,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.6.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),Ux=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],zx=["suppress_chrome","is_public","is_verified"],Th=t=>e=>t[e]=!!t[e],Bx=t=>typeof t=="string"?t:t.text,Zm=(t,e="")=>{const n=jt({},t);n.id=String(n.id),n.tags=(n.tags||[]).map(Bx),n.bottle_data||(n.bottle_data={}),n.response_id=e,Ux.forEach(Th(n)),Object.keys(n.images||{}).forEach(s=>{const i=n.images[s];i.width=parseInt(i.width),i.height=parseInt(i.height)});const{user:r}=n;if(r){const s=jt({},r);zx.forEach(Th(s)),n.user=s}return n},Rh=t=>{const{response_id:e}=t.meta;return t.data=Zm(t.data,e),t},It=t=>{const{response_id:e}=t.meta;return t.data=t.data.map(n=>Zm(n,e)),t},Hx=(typeof window<"u"?window:global)||{},Vx=Hx.GIPHY_API_URL||"https://api.giphy.com/v1/",eg=class extends Error{constructor(t,e,n=0,r=""){super(t),this.url=e,this.status=n,this.statusText=r}},Wx=class extends eg{},Ah=eg,qx="@giphy/js-fetch-api: ",Jx="Error fetching",Gx=t=>t,mt={},Kx=6e4,Qx=6e3,Xx=()=>{const t=Date.now();Object.keys(mt).forEach(e=>{const n=mt[e].isError?Qx:Kx;t-mt[e].ts>=n&&delete mt[e]})};function Yx(t,e={}){const{apiVersion:n=1,noCache:r=!1,normalizer:s=Gx}=e,i=Vx.replace(/\/v\d+\/$/,`/v${n}/`);if(Xx(),!mt[t]||r){const a=`${i}${t}`,o=()=>Dx(this,null,function*(){var l,u;let d;try{const h=yield fetch(a,{method:"get"});if(h.ok){const p=yield h.json();if((l=p.meta)!=null&&l.response_id)return s(p);throw{message:"synthetic response"}}else{let p=Jx;try{const w=yield h.json();w.message&&(p=w.message),(u=w.meta)!=null&&u.msg&&(p=w.meta.msg)}catch{}mt[t]&&(mt[t].isError=!0);let y=Ah;p==="This content is not available in your location"&&(y=Wx),d=new y(`${qx}${p}`,a,h.status,h.statusText)}}catch(h){d=new Ah(h.message,a),mt[t]&&(mt[t].isError=!0)}throw d});mt[t]={request:o(),ts:Date.now()}}return mt[t].request}var $e=Yx,nl=t=>t&&t.type?t.type:"gifs",Zx=class{constructor(t,e={}){this.getQS=(n={})=>new URLSearchParams(jt(tl(jt({},n),{api_key:this.apiKey,pingback_id:Nx()}),this.qsParams)).toString(),this.apiKey=t,this.qsParams=e}categories(t){return $e(`gifs/categories?${this.getQS(t)}`)}gif(t,e){const n=e!=null&&e.internal?"internal/":"";return $e(`${n}gifs/${t}?${this.getQS()}`,{normalizer:Rh})}gifs(t,e){return Array.isArray(t)?$e(`gifs?${this.getQS({ids:t.join(",")})}`,{normalizer:It}):$e(`gifs/categories/${t}/${e}?${this.getQS()}`,{normalizer:It})}emoji(t){return $e(`emoji?${this.getQS(t)}`,{normalizer:It})}emojiDefaultVariations(t){return $e(`emoji?${this.getQS(t)}`,{apiVersion:2,normalizer:It})}emojiVariations(t){return $e(`emoji/${t}/variations?${this.getQS()}`,{apiVersion:2,normalizer:It})}animate(t,e={}){const n=this.getQS(tl(jt({},e),{m:t}));return $e(`text/animate?${n}`,{normalizer:It})}search(t,e={}){const n=e.channel?`@${e.channel} ${t}`:t;let r;e.type==="text"&&(r=!0);const s=this.getQS(tl(jt({rating:"pg-13"},e),{q:n,excludeDynamicResults:r}));return $e(`${nl(e)}/search?${s}`,{normalizer:It})}subcategories(t,e){return $e(`gifs/categories/${t}?${this.getQS(e)}`)}trending(t={}){return $e(`${nl(t)}/trending?${this.getQS(jt({rating:"pg-13"},t))}`,{normalizer:It})}random(t){return $e(`${nl(t)}/random?${this.getQS(jt({rating:"pg-13"},t))}`,{noCache:!0,normalizer:Rh})}related(t,e={}){const{type:n="gifs"}=e;return $e(`${n}/related?${this.getQS(jt({gif_id:t,rating:"pg-13"},e))}`,{normalizer:It})}channels(t,e={}){return $e(`channels/search?${this.getQS(jt({q:t,rating:"pg-13"},e))}`)}},e1=Zx,Oh;if(typeof Lx<"u"){const{version:t}=Fx();(Oh=Ym())!=null&&Oh.get("X-GIPHY-SDK-NAME")||(Ch("X-GIPHY-SDK-NAME","FetchAPI"),Ch("X-GIPHY-SDK-VERSION",t))}const Cc=new e1("GlVGYHkr3WSBnllca54iNt0yFbjz7L65"),Di=["lebron dunk","lebron celebration","lebron meme","lebron dance","lebron lakers","lebron james reaction","lebron taco tuesday","lebron crown"];async function t1(t){try{const{data:e}=await Cc.search(t+" lebron james",{limit:20,rating:"g",lang:"en",sort:"relevant"});return e.map(n=>({id:n.id,title:n.title,url:n.images.original.url,preview:n.images.fixed_height.url,small:n.images.fixed_width_small.url}))}catch(e){return console.error("Error fetching GIFs:",e),[]}}async function n1(){try{const{data:t}=await Cc.search("lebron james highlights",{limit:15,rating:"g",sort:"relevant"});return t.map(e=>({id:e.id,title:e.title,url:e.images.original.url,preview:e.images.fixed_height.url,small:e.images.fixed_width_small.url}))}catch(t){return console.error("Error fetching trending GIFs:",t),[]}}async function $h(t){try{const{data:e}=await Cc.search(t,{limit:12,rating:"g",sort:"relevant"});return e.map(n=>({id:n.id,title:n.title,url:n.images.original.url,preview:n.images.fixed_height.url,small:n.images.fixed_width_small.url}))}catch(e){return console.error("Error fetching category GIFs:",e),[]}}const r1=({onTrackSelect:t})=>{const[e,n]=j.useState(""),[r,s]=j.useState([]),[i,a]=j.useState(!1),[o,l]=j.useState([]),[u,d]=j.useState([]),[h,p]=j.useState({}),[y,w]=j.useState("songs"),[v,k]=j.useState(Di[0]),[m,f]=j.useState([]);j.useEffect(()=>{(async()=>{try{const S=await ho();f(S)}catch(S){console.error("Failed to load tracks:",S)}})()},[]),j.useEffect(()=>{(async()=>{const S=await n1();d(S);const b=await $h(Di[0]);p(C=>({...C,[Di[0]]:b}))})()},[]),j.useEffect(()=>{(async()=>{if(!h[v]){const S=await $h(v);p(b=>({...b,[v]:S}))}})()},[v]),j.useEffect(()=>{if(e.length>0){a(!0);const x=setTimeout(async()=>{const S=m.filter(C=>C.title.toLowerCase().includes(e.toLowerCase())||C.artist.toLowerCase().includes(e.toLowerCase()));s(S);const b=await t1(e);l(b),a(!1)},500);return()=>clearTimeout(x)}else s([]),a(!1)},[e,m]);const g=()=>{n(""),s([])},_=x=>{n(x)};return c.jsxs("div",{className:"min-h-screen pb-24 relative",children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:'url("https://i.ibb.co/QFmJSNFW/81-Mo-V7q-Lkr-L-AC-UF1000-1000-QL80.jpg")',filter:"brightness(0.6)"}}),c.jsxs("div",{className:"relative z-10",children:[c.jsx(Xn,{}),c.jsxs("main",{className:"px-6 py-6",children:[c.jsx("div",{className:"mb-8",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(xc,{size:20,className:"text-gray-400"})}),c.jsx("input",{type:"text",placeholder:"What do you want to listen to?",value:e,onChange:x=>n(x.target.value),className:"bg-white text-gray-900 w-full pl-10 pr-10 py-3 rounded-full focus:outline-none focus:ring-2 focus:ring-lakers-gold text-sm font-medium placeholder-gray-500"}),e&&c.jsx("button",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:g,children:c.jsx(km,{size:20,className:"text-gray-500 hover:text-gray-700"})})]})}),e?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex gap-4 mb-6",children:[c.jsx("button",{className:`px-4 py-2 rounded-full text-sm font-medium ${y==="songs"?"bg-lakers-gold text-black":"bg-spotify-light text-white"}`,onClick:()=>w("songs"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(_m,{size:16}),c.jsx("span",{children:"Songs"})]})}),c.jsx("button",{className:`px-4 py-2 rounded-full text-sm font-medium ${y==="gifs"?"bg-lakers-gold text-black":"bg-spotify-light text-white"}`,onClick:()=>w("gifs"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(V0,{size:16}),c.jsx("span",{children:"GIFs"})]})})]}),c.jsxs("h2",{className:"text-white text-xl font-bold mb-4",children:['Results for "',e,'"']}),i&&c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-lakers-gold"})}),!i&&y==="songs"&&(r.length===0?c.jsxs("div",{className:"bg-spotify-light bg-opacity-30 rounded-lg p-6 text-center",children:[c.jsxs("p",{className:"text-white text-lg mb-2",children:['No results found for "',e,'"']}),c.jsx("p",{className:"text-gray-400",children:"Try searching for something else"})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(x=>c.jsxs("div",{className:"bg-spotify-light hover:bg-gray-700 transition rounded-md overflow-hidden cursor-pointer group flex items-center p-3 gap-3",onClick:()=>t(x),children:[c.jsxs("div",{className:"relative shrink-0",children:[c.jsx("img",{src:x.cover_url,alt:x.title,className:"w-14 h-14 object-cover rounded"}),c.jsx("button",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300",onClick:S=>{S.stopPropagation(),t(x)},children:c.jsx("div",{className:"bg-lakers-gold rounded-full p-2",children:c.jsx(Gn,{size:16,className:"text-black ml-0.5"})})})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"text-white font-medium truncate",children:x.title}),c.jsx("p",{className:"text-gray-400 text-sm truncate",children:x.artist})]})]},x.id))})),!i&&y==="gifs"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mb-6 flex gap-2 overflow-x-auto pb-2 hide-scrollbar",children:Di.map(x=>c.jsx("button",{onClick:()=>k(x),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap ${v===x?"bg-lakers-gold text-black":"bg-spotify-light text-white hover:bg-gray-700"}`,children:x},x))}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:o.map(x=>c.jsxs("div",{className:"bg-spotify-light rounded-lg overflow-hidden group cursor-pointer",onClick:()=>window.open(x.url,"_blank"),children:[c.jsxs("div",{className:"relative aspect-video",children:[c.jsx("img",{src:x.preview,alt:x.title,className:"w-full h-full object-cover",loading:"lazy"}),c.jsx("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-30 transition-opacity"})]}),c.jsx("div",{className:"p-3",children:c.jsx("p",{className:"text-white text-sm truncate",children:x.title})})]},x.id))})]})]}):y==="gifs"?c.jsxs(c.Fragment,{children:[c.jsxs("section",{className:"mb-8",children:[c.jsx("h2",{className:"text-white text-xl font-bold mb-4",children:"Trending LeBron GIFs"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:u.map(x=>c.jsxs("div",{className:"bg-spotify-light rounded-lg overflow-hidden group cursor-pointer",onClick:()=>window.open(x.url,"_blank"),children:[c.jsxs("div",{className:"relative aspect-video",children:[c.jsx("img",{src:x.preview,alt:x.title,className:"w-full h-full object-cover",loading:"lazy"}),c.jsx("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-30 transition-opacity"})]}),c.jsx("div",{className:"p-3",children:c.jsx("p",{className:"text-white text-sm truncate",children:x.title})})]},x.id))})]}),h[v]&&c.jsxs("section",{className:"mb-8",children:[c.jsx("h2",{className:"text-white text-xl font-bold mb-4",children:v}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:h[v].map(x=>c.jsxs("div",{className:"bg-spotify-light rounded-lg overflow-hidden group cursor-pointer",onClick:()=>window.open(x.url,"_blank"),children:[c.jsxs("div",{className:"relative aspect-video",children:[c.jsx("img",{src:x.preview,alt:x.title,className:"w-full h-full object-cover",loading:"lazy"}),c.jsx("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-30 transition-opacity"})]}),c.jsx("div",{className:"p-3",children:c.jsx("p",{className:"text-white text-sm truncate",children:x.title})})]},x.id))})]})]}):c.jsxs("section",{className:"mb-8",children:[c.jsx("h2",{className:"text-white text-xl font-bold mb-4",children:"LeBron's Songs"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:m.slice(0,6).map((x,S)=>c.jsxs("div",{onClick:()=>_(x.title),className:"bg-spotify-light hover:bg-gray-700 transition rounded-lg p-4 cursor-pointer flex items-center gap-3",children:[c.jsx("div",{className:"bg-lakers-gold w-8 h-8 flex items-center justify-center rounded-full text-black font-medium",children:S+1}),c.jsxs("div",{children:[c.jsx("span",{className:"text-white font-medium block",children:x.title}),c.jsx("span",{className:"text-gray-400 text-sm",children:x.artist})]})]},x.id))})]})]})]})]})},s1=({onTrackSelect:t})=>{const[e,n]=j.useState([]),[r,s]=j.useState(!0),[i,a]=j.useState(null);return j.useEffect(()=>{(async()=>{try{const l=await Gm();n(l)}catch(l){a("Failed to load recently played tracks"),console.error(l)}finally{s(!1)}})()},[]),r?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-lakers-gold"})}):i?c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-red-500",children:i})}):c.jsxs("div",{className:"bg-gradient-to-b from-lakers-purple to-spotify-black min-h-screen pb-24",children:[c.jsx(Xn,{}),c.jsxs("main",{className:"px-6 py-6",children:[c.jsxs("h1",{className:"text-white text-3xl font-bold mb-8 flex items-center gap-3",children:[c.jsx(_c,{size:32}),"Recently Played"]}),c.jsxs("div",{className:"space-y-2",children:[e.map(o=>c.jsxs("div",{className:"bg-spotify-light bg-opacity-60 hover:bg-opacity-100 transition rounded-lg p-4 flex items-center gap-4 cursor-pointer group",onClick:()=>t(o),children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:o.cover_url,alt:o.title,className:"w-12 h-12 rounded object-cover bg-spotify-light",onError:l=>{const u=l.target;u.src="https://i.ibb.co/Df6bHf2J/Screenshot-2025-03-22-at-5-52-22-PM.png"}}),c.jsx("button",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition",children:c.jsx(Gn,{size:20,className:"text-white"})})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-white font-medium",children:o.title}),c.jsx("p",{className:"text-gray-400 text-sm",children:o.artist})]}),c.jsx("div",{className:"text-gray-400 text-sm",children:new Date(o.last_played).toLocaleString()})]},o.id)),e.length===0&&c.jsx("div",{className:"text-center py-12 text-gray-400",children:c.jsx("p",{children:"No recently played tracks"})})]})]})]})},i1=({onTrackSelect:t})=>{const[e,n]=j.useState([]),[r,s]=j.useState(!0),[i,a]=j.useState(null);j.useEffect(()=>{(async()=>{try{const u=await fx();n(u)}catch(u){a("Failed to load liked tracks"),console.error(u)}finally{s(!1)}})()},[]);const o=async(l,u)=>{u.stopPropagation();try{await Km(l.id,!1),n(e.filter(d=>d.id!==l.id))}catch(d){console.error("Failed to unlike track:",d)}};return r?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-lakers-gold"})}):i?c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-red-500",children:i})}):c.jsxs("div",{className:"bg-gradient-to-b from-lakers-purple to-spotify-black min-h-screen pb-24",children:[c.jsx(Xn,{}),c.jsxs("main",{className:"px-6 py-6",children:[c.jsxs("h1",{className:"text-white text-3xl font-bold mb-8 flex items-center gap-3",children:[c.jsx(xn,{size:32,fill:"currentColor",className:"text-lakers-gold"}),"Liked Songs"]}),c.jsxs("div",{className:"space-y-2",children:[e.map(l=>c.jsxs("div",{className:"bg-spotify-light bg-opacity-60 hover:bg-opacity-100 transition rounded-lg p-4 flex items-center gap-4 cursor-pointer group",onClick:()=>t(l),children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:l.cover_url,alt:l.title,className:"w-12 h-12 rounded object-cover bg-spotify-light",onError:u=>{const d=u.target;d.src="https://i.ibb.co/Df6bHf2J/Screenshot-2025-03-22-at-5-52-22-PM.png"}}),c.jsx("button",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition",children:c.jsx(Gn,{size:20,className:"text-white"})})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-white font-medium",children:l.title}),c.jsx("p",{className:"text-gray-400 text-sm",children:l.artist})]}),c.jsx("button",{className:"text-lakers-gold hover:scale-110 transition",onClick:u=>o(l,u),children:c.jsx(xn,{size:24,fill:"currentColor"})})]},l.id)),e.length===0&&c.jsxs("div",{className:"text-center py-12 text-gray-400",children:[c.jsx("p",{children:"No liked songs yet"}),c.jsx("p",{className:"mt-2 text-sm",children:"Start liking songs to see them here"})]})]})]})]})},fu="RFC3986",pu={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},a1="RFC1738",o1=Array.isArray,St=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),rl=1024,l1=(t,e,n,r,s)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let a="";for(let o=0;o<i.length;o+=rl){const l=i.length>=rl?i.slice(o,o+rl):i,u=[];for(let d=0;d<l.length;++d){let h=l.charCodeAt(d);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||s===a1&&(h===40||h===41)){u[u.length]=l.charAt(d);continue}if(h<128){u[u.length]=St[h];continue}if(h<2048){u[u.length]=St[192|h>>6]+St[128|h&63];continue}if(h<55296||h>=57344){u[u.length]=St[224|h>>12]+St[128|h>>6&63]+St[128|h&63];continue}d+=1,h=65536+((h&1023)<<10|l.charCodeAt(d)&1023),u[u.length]=St[240|h>>18]+St[128|h>>12&63]+St[128|h>>6&63]+St[128|h&63]}a+=u.join("")}return a};function u1(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Ih(t,e){if(o1(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const c1=Object.prototype.hasOwnProperty,tg={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},Ct=Array.isArray,d1=Array.prototype.push,ng=function(t,e){d1.apply(t,Ct(e)?e:[e])},h1=Date.prototype.toISOString,le={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:l1,encodeValuesOnly:!1,format:fu,formatter:pu[fu],indices:!1,serializeDate(t){return h1.call(t)},skipNulls:!1,strictNullHandling:!1};function f1(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const sl={};function rg(t,e,n,r,s,i,a,o,l,u,d,h,p,y,w,v,k,m){let f=t,g=m,_=0,x=!1;for(;(g=g.get(sl))!==void 0&&!x;){const T=g.get(t);if(_+=1,typeof T<"u"){if(T===_)throw new RangeError("Cyclic object value");x=!0}typeof g.get(sl)>"u"&&(_=0)}if(typeof u=="function"?f=u(e,f):f instanceof Date?f=p==null?void 0:p(f):n==="comma"&&Ct(f)&&(f=Ih(f,function(T){return T instanceof Date?p==null?void 0:p(T):T})),f===null){if(i)return l&&!v?l(e,le.encoder,k,"key",y):e;f=""}if(f1(f)||u1(f)){if(l){const T=v?e:l(e,le.encoder,k,"key",y);return[(w==null?void 0:w(T))+"="+(w==null?void 0:w(l(f,le.encoder,k,"value",y)))]}return[(w==null?void 0:w(e))+"="+(w==null?void 0:w(String(f)))]}const S=[];if(typeof f>"u")return S;let b;if(n==="comma"&&Ct(f))v&&l&&(f=Ih(f,l)),b=[{value:f.length>0?f.join(",")||null:void 0}];else if(Ct(u))b=u;else{const T=Object.keys(f);b=d?T.sort(d):T}const C=o?String(e).replace(/\./g,"%2E"):String(e),A=r&&Ct(f)&&f.length===1?C+"[]":C;if(s&&Ct(f)&&f.length===0)return A+"[]";for(let T=0;T<b.length;++T){const I=b[T],Ae=typeof I=="object"&&typeof I.value<"u"?I.value:f[I];if(a&&Ae===null)continue;const Ze=h&&o?I.replace(/\./g,"%2E"):I,Yn=Ct(f)?typeof n=="function"?n(A,Ze):A:A+(h?"."+Ze:"["+Ze+"]");m.set(t,_);const Zn=new WeakMap;Zn.set(sl,m),ng(S,rg(Ae,Yn,n,r,s,i,a,o,n==="comma"&&v&&Ct(f)?null:l,u,d,h,p,y,w,v,k,Zn))}return S}function p1(t=le){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||le.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=fu;if(typeof t.format<"u"){if(!c1.call(pu,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=pu[n];let s=le.filter;(typeof t.filter=="function"||Ct(t.filter))&&(s=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in tg?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=le.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:le.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:le.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:le.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:le.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?le.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:le.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:le.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:le.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:le.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:le.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:le.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:le.strictNullHandling}}function m1(t,e={}){let n=t;const r=p1(e);let s,i;typeof r.filter=="function"?(i=r.filter,n=i("",n)):Ct(r.filter)&&(i=r.filter,s=i);const a=[];if(typeof n!="object"||n===null)return"";const o=tg[r.arrayFormat],l=o==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const u=new WeakMap;for(let p=0;p<s.length;++p){const y=s[p];r.skipNulls&&n[y]===null||ng(a,rg(n[y],y,o,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const d=a.join(r.delimiter);let h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),d.length>0?h+d:""}const cr="4.89.0";let Lh=!1,Is,sg,ig,mu,ag,og,lg,ug,cg;function g1(t,e={auto:!1}){if(Lh)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(Is)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${Is}'\``);Lh=e.auto,Is=t.kind,sg=t.fetch,ig=t.FormData,mu=t.File,ag=t.ReadableStream,og=t.getMultipartRequestOptions,lg=t.getDefaultAgent,ug=t.fileFromPath,cg=t.isFsReadStream}class y1{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function v1({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,s,i;try{n=fetch,r=Request,s=Response,i=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(a,o)=>({...o,body:new y1(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}Is||g1(v1(),{auto:!0});class O extends Error{}class ke extends O{constructor(e,n,r,s){super(`${ke.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"],this.error=n;const i=n;this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new fo({message:r,cause:yu(n)});const i=n==null?void 0:n.error;return e===400?new dg(e,i,r,s):e===401?new hg(e,i,r,s):e===403?new fg(e,i,r,s):e===404?new pg(e,i,r,s):e===409?new mg(e,i,r,s):e===422?new gg(e,i,r,s):e===429?new yg(e,i,r,s):e>=500?new vg(e,i,r,s):new ke(e,i,r,s)}}class st extends ke{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class fo extends ke{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Pc extends fo{constructor({message:e}={}){super({message:e??"Request timed out."})}}class dg extends ke{}class hg extends ke{}class fg extends ke{}class pg extends ke{}class mg extends ke{}class gg extends ke{}class yg extends ke{}class vg extends ke{}class wg extends O{constructor(){super("Could not parse response content as the length limit was reached")}}class _g extends O{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var Fi=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},Nn=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ve;class po{constructor(){Ve.set(this,void 0),this.buffer=new Uint8Array,Fi(this,Ve,null,"f")}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const s=[];let i;for(;(i=w1(this.buffer,Nn(this,Ve,"f")))!=null;){if(i.carriage&&Nn(this,Ve,"f")==null){Fi(this,Ve,i.index,"f");continue}if(Nn(this,Ve,"f")!=null&&(i.index!==Nn(this,Ve,"f")+1||i.carriage)){s.push(this.decodeText(this.buffer.slice(0,Nn(this,Ve,"f")-1))),this.buffer=this.buffer.slice(Nn(this,Ve,"f")),Fi(this,Ve,null,"f");continue}const a=Nn(this,Ve,"f")!==null?i.preceding-1:i.preceding,o=this.decodeText(this.buffer.slice(0,a));s.push(o),this.buffer=this.buffer.slice(i.index),Fi(this,Ve,null,"f")}return s}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new O(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new O(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new O("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}Ve=new WeakMap;po.NEWLINE_CHARS=new Set([`
`,"\r"]);po.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function w1(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function _1(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}function xg(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Tt{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let i=!1;try{for await(const a of x1(e,n))if(!i){if(a.data.startsWith("[DONE]")){i=!0;continue}if(a.event===null||a.event.startsWith("response.")){let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(o&&o.error)throw new ke(void 0,o.error,void 0,void 0);yield o}else{let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(a.event=="error")throw new ke(void 0,o.error,o.message,void 0);yield{event:a.event,data:o}}}i=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{i||n.abort()}}return new Tt(s,n)}static fromReadableStream(e,n){let r=!1;async function*s(){const a=new po,o=xg(e);for await(const l of o)for(const u of a.decode(l))yield u;for(const l of a.flush())yield l}async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const o of s())a||o&&(yield JSON.parse(o));a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||n.abort()}}return new Tt(i,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const a=r.next();e.push(a),n.push(a)}return i.shift()}});return[new Tt(()=>s(e),this.controller),new Tt(()=>s(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new ag({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:i,done:a}=await n.next();if(a)return s.close();const o=r.encode(JSON.stringify(i)+`
`);s.enqueue(o)}catch(i){s.error(i)}},async cancel(){var s;await((s=n.return)==null?void 0:s.call(n))}})}}async function*x1(t,e){if(!t.body)throw e.abort(),new O("Attempted to iterate over a response with no body");const n=new S1,r=new po,s=xg(t.body);for await(const i of k1(s))for(const a of r.decode(i)){const o=n.decode(a);o&&(yield o)}for(const i of r.flush()){const a=n.decode(i);a&&(yield a)}}async function*k1(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let i;for(;(i=_1(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class S1{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=b1(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function b1(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}const kg=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",Sg=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&mo(t),mo=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",E1=t=>Sg(t)||kg(t)||cg(t);async function bg(t,e,n){var s;if(t=await t,Sg(t))return t;if(kg(t)){const i=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const a=mo(i)?[await i.arrayBuffer()]:[i];return new mu(a,e,n)}const r=await j1(t);if(e||(e=P1(t)??"unknown_file"),!(n!=null&&n.type)){const i=(s=r[0])==null?void 0:s.type;typeof i=="string"&&(n={...n,type:i})}return new mu(r,e,n)}async function j1(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(mo(t))e.push(await t.arrayBuffer());else if(N1(t))for await(const r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(n=t==null?void 0:t.constructor)==null?void 0:n.name}; props: ${C1(t)}`);return e}function C1(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function P1(t){var e;return il(t.name)||il(t.filename)||((e=il(t.path))==null?void 0:e.split(/[\\/]/).pop())}const il=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},N1=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Mh=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",Wr=async t=>{const e=await T1(t.body);return og(e,t)},T1=async t=>{const e=new ig;return await Promise.all(Object.entries(t||{}).map(([n,r])=>gu(e,n,r))),e},gu=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(E1(n)){const r=await bg(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>gu(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>gu(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Ar={},R1=function(t,e,n,r,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n},A1=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ui;async function Eg(t){var a;const{response:e}=t;if(t.options.stream)return Or("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):Tt.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const n=e.headers.get("content-type"),r=(a=n==null?void 0:n.split(";")[0])==null?void 0:a.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const o=await e.json();return Or("response",e.status,e.url,e.headers,o),jg(o,e)}const i=await e.text();return Or("response",e.status,e.url,e.headers,i),i}function jg(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class go extends Promise{constructor(e,n=Eg){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new go(this.responsePromise,async n=>jg(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class O1{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:s,fetch:i}){this.baseURL=e,this.maxRetries=al("maxRetries",n),this.timeout=al("timeout",r),this.httpAgent=s,this.fetch=i??sg}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...F1(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${H1()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async s=>{const i=s&&mo(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:e,path:n,...s,body:i}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){var w;e={...e};const{method:r,path:s,query:i,headers:a={}}=e,o=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:Mh(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,l=this.calculateContentLength(o),u=this.buildURL(s,i);"timeout"in e&&al("timeout",e.timeout),e.timeout=e.timeout??this.timeout;const d=e.httpAgent??this.httpAgent??lg(u),h=e.timeout+1e3;typeof((w=d==null?void 0:d.options)==null?void 0:w.timeout)=="number"&&h>(d.options.timeout??0)&&(d.options.timeout=h),this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const p=this.buildHeaders({options:e,headers:a,contentLength:l,retryCount:n});return{req:{method:r,...o&&{body:o},headers:p,...d&&{agent:d},signal:e.signal??null},url:u,timeout:e.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:s}){const i={};r&&(i["content-length"]=r);const a=this.defaultHeaders(e);return zh(i,a),zh(i,n),Mh(e.body)&&Is!=="node"&&delete i["content-type"],Bi(a,"x-stainless-retry-count")===void 0&&Bi(n,"x-stainless-retry-count")===void 0&&(i["x-stainless-retry-count"]=String(s)),Bi(a,"x-stainless-timeout")===void 0&&Bi(n,"x-stainless-timeout")===void 0&&e.timeout&&(i["x-stainless-timeout"]=String(e.timeout)),this.validateHeaders(i,n),i}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,s){return ke.generate(e,n,r,s)}request(e,n=null){return new go(this.makeRequest(e,n))}async makeRequest(e,n){var h,p;const r=await e,s=r.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(r);const{req:i,url:a,timeout:o}=this.buildRequest(r,{retryCount:s-n});if(await this.prepareRequest(i,{url:a,options:r}),Or("request",a,r,i.headers),(h=r.signal)!=null&&h.aborted)throw new st;const l=new AbortController,u=await this.fetchWithTimeout(a,i,o,l).catch(yu);if(u instanceof Error){if((p=r.signal)!=null&&p.aborted)throw new st;if(n)return this.retryRequest(r,n);throw u.name==="AbortError"?new Pc:new fo({cause:u})}const d=I1(u.headers);if(!u.ok){if(n&&this.shouldRetry(u)){const f=`retrying, ${n} attempts remaining`;return Or(`response (error; ${f})`,u.status,a,d),this.retryRequest(r,n,d)}const y=await u.text().catch(f=>yu(f).message),w=U1(y),v=w?void 0:y;throw Or(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,u.status,a,d,v),this.makeStatusError(u.status,w,v,d)}return{response:u,options:r,controller:l}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new $1(this,r,e)}buildURL(e,n){const r=B1(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return Pg(s)||(n={...s,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new O(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,s){const{signal:i,...a}=n||{};i&&i.addEventListener("abort",()=>s.abort());const o=setTimeout(()=>s.abort(),r),l={signal:s.signal,...a};return l.method&&(l.method=l.method.toUpperCase()),this.fetch.call(void 0,e,l).finally(()=>{clearTimeout(o)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let s;const i=r==null?void 0:r["retry-after-ms"];if(i){const o=parseFloat(i);Number.isNaN(o)||(s=o)}const a=r==null?void 0:r["retry-after"];if(a&&!s){const o=parseFloat(a);Number.isNaN(o)?s=Date.parse(a)-Date.now():s=o*1e3}if(!(s&&0<=s&&s<60*1e3)){const o=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,o)}return await ci(s),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,a=Math.min(.5*Math.pow(2,i),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${cr}`}}class Cg{constructor(e,n,r,s){Ui.set(this,void 0),R1(this,Ui,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new O("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[s,i]of r)e.url.searchParams.set(s,i);n.query=void 0,n.path=e.url.toString()}return await A1(this,Ui,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Ui=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class $1 extends go{constructor(e,n,r){super(n,async s=>new r(e,s.response,await Eg(s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const I1=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),L1={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},me=t=>typeof t=="object"&&t!==null&&!Pg(t)&&Object.keys(t).every(e=>Ng(L1,e)),M1=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cr,"X-Stainless-OS":Fh(Deno.build.os),"X-Stainless-Arch":Dh(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cr,"X-Stainless-OS":Fh(process.platform),"X-Stainless-Arch":Dh(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=D1();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function D1(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,a=r[3]||0;return{browser:e,version:`${s}.${i}.${a}`}}}return null}const Dh=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Fh=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Uh;const F1=()=>Uh??(Uh=M1()),U1=t=>{try{return JSON.parse(t)}catch{return}},z1=/^[a-z][a-z0-9+.-]*:/i,B1=t=>z1.test(t),ci=t=>new Promise(e=>setTimeout(e,t)),al=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new O(`${t} must be an integer`);if(e<0)throw new O(`${t} must be a positive integer`);return e},yu=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},zi=t=>{var e,n,r,s;if(typeof process<"u")return((e=Ar==null?void 0:Ar[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(s=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:s.trim()};function Pg(t){if(!t)return!0;for(const e in t)return!1;return!0}function Ng(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zh(t,e){for(const n in e){if(!Ng(e,n))continue;const r=n.toLowerCase();if(!r)continue;const s=e[n];s===null?delete t[r]:s!==void 0&&(t[r]=s)}}const Bh=new Set(["authorization","api-key"]);function Or(t,...e){if(typeof process<"u"&&(Ar==null?void 0:Ar.DEBUG)==="true"){const n=e.map(r=>{if(!r)return r;if(r.headers){const i={...r,headers:{...r.headers}};for(const a in r.headers)Bh.has(a.toLowerCase())&&(i.headers[a]="REDACTED");return i}let s=null;for(const i in r)Bh.has(i.toLowerCase())&&(s??(s={...r}),s[i]="REDACTED");return s??r});console.log(`OpenAI:DEBUG:${t}`,...n)}}const H1=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),V1=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",W1=t=>typeof(t==null?void 0:t.get)=="function",Bi=(t,e)=>{var r;const n=e.toLowerCase();if(W1(t)){const s=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(i,a,o)=>a+o.toUpperCase());for(const i of[e,n,e.toUpperCase(),s]){const a=t.get(i);if(a)return a}}for(const[s,i]of Object.entries(t))if(s.toLowerCase()===n)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${e} header, using the first entry.`),i[0]):i};function ol(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class Nc extends Cg{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Be extends Cg{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const n=(r=e[e.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class z{constructor(e){this._client=e}}let Tg=class extends z{list(e,n={},r){return me(n)?this.list(e,{},n):this._client.getAPIList(`/chat/completions/${e}/messages`,q1,{query:n,...r})}},yo=class extends z{constructor(){super(...arguments),this.messages=new Tg(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return me(e)?this.list({},e):this._client.getAPIList("/chat/completions",vo,{query:e,...n})}del(e,n){return this._client.delete(`/chat/completions/${e}`,n)}};class vo extends Be{}class q1 extends Be{}yo.ChatCompletionsPage=vo;yo.Messages=Tg;let wo=class extends z{constructor(){super(...arguments),this.completions=new yo(this._client)}};wo.Completions=yo;wo.ChatCompletionsPage=vo;class Rg extends z{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n==null?void 0:n.headers},__binaryResponse:!0})}}class Ag extends z{create(e,n){return this._client.post("/audio/transcriptions",Wr({body:e,...n,__metadata:{model:e.model}}))}}class Og extends z{create(e,n){return this._client.post("/audio/translations",Wr({body:e,...n,__metadata:{model:e.model}}))}}let di=class extends z{constructor(){super(...arguments),this.transcriptions=new Ag(this._client),this.translations=new Og(this._client),this.speech=new Rg(this._client)}};di.Transcriptions=Ag;di.Translations=Og;di.Speech=Rg;class Tc extends z{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return me(e)?this.list({},e):this._client.getAPIList("/batches",Rc,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}}class Rc extends Be{}Tc.BatchesPage=Rc;class Ac extends z{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return me(e)?this.list({},e):this._client.getAPIList("/assistants",Oc,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Oc extends Be{}Ac.AssistantsPage=Oc;function Hh(t){return typeof t.parse=="function"}const $r=t=>(t==null?void 0:t.role)==="assistant",$g=t=>(t==null?void 0:t.role)==="function",Ig=t=>(t==null?void 0:t.role)==="tool";var ct=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},Z=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},vu,aa,oa,vs,ws,la,_s,Mt,xs,Da,Fa,dr,Lg;class $c{constructor(){vu.add(this),this.controller=new AbortController,aa.set(this,void 0),oa.set(this,()=>{}),vs.set(this,()=>{}),ws.set(this,void 0),la.set(this,()=>{}),_s.set(this,()=>{}),Mt.set(this,{}),xs.set(this,!1),Da.set(this,!1),Fa.set(this,!1),dr.set(this,!1),ct(this,aa,new Promise((e,n)=>{ct(this,oa,e,"f"),ct(this,vs,n,"f")}),"f"),ct(this,ws,new Promise((e,n)=>{ct(this,la,e,"f"),ct(this,_s,n,"f")}),"f"),Z(this,aa,"f").catch(()=>{}),Z(this,ws,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Z(this,vu,"m",Lg).bind(this))},0)}_connected(){this.ended||(Z(this,oa,"f").call(this),this._emit("connect"))}get ended(){return Z(this,xs,"f")}get errored(){return Z(this,Da,"f")}get aborted(){return Z(this,Fa,"f")}abort(){this.controller.abort()}on(e,n){return(Z(this,Mt,"f")[e]||(Z(this,Mt,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=Z(this,Mt,"f")[e];if(!r)return this;const s=r.findIndex(i=>i.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(Z(this,Mt,"f")[e]||(Z(this,Mt,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{ct(this,dr,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){ct(this,dr,!0,"f"),await Z(this,ws,"f")}_emit(e,...n){if(Z(this,xs,"f"))return;e==="end"&&(ct(this,xs,!0,"f"),Z(this,la,"f").call(this));const r=Z(this,Mt,"f")[e];if(r&&(Z(this,Mt,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!Z(this,dr,"f")&&!(r!=null&&r.length)&&Promise.reject(s),Z(this,vs,"f").call(this,s),Z(this,_s,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!Z(this,dr,"f")&&!(r!=null&&r.length)&&Promise.reject(s),Z(this,vs,"f").call(this,s),Z(this,_s,"f").call(this,s),this._emit("end")}}_emitFinal(){}}aa=new WeakMap,oa=new WeakMap,vs=new WeakMap,ws=new WeakMap,la=new WeakMap,_s=new WeakMap,Mt=new WeakMap,xs=new WeakMap,Da=new WeakMap,Fa=new WeakMap,dr=new WeakMap,vu=new WeakSet,Lg=function(e){if(ct(this,Da,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new st),e instanceof st)return ct(this,Fa,!0,"f"),this._emit("abort",e);if(e instanceof O)return this._emit("error",e);if(e instanceof Error){const n=new O(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new O(String(e)))};function Ic(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function hi(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function J1(t,e){return!e||!Mg(e)?{...t,choices:t.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Lc(t,e)}function Lc(t,e){const n=t.choices.map(r=>{var s;if(r.finish_reason==="length")throw new wg;if(r.finish_reason==="content_filter")throw new _g;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((s=r.message.tool_calls)==null?void 0:s.map(i=>K1(e,i)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?G1(e,r.message.content):null}}});return{...t,choices:n}}function G1(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function K1(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return((i=s.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:hi(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function Q1(t,e){var r;if(!t)return!1;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return((i=s.function)==null?void 0:i.name)===e.function.name});return hi(n)||(n==null?void 0:n.function.strict)||!1}function Mg(t){var e;return Ic(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>hi(n)||n.type==="function"&&n.function.strict===!0))??!1}function X1(t){for(const e of t??[]){if(e.type!=="function")throw new O(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new O(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Ie=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ee,wu,Ua,_u,xu,ku,Dg,Su;const Vh=10;class Fg extends $c{constructor(){super(...arguments),Ee.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),($g(e)||Ig(e))&&e.content)this._emit("functionCallResult",e.content);else if($r(e)&&e.function_call)this._emit("functionCall",e.function_call);else if($r(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new O("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Ie(this,Ee,"m",wu).call(this)}async finalMessage(){return await this.done(),Ie(this,Ee,"m",Ua).call(this)}async finalFunctionCall(){return await this.done(),Ie(this,Ee,"m",_u).call(this)}async finalFunctionCallResult(){return await this.done(),Ie(this,Ee,"m",xu).call(this)}async totalUsage(){return await this.done(),Ie(this,Ee,"m",ku).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=Ie(this,Ee,"m",Ua).call(this);n&&this._emit("finalMessage",n);const r=Ie(this,Ee,"m",wu).call(this);r&&this._emit("finalContent",r);const s=Ie(this,Ee,"m",_u).call(this);s&&this._emit("finalFunctionCall",s);const i=Ie(this,Ee,"m",xu).call(this);i!=null&&this._emit("finalFunctionCallResult",i),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",Ie(this,Ee,"m",ku).call(this))}async _createChatCompletion(e,n,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Ie(this,Ee,"m",Dg).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Lc(i,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){var p;const s="function",{function_call:i="auto",stream:a,...o}=n,l=typeof i!="string"&&(i==null?void 0:i.name),{maxChatCompletions:u=Vh}=r||{},d={};for(const y of n.functions)d[y.name||y.function.name]=y;const h=n.functions.map(y=>({name:y.name||y.function.name,parameters:y.parameters,description:y.description}));for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<u;++y){const v=(p=(await this._createChatCompletion(e,{...o,function_call:i,functions:h,messages:[...this.messages]},r)).choices[0])==null?void 0:p.message;if(!v)throw new O("missing message in ChatCompletion response");if(!v.function_call)return;const{name:k,arguments:m}=v.function_call,f=d[k];if(f){if(l&&l!==k){const S=`Invalid function_call: ${JSON.stringify(k)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,name:k,content:S});continue}}else{const S=`Invalid function_call: ${JSON.stringify(k)}. Available options are: ${h.map(b=>JSON.stringify(b.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:k,content:S});continue}let g;try{g=Hh(f)?await f.parse(m):m}catch(S){this._addMessage({role:s,name:k,content:S instanceof Error?S.message:String(S)});continue}const _=await f.function(g,this),x=Ie(this,Ee,"m",Su).call(this,_);if(this._addMessage({role:s,name:k,content:x}),l)return}}async _runTools(e,n,r){var y,w,v;const s="tool",{tool_choice:i="auto",stream:a,...o}=n,l=typeof i!="string"&&((y=i==null?void 0:i.function)==null?void 0:y.name),{maxChatCompletions:u=Vh}=r||{},d=n.tools.map(k=>{if(hi(k)){if(!k.$callback)throw new O("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:k.$callback,name:k.function.name,description:k.function.description||"",parameters:k.function.parameters,parse:k.$parseRaw,strict:!0}}}return k}),h={};for(const k of d)k.type==="function"&&(h[k.function.name||k.function.function.name]=k.function);const p="tools"in n?d.map(k=>k.type==="function"?{type:"function",function:{name:k.function.name||k.function.function.name,parameters:k.function.parameters,description:k.function.description,strict:k.function.strict}}:k):void 0;for(const k of n.messages)this._addMessage(k,!1);for(let k=0;k<u;++k){const f=(w=(await this._createChatCompletion(e,{...o,tool_choice:i,tools:p,messages:[...this.messages]},r)).choices[0])==null?void 0:w.message;if(!f)throw new O("missing message in ChatCompletion response");if(!((v=f.tool_calls)!=null&&v.length))return;for(const g of f.tool_calls){if(g.type!=="function")continue;const _=g.id,{name:x,arguments:S}=g.function,b=h[x];if(b){if(l&&l!==x){const I=`Invalid tool_call: ${JSON.stringify(x)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,tool_call_id:_,content:I});continue}}else{const I=`Invalid tool_call: ${JSON.stringify(x)}. Available options are: ${Object.keys(h).map(Ae=>JSON.stringify(Ae)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:_,content:I});continue}let C;try{C=Hh(b)?await b.parse(S):S}catch(I){const Ae=I instanceof Error?I.message:String(I);this._addMessage({role:s,tool_call_id:_,content:Ae});continue}const A=await b.function(C,this),T=Ie(this,Ee,"m",Su).call(this,A);if(this._addMessage({role:s,tool_call_id:_,content:T}),l)return}}}}Ee=new WeakSet,wu=function(){return Ie(this,Ee,"m",Ua).call(this).content??null},Ua=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if($r(n)){const{function_call:r,...s}=n,i={...s,content:n.content??null,refusal:n.refusal??null};return r&&(i.function_call=r),i}}throw new O("stream ended without producing a ChatCompletionMessage with role=assistant")},_u=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const s=this.messages[r];if($r(s)&&(s!=null&&s.function_call))return s.function_call;if($r(s)&&((e=s==null?void 0:s.tool_calls)!=null&&e.length))return(n=s.tool_calls.at(-1))==null?void 0:n.function}},xu=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if($g(n)&&n.content!=null||Ig(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var s;return r.role==="assistant"&&((s=r.tool_calls)==null?void 0:s.some(i=>i.type==="function"&&i.id===n.tool_call_id))}))return n.content}},ku=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},Dg=function(e){if(e.n!=null&&e.n>1)throw new O("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Su=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class ti extends Fg{static runFunctions(e,n,r){const s=new ti,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,n,i)),s}static runTools(e,n,r){const s=new ti,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}_addMessage(e,n=!0){super._addMessage(e,n),$r(e)&&e.content&&this._emit("content",e.content)}}const Ug=1,zg=2,Bg=4,Hg=8,Vg=16,Wg=32,qg=64,Jg=128,Gg=256,Kg=Jg|Gg,Qg=Vg|Wg|Kg|qg,Xg=Ug|zg|Qg,Yg=Bg|Hg,Y1=Xg|Yg,de={STR:Ug,NUM:zg,ARR:Bg,OBJ:Hg,NULL:Vg,BOOL:Wg,NAN:qg,INFINITY:Jg,MINUS_INFINITY:Gg,INF:Kg,SPECIAL:Qg,ATOM:Xg,COLLECTION:Yg,ALL:Y1};class Z1 extends Error{}class ek extends Error{}function tk(t,e=de.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return nk(t.trim(),e)}const nk=(t,e)=>{const n=t.length;let r=0;const s=p=>{throw new Z1(`${p} at position ${r}`)},i=p=>{throw new ek(`${p} at position ${r}`)},a=()=>(h(),r>=n&&s("Unexpected end of input"),t[r]==='"'?o():t[r]==="{"?l():t[r]==="["?u():t.substring(r,r+4)==="null"||de.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||de.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||de.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||de.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||de.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||de.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):d()),o=()=>{const p=r;let y=!1;for(r++;r<n&&(t[r]!=='"'||y&&t[r-1]==="\\");)y=t[r]==="\\"?!y:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(p,++r-Number(y)))}catch(w){i(String(w))}else if(de.STR&e)try{return JSON.parse(t.substring(p,r-Number(y))+'"')}catch{return JSON.parse(t.substring(p,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{r++,h();const p={};try{for(;t[r]!=="}";){if(h(),r>=n&&de.OBJ&e)return p;const y=o();h(),r++;try{const w=a();Object.defineProperty(p,y,{value:w,writable:!0,enumerable:!0,configurable:!0})}catch(w){if(de.OBJ&e)return p;throw w}h(),t[r]===","&&r++}}catch{if(de.OBJ&e)return p;s("Expected '}' at end of object")}return r++,p},u=()=>{r++;const p=[];try{for(;t[r]!=="]";)p.push(a()),h(),t[r]===","&&r++}catch{if(de.ARR&e)return p;s("Expected ']' at end of array")}return r++,p},d=()=>{if(r===0){t==="-"&&de.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(y){if(de.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(y))}}const p=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(de.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(p,r))}catch{t.substring(p,r)==="-"&&de.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(p,t.lastIndexOf("e")))}catch(w){i(String(w))}}},h=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return a()},Wh=t=>tk(t,de.ALL^de.NUM);var ir=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},V=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},oe,Lt,ar,Xt,ll,Hi,ul,cl,dl,Vi,hl,qh;class ni extends Fg{constructor(e){super(),oe.add(this),Lt.set(this,void 0),ar.set(this,void 0),Xt.set(this,void 0),ir(this,Lt,e,"f"),ir(this,ar,[],"f")}get currentChatCompletionSnapshot(){return V(this,Xt,"f")}static fromReadableStream(e){const n=new ni(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new ni(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){var a;super._createChatCompletion;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),V(this,oe,"m",ll).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of i)V(this,oe,"m",ul).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new st;return this._addChatCompletion(V(this,oe,"m",Vi).call(this))}async _fromReadableStream(e,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),V(this,oe,"m",ll).call(this),this._connected();const s=Tt.fromReadableStream(e,this.controller);let i;for await(const o of s)i&&i!==o.id&&this._addChatCompletion(V(this,oe,"m",Vi).call(this)),V(this,oe,"m",ul).call(this,o),i=o.id;if((a=s.controller.signal)!=null&&a.aborted)throw new st;return this._addChatCompletion(V(this,oe,"m",Vi).call(this))}[(Lt=new WeakMap,ar=new WeakMap,Xt=new WeakMap,oe=new WeakSet,ll=function(){this.ended||ir(this,Xt,void 0,"f")},Hi=function(n){let r=V(this,ar,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},V(this,ar,"f")[n.index]=r,r)},ul=function(n){var s,i,a,o,l,u,d,h,p,y,w,v,k,m,f;if(this.ended)return;const r=V(this,oe,"m",qh).call(this,n);this._emit("chunk",n,r);for(const g of n.choices){const _=r.choices[g.index];g.delta.content!=null&&((s=_.message)==null?void 0:s.role)==="assistant"&&((i=_.message)!=null&&i.content)&&(this._emit("content",g.delta.content,_.message.content),this._emit("content.delta",{delta:g.delta.content,snapshot:_.message.content,parsed:_.message.parsed})),g.delta.refusal!=null&&((a=_.message)==null?void 0:a.role)==="assistant"&&((o=_.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:g.delta.refusal,snapshot:_.message.refusal}),((l=g.logprobs)==null?void 0:l.content)!=null&&((u=_.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(d=g.logprobs)==null?void 0:d.content,snapshot:((h=_.logprobs)==null?void 0:h.content)??[]}),((p=g.logprobs)==null?void 0:p.refusal)!=null&&((y=_.message)==null?void 0:y.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(w=g.logprobs)==null?void 0:w.refusal,snapshot:((v=_.logprobs)==null?void 0:v.refusal)??[]});const x=V(this,oe,"m",Hi).call(this,_);_.finish_reason&&(V(this,oe,"m",dl).call(this,_),x.current_tool_call_index!=null&&V(this,oe,"m",cl).call(this,_,x.current_tool_call_index));for(const S of g.delta.tool_calls??[])x.current_tool_call_index!==S.index&&(V(this,oe,"m",dl).call(this,_),x.current_tool_call_index!=null&&V(this,oe,"m",cl).call(this,_,x.current_tool_call_index)),x.current_tool_call_index=S.index;for(const S of g.delta.tool_calls??[]){const b=(k=_.message.tool_calls)==null?void 0:k[S.index];b!=null&&b.type&&((b==null?void 0:b.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(m=b.function)==null?void 0:m.name,index:S.index,arguments:b.function.arguments,parsed_arguments:b.function.parsed_arguments,arguments_delta:((f=S.function)==null?void 0:f.arguments)??""}):(b==null||b.type,void 0))}}},cl=function(n,r){var a,o,l;if(V(this,oe,"m",Hi).call(this,n).done_tool_calls.has(r))return;const i=(a=n.message.tool_calls)==null?void 0:a[r];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const u=(l=(o=V(this,Lt,"f"))==null?void 0:o.tools)==null?void 0:l.find(d=>d.type==="function"&&d.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:r,arguments:i.function.arguments,parsed_arguments:hi(u)?u.$parseRaw(i.function.arguments):u!=null&&u.function.strict?JSON.parse(i.function.arguments):null})}else i.type},dl=function(n){var s,i;const r=V(this,oe,"m",Hi).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const a=V(this,oe,"m",hl).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(s=n.logprobs)!=null&&s.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(i=n.logprobs)!=null&&i.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Vi=function(){if(this.ended)throw new O("stream has ended, this shouldn't happen");const n=V(this,Xt,"f");if(!n)throw new O("request ended without sending any chunks");return ir(this,Xt,void 0,"f"),ir(this,ar,[],"f"),rk(n,V(this,Lt,"f"))},hl=function(){var r;const n=(r=V(this,Lt,"f"))==null?void 0:r.response_format;return Ic(n)?n:null},qh=function(n){var r,s,i,a;let o=V(this,Xt,"f");const{choices:l,...u}=n;o?Object.assign(o,u):o=ir(this,Xt,{...u,choices:[]},"f");for(const{delta:d,finish_reason:h,index:p,logprobs:y=null,...w}of n.choices){let v=o.choices[p];if(v||(v=o.choices[p]={finish_reason:h,index:p,message:{},logprobs:y,...w}),y)if(!v.logprobs)v.logprobs=Object.assign({},y);else{const{content:S,refusal:b,...C}=y;Object.assign(v.logprobs,C),S&&((r=v.logprobs).content??(r.content=[]),v.logprobs.content.push(...S)),b&&((s=v.logprobs).refusal??(s.refusal=[]),v.logprobs.refusal.push(...b))}if(h&&(v.finish_reason=h,V(this,Lt,"f")&&Mg(V(this,Lt,"f")))){if(h==="length")throw new wg;if(h==="content_filter")throw new _g}if(Object.assign(v,w),!d)continue;const{content:k,refusal:m,function_call:f,role:g,tool_calls:_,...x}=d;if(Object.assign(v.message,x),m&&(v.message.refusal=(v.message.refusal||"")+m),g&&(v.message.role=g),f&&(v.message.function_call?(f.name&&(v.message.function_call.name=f.name),f.arguments&&((i=v.message.function_call).arguments??(i.arguments=""),v.message.function_call.arguments+=f.arguments)):v.message.function_call=f),k&&(v.message.content=(v.message.content||"")+k,!v.message.refusal&&V(this,oe,"m",hl).call(this)&&(v.message.parsed=Wh(v.message.content))),_){v.message.tool_calls||(v.message.tool_calls=[]);for(const{index:S,id:b,type:C,function:A,...T}of _){const I=(a=v.message.tool_calls)[S]??(a[S]={});Object.assign(I,T),b&&(I.id=b),C&&(I.type=C),A&&(I.function??(I.function={name:A.name??"",arguments:""})),A!=null&&A.name&&(I.function.name=A.name),A!=null&&A.arguments&&(I.function.arguments+=A.arguments,Q1(V(this,Lt,"f"),I)&&(I.function.parsed_arguments=Wh(I.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Tt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function rk(t,e){const{id:n,choices:r,created:s,model:i,system_fingerprint:a,...o}=t,l={...o,id:n,choices:r.map(({message:u,finish_reason:d,index:h,logprobs:p,...y})=>{if(!d)throw new O(`missing finish_reason for choice ${h}`);const{content:w=null,function_call:v,tool_calls:k,...m}=u,f=u.role;if(!f)throw new O(`missing role for choice ${h}`);if(v){const{arguments:g,name:_}=v;if(g==null)throw new O(`missing function_call.arguments for choice ${h}`);if(!_)throw new O(`missing function_call.name for choice ${h}`);return{...y,message:{content:w,function_call:{arguments:g,name:_},role:f,refusal:u.refusal??null},finish_reason:d,index:h,logprobs:p}}return k?{...y,index:h,finish_reason:d,logprobs:p,message:{...m,role:f,content:w,refusal:u.refusal??null,tool_calls:k.map((g,_)=>{const{function:x,type:S,id:b,...C}=g,{arguments:A,name:T,...I}=x||{};if(b==null)throw new O(`missing choices[${h}].tool_calls[${_}].id
${Wi(t)}`);if(S==null)throw new O(`missing choices[${h}].tool_calls[${_}].type
${Wi(t)}`);if(T==null)throw new O(`missing choices[${h}].tool_calls[${_}].function.name
${Wi(t)}`);if(A==null)throw new O(`missing choices[${h}].tool_calls[${_}].function.arguments
${Wi(t)}`);return{...C,id:b,type:S,function:{...I,name:T,arguments:A}}})}}:{...y,message:{...m,content:w,role:f,refusal:u.refusal??null},finish_reason:d,index:h,logprobs:p}}),created:s,model:i,object:"chat.completion",...a?{system_fingerprint:a}:{}};return J1(l,e)}function Wi(t){return JSON.stringify(t)}class Ir extends ni{static fromReadableStream(e){const n=new Ir(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const s=new Ir(null),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,n,i)),s}static runTools(e,n,r){const s=new Ir(n),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}}let Zg=class extends z{parse(e,n){return X1(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>Lc(r,e))}runFunctions(e,n){return e.stream?Ir.runFunctions(this._client,e,n):ti.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?Ir.runTools(this._client,e,n):ti.runTools(this._client,e,n)}stream(e,n){return ni.createChatCompletion(this._client,e,n)}},bu=class extends z{constructor(){super(...arguments),this.completions=new Zg(this._client)}};(function(t){t.Completions=Zg})(bu||(bu={}));class ey extends z{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class ty extends z{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class _o extends z{constructor(){super(...arguments),this.sessions=new ey(this._client),this.transcriptionSessions=new ty(this._client)}}_o.Sessions=ey;_o.TranscriptionSessions=ty;var R=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},He=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},we,Eu,Pt,ua,ht,Dn,br,$n,za,qe,ca,da,Ls,ks,Ss,Jh,Gh,Kh,Qh,Xh,Yh,Zh;class yt extends $c{constructor(){super(...arguments),we.add(this),Eu.set(this,[]),Pt.set(this,{}),ua.set(this,{}),ht.set(this,void 0),Dn.set(this,void 0),br.set(this,void 0),$n.set(this,void 0),za.set(this,void 0),qe.set(this,void 0),ca.set(this,void 0),da.set(this,void 0),Ls.set(this,void 0)}[(Eu=new WeakMap,Pt=new WeakMap,ua=new WeakMap,ht=new WeakMap,Dn=new WeakMap,br=new WeakMap,$n=new WeakMap,za=new WeakMap,qe=new WeakMap,ca=new WeakMap,da=new WeakMap,Ls=new WeakMap,we=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new yt;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var i;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Tt.fromReadableStream(e,this.controller);for await(const a of s)R(this,we,"m",ks).call(this,a);if((i=s.controller.signal)!=null&&i.aborted)throw new st;return this._addRun(R(this,we,"m",Ss).call(this))}toReadableStream(){return new Tt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s,i){const a=new yt;return a._run(()=>a._runToolAssistantStream(e,n,r,s,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,s,i){var u;const a=i==null?void 0:i.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...s,stream:!0},l=await e.submitToolOutputs(n,r,o,{...i,signal:this.controller.signal});this._connected();for await(const d of l)R(this,we,"m",ks).call(this,d);if((u=l.controller.signal)!=null&&u.aborted)throw new st;return this._addRun(R(this,we,"m",Ss).call(this))}static createThreadAssistantStream(e,n,r){const s=new yt;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const i=new yt;return i._run(()=>i._runAssistantStream(e,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return R(this,ca,"f")}currentRun(){return R(this,da,"f")}currentMessageSnapshot(){return R(this,ht,"f")}currentRunStepSnapshot(){return R(this,Ls,"f")}async finalRunSteps(){return await this.done(),Object.values(R(this,Pt,"f"))}async finalMessages(){return await this.done(),Object.values(R(this,ua,"f"))}async finalRun(){if(await this.done(),!R(this,Dn,"f"))throw Error("Final run was not received.");return R(this,Dn,"f")}async _createThreadAssistantStream(e,n,r){var o;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},a=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(const l of a)R(this,we,"m",ks).call(this,l);if((o=a.controller.signal)!=null&&o.aborted)throw new st;return this._addRun(R(this,we,"m",Ss).call(this))}async _createAssistantStream(e,n,r,s){var l;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await e.create(n,a,{...s,signal:this.controller.signal});this._connected();for await(const u of o)R(this,we,"m",ks).call(this,u);if((l=o.controller.signal)!=null&&l.aborted)throw new st;return this._addRun(R(this,we,"m",Ss).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let i=e[r];if(i==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof i=="string"&&typeof s=="string")i+=s;else if(typeof i=="number"&&typeof s=="number")i+=s;else if(ol(i)&&ol(s))i=this.accumulateDelta(i,s);else if(Array.isArray(i)&&Array.isArray(s)){if(i.every(a=>typeof a=="string"||typeof a=="number")){i.push(...s);continue}for(const a of s){if(!ol(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const o=a.index;if(o==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=i[o];l==null?i.push(a):i[o]=this.accumulateDelta(l,a)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${i}`);e[r]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s,i){return await this._createToolAssistantStream(r,e,n,s,i)}}ks=function(e){if(!this.ended)switch(He(this,ca,e,"f"),R(this,we,"m",Kh).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":R(this,we,"m",Zh).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":R(this,we,"m",Gh).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":R(this,we,"m",Jh).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Ss=function(){if(this.ended)throw new O("stream has ended, this shouldn't happen");if(!R(this,Dn,"f"))throw Error("Final run has not been received");return R(this,Dn,"f")},Jh=function(e){const[n,r]=R(this,we,"m",Xh).call(this,e,R(this,ht,"f"));He(this,ht,n,"f"),R(this,ua,"f")[n.id]=n;for(const s of r){const i=n.content[s.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let i=s.text,a=n.content[s.index];if(a&&a.type=="text")this._emit("textDelta",i,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=R(this,br,"f")){if(R(this,$n,"f"))switch(R(this,$n,"f").type){case"text":this._emit("textDone",R(this,$n,"f").text,R(this,ht,"f"));break;case"image_file":this._emit("imageFileDone",R(this,$n,"f").image_file,R(this,ht,"f"));break}He(this,br,s.index,"f")}He(this,$n,n.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(R(this,br,"f")!==void 0){const s=e.data.content[R(this,br,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,R(this,ht,"f"));break;case"text":this._emit("textDone",s.text,R(this,ht,"f"));break}}R(this,ht,"f")&&this._emit("messageDone",e.data),He(this,ht,void 0,"f")}},Gh=function(e){const n=R(this,we,"m",Qh).call(this,e);switch(He(this,Ls,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of r.step_details.tool_calls)i.index==R(this,za,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(R(this,qe,"f")&&this._emit("toolCallDone",R(this,qe,"f")),He(this,za,i.index,"f"),He(this,qe,n.step_details.tool_calls[i.index],"f"),R(this,qe,"f")&&this._emit("toolCallCreated",R(this,qe,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":He(this,Ls,void 0,"f"),e.data.step_details.type=="tool_calls"&&R(this,qe,"f")&&(this._emit("toolCallDone",R(this,qe,"f")),He(this,qe,void 0,"f")),this._emit("runStepDone",e.data,n);break}},Kh=function(e){R(this,Eu,"f").push(e),this._emit("event",e)},Qh=function(e){switch(e.event){case"thread.run.step.created":return R(this,Pt,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=R(this,Pt,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=yt.accumulateDelta(n,r.delta);R(this,Pt,"f")[e.data.id]=s}return R(this,Pt,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":R(this,Pt,"f")[e.data.id]=e.data;break}if(R(this,Pt,"f")[e.data.id])return R(this,Pt,"f")[e.data.id];throw new Error("No snapshot available")},Xh=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const i of s.delta.content)if(i.index in n.content){let a=n.content[i.index];n.content[i.index]=R(this,we,"m",Yh).call(this,i,a)}else n.content[i.index]=i,r.push(i);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Yh=function(e,n){return yt.accumulateDelta(n,e)},Zh=function(e){switch(He(this,da,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":He(this,Dn,e.data,"f"),R(this,qe,"f")&&(this._emit("toolCallDone",R(this,qe,"f")),He(this,qe,void 0,"f"));break}};class Mc extends z{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,s){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,n={},r){return me(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,Dc,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Dc extends Be{}Mc.MessagesPage=Dc;class Fc extends z{retrieve(e,n,r,s={},i){return me(s)?this.retrieve(e,n,r,{},s):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:s,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n,r={},s){return me(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,Uc,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class Uc extends Be{}Fc.RunStepsPage=Uc;class fi extends z{constructor(){super(...arguments),this.steps=new Fc(this._client)}create(e,n,r){const{include:s,...i}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:s},body:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,s){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,n={},r){return me(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,zc,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}createAndStream(e,n,r){return yt.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:i,response:a}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...s}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await ci(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,n,r){return yt.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,s){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,s){const i=await this.submitToolOutputs(e,n,r,s);return await this.poll(e,i.id,s)}submitToolOutputsStream(e,n,r,s){return yt.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,s)}}class zc extends Be{}fi.RunsPage=zc;fi.Steps=Fc;fi.RunStepsPage=Uc;class Xr extends z{constructor(){super(...arguments),this.runs=new fi(this._client),this.messages=new Mc(this._client)}create(e={},n){return me(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return yt.createThreadAssistantStream(e,this._client.beta.threads,n)}}Xr.Runs=fi;Xr.RunsPage=zc;Xr.Messages=Mc;Xr.MessagesPage=Dc;class Yr extends z{constructor(){super(...arguments),this.realtime=new _o(this._client),this.chat=new bu(this._client),this.assistants=new Ac(this._client),this.threads=new Xr(this._client)}}Yr.Realtime=_o;Yr.Assistants=Ac;Yr.AssistantsPage=Oc;Yr.Threads=Xr;class ny extends z{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class ry extends z{create(e,n){return this._client.post("/embeddings",{body:e,...n})}}let Bc=class extends z{create(e,n){return this._client.post("/files",Wr({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return me(e)?this.list({},e):this._client.getAPIList("/files",Hc,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/binary",...n==null?void 0:n.headers},__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,n)}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),i=Date.now();let a=await this.retrieve(e);for(;!a.status||!s.has(a.status);)if(await ci(n),a=await this.retrieve(e),Date.now()-i>r)throw new Pc({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a}};class Hc extends Be{}Bc.FileObjectsPage=Hc;class Vc extends z{list(e,n={},r){return me(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Wc,{query:n,...r})}}class Wc extends Be{}Vc.FineTuningJobCheckpointsPage=Wc;class Zr extends z{constructor(){super(...arguments),this.checkpoints=new Vc(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return me(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",qc,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return me(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Jc,{query:n,...r})}}class qc extends Be{}class Jc extends Be{}Zr.FineTuningJobsPage=qc;Zr.FineTuningJobEventsPage=Jc;Zr.Checkpoints=Vc;Zr.FineTuningJobCheckpointsPage=Wc;class pi extends z{constructor(){super(...arguments),this.jobs=new Zr(this._client)}}pi.Jobs=Zr;pi.FineTuningJobsPage=qc;pi.FineTuningJobEventsPage=Jc;class sy extends z{createVariation(e,n){return this._client.post("/images/variations",Wr({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",Wr({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class Gc extends z{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Kc,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class Kc extends Nc{}Gc.ModelsPage=Kc;class iy extends z{create(e,n){return this._client.post("/moderations",{body:e,...n})}}function sk(t,e){return!e||!ak(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:ay(t,e)}function ay(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:uk(e,s)};if(s.type==="message"){const i=s.content.map(a=>a.type==="output_text"?{...a,parsed:ik(e,a.text)}:a);return{...s,content:i}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||oy(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const i of s.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),r}function ik(t,e){var n,r,s,i;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((s=t.text)==null?void 0:s.format)?((i=t.text)==null?void 0:i.format).$parseRaw(e):JSON.parse(e)}function ak(t){var e;return!!Ic((e=t.text)==null?void 0:e.format)}function ok(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function lk(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function uk(t,e){const n=lk(t.tools??[],e.name);return{...e,...e,parsed_arguments:ok(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function oy(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}class ly extends z{list(e,n={},r){return me(n)?this.list(e,{},n):this._client.getAPIList(`/responses/${e}/input_items`,dk,{query:n,...r})}}var or=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},Yt=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},lr,qi,Zt,Ji,ef,tf,nf,rf;class Qc extends $c{constructor(e){super(),lr.add(this),qi.set(this,void 0),Zt.set(this,void 0),Ji.set(this,void 0),or(this,qi,e,"f")}static createResponse(e,n,r){const s=new Qc(n);return s._run(()=>s._createResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createResponse(e,n,r){var a;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Yt(this,lr,"m",ef).call(this);const i=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of i)Yt(this,lr,"m",tf).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new st;return Yt(this,lr,"m",nf).call(this)}[(qi=new WeakMap,Zt=new WeakMap,Ji=new WeakMap,lr=new WeakSet,ef=function(){this.ended||or(this,Zt,void 0,"f")},tf=function(n){if(this.ended)return;const r=Yt(this,lr,"m",rf).call(this,n);switch(this._emit("event",n),n.type){case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new O(`missing output at index ${n.output_index}`);if(s.type==="message"){const i=s.content[n.content_index];if(!i)throw new O(`missing content at index ${n.content_index}`);if(i.type!=="output_text")throw new O(`expected content to be 'output_text', got ${i.type}`);this._emit("response.output_text.delta",{...n,snapshot:i.text})}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new O(`missing output at index ${n.output_index}`);s.type==="function_call"&&this._emit("response.function_call_arguments.delta",{...n,snapshot:s.arguments});break}default:this._emit(n.type,n);break}},nf=function(){if(this.ended)throw new O("stream has ended, this shouldn't happen");const n=Yt(this,Zt,"f");if(!n)throw new O("request ended without sending any events");or(this,Zt,void 0,"f");const r=ck(n,Yt(this,qi,"f"));return or(this,Ji,r,"f"),r},rf=function(n){let r=Yt(this,Zt,"f");if(!r){if(n.type!=="response.created")throw new O(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=or(this,Zt,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new O(`missing output at index ${n.output_index}`);s.type==="message"&&s.content.push(n.part);break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new O(`missing output at index ${n.output_index}`);if(s.type==="message"){const i=s.content[n.content_index];if(!i)throw new O(`missing content at index ${n.content_index}`);if(i.type!=="output_text")throw new O(`expected content to be 'output_text', got ${i.type}`);i.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new O(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.completed":{or(this,Zt,n.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=Yt(this,Ji,"f");if(!e)throw new O("stream ended without producing a ChatCompletion");return e}}function ck(t,e){return sk(t,e)}class Xc extends z{constructor(){super(...arguments),this.inputItems=new ly(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&oy(r),r))}retrieve(e,n={},r){return me(n)?this.retrieve(e,{},n):this._client.get(`/responses/${e}`,{query:n,...r})}del(e,n){return this._client.delete(`/responses/${e}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>ay(r,e))}stream(e,n){return Qc.createResponse(this._client,e,n)}}class dk extends Be{}Xc.InputItems=ly;class uy extends z{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,Wr({body:n,...r}))}}class Yc extends z{constructor(){super(...arguments),this.parts=new uy(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}Yc.Parts=uy;const hk=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class xo extends z{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,s){return this._client.post(`/vector_stores/${e}/files/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,n={},r){return me(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,ko,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const i=await this.retrieve(e,n,{...r,headers:s}).withResponse(),a=i.data;switch(a.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=i.response.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await ci(o);break;case"failed":case"completed":return a}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/files/${n}/content`,Zc,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class ko extends Be{}class Zc extends Nc{}xo.VectorStoreFilesPage=ko;xo.FileContentResponsesPage=Zc;class cy extends z{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r={},s){return me(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,ko,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(e,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:i,response:a}=await this.retrieve(e,n,{...r,headers:s}).withResponse();switch(i.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await ci(o);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=(s==null?void 0:s.maxConcurrency)??5,a=Math.min(i,n.length),o=this._client,l=n.values(),u=[...r];async function d(p){for(let y of p){const w=await o.files.create({file:y,purpose:"assistants"},s);u.push(w.id)}}const h=Array(a).fill(l).map(d);return await hk(h),await this.createAndPoll(e,{file_ids:u})}}class En extends z{constructor(){super(...arguments),this.files=new xo(this._client),this.fileBatches=new cy(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return me(e)?this.list({},e):this._client.getAPIList("/vector_stores",ed,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}search(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/search`,td,{body:n,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class ed extends Be{}class td extends Nc{}En.VectorStoresPage=ed;En.VectorStoreSearchResponsesPage=td;En.Files=xo;En.VectorStoreFilesPage=ko;En.FileContentResponsesPage=Zc;En.FileBatches=cy;var dy;class D extends O1{constructor({baseURL:e=zi("OPENAI_BASE_URL"),apiKey:n=zi("OPENAI_API_KEY"),organization:r=zi("OPENAI_ORG_ID")??null,project:s=zi("OPENAI_PROJECT_ID")??null,...i}={}){if(n===void 0)throw new O("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const a={apiKey:n,organization:r,project:s,...i,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&V1())throw new O(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:a.timeout??6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new ny(this),this.chat=new wo(this),this.embeddings=new ry(this),this.files=new Bc(this),this.images=new sy(this),this.audio=new di(this),this.moderations=new iy(this),this.models=new Gc(this),this.fineTuning=new pi(this),this.vectorStores=new En(this),this.beta=new Yr(this),this.batches=new Tc(this),this.uploads=new Yc(this),this.responses=new Xc(this),this._options=a,this.apiKey=n,this.organization=r,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return m1(e,{arrayFormat:"brackets"})}}dy=D;D.OpenAI=dy;D.DEFAULT_TIMEOUT=6e5;D.OpenAIError=O;D.APIError=ke;D.APIConnectionError=fo;D.APIConnectionTimeoutError=Pc;D.APIUserAbortError=st;D.NotFoundError=pg;D.ConflictError=mg;D.RateLimitError=yg;D.BadRequestError=dg;D.AuthenticationError=hg;D.InternalServerError=vg;D.PermissionDeniedError=fg;D.UnprocessableEntityError=gg;D.toFile=bg;D.fileFromPath=ug;D.Completions=ny;D.Chat=wo;D.ChatCompletionsPage=vo;D.Embeddings=ry;D.Files=Bc;D.FileObjectsPage=Hc;D.Images=sy;D.Audio=di;D.Moderations=iy;D.Models=Gc;D.ModelsPage=Kc;D.FineTuning=pi;D.VectorStores=En;D.VectorStoresPage=ed;D.VectorStoreSearchResponsesPage=td;D.Beta=Yr;D.Batches=Tc;D.BatchesPage=Rc;D.Uploads=Yc;D.Responses=Xc;const fk=new D({apiKey:"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",baseURL:"https://api.openai.com/v1",dangerouslyAllowBrowser:!0});async function pk(t){var e,n;try{return((n=(e=(await fk.chat.completions.create({model:"gpt-4-turbo-preview",messages:[{role:"system",content:`You are LeBron James, one of the greatest basketball players of all time. You have encyclopedic knowledge of your career, achievements, and personal life. You speak confidently and often reference your accomplishments, but remain humble and inspiring. You use basketball analogies and occasionally reference your famous "Taco Tuesday" catchphrase. You're known for your leadership, both on and off the court, and your commitment to education and social justice.

Key characteristics to incorporate:
- Speak in first person when referring to your experiences
- Use basketball terminology naturally
- Reference specific games, achievements, and moments from your career
- Mention your family (wife Savannah, kids Bronny, Bryce, and Zhuri) when relevant
- Occasionally use phrases like "The Kid from Akron" or "Striving for Greatness"
- Stay positive and motivational
- Be knowledgeable about both basketball and business ventures
- Show your sense of humor, especially about Taco Tuesday

Remember your key achievements:
- 4 NBA Championships with 3 different teams (Heat, Cavaliers, Lakers)
- 4 NBA MVP Awards
- 2 Olympic Gold Medals
- NBA's all-time leading scorer
- 19-time All-Star
- Founded the I Promise School
- Successful business ventures (SpringHill Company, Blaze Pizza, etc.)

Current context: You're chatting with fans through the Bronify music app.`},{role:"user",content:t}],temperature:.7,max_tokens:500})).choices[0])==null?void 0:e.message)==null?void 0:n.content)||"Hey, looks like I got caught up in practice! Let's try that again."}catch(r){return console.error("Error chatting with LeBron:",r),"My bad, seems like there's a technical foul on the play. Try again in a bit!"}}const mk=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(""),[s,i]=j.useState(!1),a=j.useRef(null),o=()=>{var u;(u=a.current)==null||u.scrollIntoView({behavior:"smooth"})};j.useEffect(()=>{o()},[t]);const l=async u=>{if(u.preventDefault(),!n.trim()||s)return;const d=n.trim();e(h=>[...h,{text:d,isUser:!0}]),r(""),i(!0);try{const h=await pk(d);e(p=>[...p,{text:h,isUser:!1}])}catch(h){console.error("Error:",h),e(p=>[...p,{text:"My bad, there was a technical foul. Let's try again!",isUser:!1}])}finally{i(!1)}};return c.jsxs("div",{className:"bg-gradient-to-b from-lakers-purple to-spotify-black min-h-screen pb-24",children:[c.jsx(Xn,{}),c.jsx("main",{className:"px-6 py-6",children:c.jsxs("div",{className:"max-w-3xl mx-auto",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[c.jsx(La,{size:32,className:"text-lakers-gold"}),c.jsx("h1",{className:"text-white text-3xl font-bold",children:"Chat with LeBron"})]}),c.jsx("div",{className:"bg-spotify-light rounded-lg p-4 mb-4 h-[60vh] overflow-y-auto",children:t.length===0?c.jsxs("div",{className:"text-center text-gray-400 py-8",children:[c.jsx(La,{size:48,className:"mx-auto mb-4 text-lakers-gold"}),c.jsx("p",{className:"text-lg mb-2",children:"Hey, it's your boy LeBron! "}),c.jsx("p",{children:"Ask me anything about basketball, life, or even Taco Tuesday!"})]}):c.jsxs("div",{className:"space-y-4",children:[t.map((u,d)=>c.jsx("div",{className:`flex ${u.isUser?"justify-end":"justify-start"}`,children:c.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${u.isUser?"bg-lakers-gold text-black":"bg-spotify-dark text-white"}`,children:c.jsx("p",{className:"whitespace-pre-wrap",children:u.text})})},d)),s&&c.jsx("div",{className:"flex justify-start",children:c.jsx("div",{className:"bg-spotify-dark text-white rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"animate-bounce",children:""}),c.jsx("div",{className:"animate-bounce delay-100",children:""}),c.jsx("div",{className:"animate-bounce delay-200",children:""})]})})}),c.jsx("div",{ref:a})]})}),c.jsxs("form",{onSubmit:l,className:"relative",children:[c.jsx("input",{type:"text",value:n,onChange:u=>r(u.target.value),placeholder:"Ask LeBron something...",className:"w-full bg-spotify-light text-white rounded-full py-3 pl-6 pr-12 focus:outline-none focus:ring-2 focus:ring-lakers-gold",disabled:s}),c.jsx("button",{type:"submit",disabled:s||!n.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 bg-lakers-gold text-black p-2 rounded-full disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 transition-transform",children:c.jsx(K0,{size:20})})]})]})})]})};function gk(){const[t,e]=j.useState("home"),[n,r]=j.useState(null),[s,i]=j.useState(!1),[a,o]=j.useState(!1),[l,u]=j.useState([]),[d,h]=j.useState(0),[p,y]=j.useState(null);j.useEffect(()=>{(async()=>{try{const f=await ho();f&&f.length>0&&(u(f),r(f[0]),h(0))}catch(f){console.error("Failed to load initial track:",f),u([]),r(null),h(0)}})()},[]);const w=m=>{const f=l.findIndex(g=>g.id===m.id);f!==-1&&h(f),r(m),o(!0)},v=()=>{if(l.length===0)return;const m=(d+1)%l.length;h(m),r(l[m]),o(!0)},k=()=>{if(l.length===0)return;const m=d===0?l.length-1:d-1;h(m),r(l[m]),o(!0)};return c.jsxs("div",{className:"flex flex-col h-screen bg-spotify-black text-white",children:[c.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[c.jsx("div",{className:`fixed md:relative md:block w-64 h-full overflow-y-auto bg-spotify-black transform transition-transform duration-300 ease-in-out z-30 ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0`,children:c.jsx(wx,{onNavigate:m=>e(m),activePage:t,onPlaylistSelect:m=>{y(m),e("playlist"),i(!1)}})}),c.jsxs("div",{className:"flex-1 overflow-y-auto bg-spotify-black relative",children:[c.jsx("div",{className:"md:hidden flex items-center justify-between p-4 bg-spotify-black sticky top-0 z-20",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("img",{src:"https://i.ibb.co/SXGYvXDD/Screenshot-2025-03-21-at-12-15-30-PM-modified.png",alt:"Bronify Logo",className:"w-8 h-8 object-contain"}),c.jsx("h1",{className:"text-white text-xl font-bold tracking-tight",children:"Bronify"})]})}),t==="home"?c.jsx(Sx,{onTrackSelect:w}):t==="playlist"?c.jsx(Ex,{playlist:p,onTrackSelect:w}):t==="search"?c.jsx(r1,{onTrackSelect:w}):t==="track"?c.jsx(jx,{currentTrack:n,onTrackSelect:w}):t==="recently-played"?c.jsx(s1,{onTrackSelect:w}):t==="liked-songs"?c.jsx(i1,{onTrackSelect:w}):t==="chat"?c.jsx(mk,{}):null,c.jsxs("div",{className:"md:hidden fixed bottom-[72px] left-0 right-0 bg-spotify-dark p-2 flex justify-between items-center border-t border-gray-800 z-20",children:[c.jsxs("button",{className:`flex flex-col items-center p-1 ${t==="home"?"text-lakers-gold":"text-gray-400"}`,onClick:()=>e("home"),children:[c.jsx(vm,{size:20,className:"mb-1"}),c.jsx("span",{className:"text-xs",children:"Home"})]}),c.jsxs("button",{className:`flex flex-col items-center p-1 ${t==="search"?"text-lakers-gold":"text-gray-400"}`,onClick:()=>e("search"),children:[c.jsx(xc,{size:20,className:"mb-1"}),c.jsx("span",{className:"text-xs",children:"Search"})]}),c.jsxs("button",{className:`flex flex-col items-center p-1 ${t==="track"?"text-lakers-gold":"text-gray-400"}`,onClick:()=>e("track"),children:[c.jsx(_m,{size:20,className:"mb-1"}),c.jsx("span",{className:"text-xs",children:"Now Playing"})]}),c.jsxs("button",{className:`flex flex-col items-center p-1 ${t==="playlist"?"text-lakers-gold":"text-gray-400"}`,onClick:()=>e("playlist"),children:[c.jsx(W0,{size:20,className:"mb-1"}),c.jsx("span",{className:"text-xs",children:"Playlist"})]}),c.jsxs("button",{className:`flex flex-col items-center p-1 ${t==="liked-songs"?"text-lakers-gold":"text-gray-400"}`,onClick:()=>e("liked-songs"),children:[c.jsx(xn,{size:20,className:"mb-1"}),c.jsx("span",{className:"text-xs",children:"Liked"})]}),c.jsxs("button",{className:`flex flex-col items-center p-1 ${t==="chat"?"text-lakers-gold":"text-gray-400"}`,onClick:()=>e("chat"),children:[c.jsx(La,{size:20,className:"mb-1"}),c.jsx("span",{className:"text-xs",children:"Chat"})]})]})]})]}),c.jsx("div",{className:"h-[72px] md:h-24",children:c.jsx(xx,{currentTrack:n,isPlaying:a,onPlayPause:o,onNext:v,onPrevious:k})})]})}ym(document.getElementById("root")).render(c.jsx(j.StrictMode,{children:c.jsx(gk,{})}));export{yk as g};
